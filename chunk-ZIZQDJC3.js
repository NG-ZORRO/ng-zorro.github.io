import{Eb as ee,Ed as ie,Gb as te,Kd as se,Ld as oe,Sa as Z,Ta as q,Za as J,ob as Q,qa as $,xd as ne,yb as X,zb as Y}from"./chunk-TRM3R4TX.js";import{$b as L,Aa as F,Bb as v,Bd as _,Db as z,F as M,Fb as O,Gc as G,Hc as V,Ib as R,Jc as W,Ma as g,N as D,Xb as P,Zb as b,ac as j,ad as K,bc as k,cc as m,dc as p,ec as h,fc as r,g as d,ha as N,hb as w,jc as H,kc as U,ma as a,mc as B,nb as l,sc as y,ta as E,ua as x,vc as T,ya as A,zb as C}from"./chunk-FGVLHZZS.js";import{a as c,b as I}from"./chunk-H4BOUERG.js";var ae=(t,o)=>({$implicit:t,data:o});function re(t,o){t&1&&r(0,"nz-icon",3)}function ce(t,o){t&1&&r(0,"nz-icon",4)}function le(t,o){t&1&&r(0,"nz-icon",5)}function me(t,o){t&1&&r(0,"nz-icon",6)}function pe(t,o){t&1&&r(0,"nz-icon",7)}function de(t,o){if(t&1&&(H(0),r(1,"span",9),U()),t&2){let e=T();l(),m("innerHTML",e.instance.content,w)}}function he(t,o){if(t&1){let e=B();p(0,"nz-message",2),y("destroyed",function(i){E(e);let s=T();return x(s.remove(i.id,i.userAction))}),h()}if(t&2){let e=o.$implicit;m("instance",e)}}var ue=0,S=class{container;nzSingletonService=a(J);injector=a(A);remove(o){this.container&&(o?this.container.remove(o):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${ue++}`}withContainer(o){let e=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(e)return e;let n=oe(this.injector,{hasBackdrop:!1,scrollStrategy:ie(),positionStrategy:se(this.injector)}),i=new ne(o,null,this.injector),s=n.attach(i),f=n.hostElement;return f.style.zIndex="1010",e||(this.container=e=s.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,e),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),n.dispose()})),e}},fe=(()=>{class t{config;instances=[];_afterAllInstancesRemoved=new d;afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable();cdr=a(_);nzConfigService=a(Z);constructor(){this.subscribeConfigChange()}create(e){let n=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,n],this.readyInstances(),n}remove(e,n=!1){this.instances.map((i,s)=>({index:s,instance:i})).filter(({instance:i})=>i.messageId===e).forEach(({index:i,instance:s})=>{this.instances.splice(i,1),this.instances=[...this.instances],this.onRemove(s,n),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new d,e}onRemove(e,n){e.onClose.next(n),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:n,nzAnimate:i,nzPauseOnHover:s}=this.config;return c({nzDuration:n,nzAnimate:i,nzPauseOnHover:s},e)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t})}return t})(),ge=(()=>{class t{cdr=a(_);destroyRef=a(F);animationStateChanged=new d;options;autoClose;closeTimer;userAction=!1;eraseTimer;eraseTimingStart;eraseTTL;constructor(){this.destroyRef.onDestroy(()=>{this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()})}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(M(e=>e.phaseName==="done"&&e.toState==="leave"),D(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t})}return t})(),Ce=(()=>{class t extends ge{instance;destroyed=new R;index;static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(t)))(i||t)}})();static \u0275cmp=C({type:t,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[z],decls:9,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content"],["nzType","check-circle"],["nzType","info-circle"],["nzType","exclamation-circle"],["nzType","close-circle"],["nzType","loading"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML"]],template:function(n,i){if(n&1&&(p(0,"div",0),y("@moveUpMotion.done",function(f){return i.animationStateChanged.next(f)})("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()}),p(1,"div",1)(2,"div",2),P(3,re,1,0,"nz-icon",3)(4,ce,1,0,"nz-icon",4)(5,le,1,0,"nz-icon",5)(6,me,1,0,"nz-icon",6)(7,pe,1,0,"nz-icon",7),O(8,de,2,1,"ng-container",8),h()()()),n&2){let s;m("@moveUpMotion",i.instance.state),l(2),W("ant-message-"+i.instance.type),l(),b((s=i.instance.type)==="success"?3:s==="info"?4:s==="warning"?5:s==="error"?6:s==="loading"?7:-1),l(5),m("nzStringTemplateOutlet",i.instance.content)("nzStringTemplateOutletContext",K(6,ae,i,i.instance.options==null?null:i.instance.options.nzData))}},dependencies:[te,ee,Y,X],encapsulation:2,data:{animation:[Q]},changeDetection:0})}return t})(),u="message",ve={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},ze=(()=>{class t extends fe{dir=this.nzConfigService.getConfigForComponent(u)?.nzDirection||"ltr";top;constructor(){super(),this.updateConfig()}subscribeConfigChange(){q(u,()=>{this.updateConfig(),this.dir=this.nzConfigService.getConfigForComponent(u)?.nzDirection||this.dir})}updateConfig(){this.config=c(c(c({},ve),this.config),this.nzConfigService.getConfigForComponent(u)),this.top=$(this.config.nzTop),this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=C({type:t,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[z],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(n,i){n&1&&(p(0,"div",0),j(1,he,1,1,"nz-message",1,L),h()),n&2&&(G("top",i.top),V("ant-message-rtl",i.dir==="rtl"),l(),k(i.instances))},dependencies:[Ce],encapsulation:2,changeDetection:0})}return t})(),Ue=(()=>{class t extends S{componentPrefix="message-";success(e,n){return this.createInstance({type:"success",content:e},n)}error(e,n){return this.createInstance({type:"error",content:e},n)}info(e,n){return this.createInstance({type:"info",content:e},n)}warning(e,n){return this.createInstance({type:"warning",content:e},n)}loading(e,n){return this.createInstance({type:"loading",content:e},n)}create(e,n,i){return this.createInstance({type:e,content:n},i)}createInstance(e,n){return this.container=this.withContainer(ze),this.container.create(I(c({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:n}))}static \u0275fac=(()=>{let e;return function(i){return(e||(e=g(t)))(i||t)}})();static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();export{S as a,fe as b,ge as c,Ue as d};
