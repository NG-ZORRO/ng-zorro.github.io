import{a as R,c as bt,e as yt}from"./chunk-2XKKXFYY.js";import{a as Nt,b as xt}from"./chunk-KLVKRMCU.js";import{d as _t,e as St,f as vt,g as Ce}from"./chunk-MSGUQD5Y.js";import{b as gt,c as zt}from"./chunk-3DMEKNY7.js";import{$b as nt,Da as Je,Ec as lt,Fc as dt,Hc as ht,Kb as X,Lb as tt,Na as Xe,Oa as he,Q as de,R as J,Rc as pt,S as $,Tb as it,Xa as et,Zb as me,_a as pe,ab as ue,ac as st,lc as ee,nc as fe,nd as ut,oc as at,p as Ge,pd as mt,q as Ke,qd as ft,rc as ot,rd as Ct,ua as Ye,uc as rt,va as H,vc as ct}from"./chunk-BS5JWHVW.js";import{$ as Q,$c as Qe,Aa as N,Ac as F,Bc as I,C as be,Ib as ae,Ja as E,Jb as Ae,Ka as Me,Kd as Ze,Mb as Ee,Nb as Pe,Oa as q,Ob as v,P as ye,Q as Ne,Qa as Le,Qd as Ue,Rc as He,Ub as oe,Uc as je,Vb as g,Wb as Z,Xb as L,Xc as ce,Yb as Fe,Zb as re,_ as xe,_c as We,aa as S,cc as _,ea as Oe,ec as U,f as W,fc as G,g as ie,ga as Te,gc as K,ha as se,hc as b,hd as le,ia as we,ic as x,jc as O,kc as Ie,l as ne,lc as $e,ld as k,m as B,mb as De,md as Y,n as _e,na as M,nc as A,o as Se,od as qe,qc as w,rb as C,s as ve,sc as l,tc as Re,uc as Be,wa as ke,wb as Ve,xb as T,za as y,zc as P}from"./chunk-NACBYLXS.js";var Rt=["nz-cascader-option",""],Bt=(n,h)=>({$implicit:n,index:h});function Ht(n,h){if(n&1){let e=A();b(0,"span",4),w("click",function(o){y(e);let c=l();return N(c.onCheckboxClick(o))}),O(1,"span",5),x()}if(n&2){let e=l();L("ant-cascader-checkbox-checked",e.checked)("ant-cascader-checkbox-indeterminate",e.halfChecked)("ant-cascader-checkbox-disabled",e.disabled)}}function jt(n,h){}function Wt(n,h){if(n&1&&v(0,jt,0,0,"ng-template",1),n&2){let e=l();g("ngTemplateOutlet",e.optionTemplate)("ngTemplateOutletContext",je(2,Bt,e.node.origin,e.columnIndex))}}function Qt(n,h){if(n&1&&(O(0,"div",2),ce(1,"nzHighlight")),n&2){let e=l();g("innerHTML",Qe(1,1,e.node.title,e.highlightText,"g","ant-cascader-menu-item-keyword"),De)}}function qt(n,h){n&1&&O(0,"nz-icon",6)}function Zt(n,h){if(n&1&&(Ie(0),O(1,"nz-icon",8),$e()),n&2){let e=l(3);C(),g("nzType",e.expandIcon)}}function Ut(n,h){if(n&1&&v(0,Zt,2,1,"ng-container",7),n&2){let e=l(2);g("nzStringTemplateOutlet",e.expandIcon)}}function Gt(n,h){if(n&1&&(b(0,"div",3),v(1,qt,1,0,"nz-icon",6)(2,Ut,1,1,"ng-container"),x()),n&2){let e=l();C(),_(e.node.isLoading?1:2)}}var Kt=["selectContainer"],Yt=["menu"],Jt=["*"];function Xt(n,h){if(n&1){let e=A();b(0,"nz-select-item",9),w("delete",function(){let o=y(e).$implicit,c=l(3);return N(c.removeSelected(o))}),x()}if(n&2){let e=h.$implicit,s=l(3);g("deletable",!0)("disabled",s.nzDisabled)("label",s.nzDisplayWith(s.getAncestorOptionList(e)))}}function ei(n,h){if(n&1&&O(0,"nz-select-item",8),n&2){let e=l(3);g("deletable",!1)("disabled",!1)("label","+ "+(e.selectedNodes.length-e.nzMaxTagCount)+" ...")}}function ti(n,h){if(n&1&&(G(0,Xt,1,3,"nz-select-item",8,U),ce(2,"slice"),v(3,ei,1,3,"nz-select-item",8)),n&2){let e=l(2);K(We(2,1,e.selectedNodes,0,e.nzMaxTagCount)),C(3),_(e.selectedNodes.length>e.nzMaxTagCount?3:-1)}}function ii(n,h){if(n&1&&O(0,"nz-select-placeholder",10),n&2){let e=l(2);Z("display",e.inputValue||e.isComposing?"none":"block"),g("placeholder",e.nzPlaceHolder||(e.locale==null?null:e.locale.placeholder))}}function ni(n,h){if(n&1&&O(0,"nz-select-item",6),n&2){let e=l(2);g("deletable",!1)("disabled",e.nzDisabled)("label",e.labelRenderText)("contentTemplateOutlet",e.isLabelRenderTemplate?e.nzLabelRender:null)("contentTemplateOutletContext",e.labelRenderContext)}}function si(n,h){if(n&1&&O(0,"nz-icon",15),n&2){let e=l(3);L("ant-cascader-picker-arrow-expand",e.menuVisible),g("nzType",e.nzSuffixIcon)}}function ai(n,h){n&1&&O(0,"nz-icon",13)}function oi(n,h){if(n&1&&O(0,"nz-form-item-feedback-icon",14),n&2){let e=l(3);g("status",e.status)}}function ri(n,h){if(n&1&&(b(0,"span",11),v(1,si,1,3,"nz-icon",12)(2,ai,1,0,"nz-icon",13)(3,oi,1,1,"nz-form-item-feedback-icon",14),x()),n&2){let e=l(2);L("ant-select-arrow-loading",e.isLoading),C(),_(e.isLoading?2:1),C(2),_(e.hasFeedback&&e.status?3:-1)}}function ci(n,h){if(n&1){let e=A();b(0,"nz-select-clear",16),w("clear",function(o){y(e);let c=l(2);return N(c.clearSelection(o))}),x()}}function li(n,h){if(n&1){let e=A();b(0,"div",3,0),v(2,ti,4,5),b(3,"nz-select-search",4),w("isComposingChange",function(o){y(e);let c=l();return N(c.isComposingChange(o))})("valueChange",function(o){y(e);let c=l();return N(c.inputValue=o)}),x(),v(4,ii,1,3,"nz-select-placeholder",5)(5,ni,1,5,"nz-select-item",6),x(),v(6,ri,4,4,"span",7)(7,ci,1,0,"nz-select-clear")}if(n&2){let e=l();C(2),_(e.nzMultiple?2:-1),C(),g("showInput",!!e.nzShowSearch)("value",e.inputValue)("mirrorSync",e.nzMultiple)("disabled",e.nzDisabled)("autofocus",e.nzAutoFocus)("focusTrigger",e.menuVisible),C(),_(e.showPlaceholder?4:-1),C(),_(e.showLabelRender?5:-1),C(),_(e.nzShowArrow?6:-1),C(),_(e.clearIconVisible?7:-1)}}function di(n,h){if(n&1&&(b(0,"ul",20)(1,"li",21),O(2,"nz-embed-empty",22),x()()),n&2){let e=l(2);Z("width",e.dropdownWidthStyle)("height",e.dropdownHeightStyle),C(2),g("nzComponentName","cascader")("specificContent",e.nzNotFoundContent)}}function hi(n,h){if(n&1){let e=A();b(0,"li",26),w("mouseenter",function(o){let c=y(e).$implicit,d=l().$index,p=l(3);return N(p.onOptionMouseEnter(c,d,o))})("mouseleave",function(o){let c=y(e).$implicit,d=l().$index,p=l(3);return N(p.onOptionMouseLeave(c,d,o))})("click",function(o){let c=y(e).$implicit,d=l().$index,p=l(3);return N(p.onOptionClick(c,d,o))})("check",function(){let o=y(e).$implicit,c=l().$index,d=l(3);return N(d.onOptionCheck(o,c))}),x()}if(n&2){let e=h.$implicit,s=l().$index,o=l(3);g("expandIcon",o.nzExpandIcon)("columnIndex",s)("nzLabelProperty",o.nzLabelProperty)("optionTemplate",o.nzOptionRender)("activated",o.isOptionActivated(e,s))("highlightText",o.inSearchingMode?o.inputValue:"")("node",e)("dir",o.dir)("checkable",o.nzMultiple)}}function pi(n,h){if(n&1&&(b(0,"ul",24),G(1,hi,1,9,"li",25,U),x()),n&2){let e=h.$implicit,s=l(3);re(s.nzColumnClassName),Z("height",s.dropdownHeightStyle),C(),K(e)}}function ui(n,h){if(n&1&&G(0,pi,3,4,"ul",23,U),n&2){let e=l(2);K(e.cascaderService.columns)}}function mi(n,h){if(n&1){let e=A();b(0,"div",17),w("mouseenter",function(){y(e);let o=l();return N(o.onTriggerMouseEnter())})("mouseleave",function(o){y(e);let c=l();return N(c.onTriggerMouseLeave(o))}),b(1,"div",18,1),v(3,di,3,6,"ul",19)(4,ui,2,0),x()()}if(n&2){let e=l();L("ant-select-dropdown-placement-bottomLeft",e.dropdownPosition==="bottomLeft")("ant-select-dropdown-placement-bottomRight",e.dropdownPosition==="bottomRight")("ant-select-dropdown-placement-topLeft",e.dropdownPosition==="topLeft")("ant-select-dropdown-placement-topRight",e.dropdownPosition==="topRight")("ant-cascader-dropdown-rtl",e.dir==="rtl"),g("@slideMotion","enter")("@.disabled",!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation),C(),Fe(e.nzMenuStyle),re(e.nzMenuClassName),L("ant-cascader-rtl",e.dir==="rtl")("ant-cascader-menus-hidden",!e.menuVisible)("ant-cascader-menu-empty",e.shouldShowEmpty),C(2),_(e.shouldShowEmpty?3:4)}}function kt(n){return typeof n!="boolean"}function fi(n){return n.isLeaf||!n.children||!n.children.length}function Ci(n){return!!n.children&&!!n.children.length&&!n.isLeaf}var Mt=(()=>{class n{cdr;optionTemplate=null;node;activated=!1;highlightText;nzLabelProperty="label";columnIndex;expandIcon="";dir="ltr";checkable=!1;check=new E;nativeElement=M(q).nativeElement;constructor(e){this.cdr=e}ngOnInit(){this.expandIcon===""&&this.dir==="rtl"?this.expandIcon="left":this.expandIcon===""&&(this.expandIcon="right")}get checked(){return this.node.isChecked}get halfChecked(){return this.node.isHalfChecked}get disabled(){return this.node.isDisabled||this.node.isDisableCheckbox}markForCheck(){this.cdr.markForCheck()}onCheckboxClick(e){e.preventDefault(),e.stopPropagation(),this.checkable&&this.check.emit()}static \u0275fac=function(s){return new(s||n)(T(le))};static \u0275cmp=ae({type:n,selectors:[["","nz-cascader-option",""]],hostAttrs:[1,"ant-cascader-menu-item","ant-cascader-menu-item-expanded"],hostVars:7,hostBindings:function(s,o){s&2&&(oe("title",o.node.title),L("ant-cascader-menu-item-active",o.activated)("ant-cascader-menu-item-expand",!o.node.isLeaf)("ant-cascader-menu-item-disabled",o.node.isDisabled))},inputs:{optionTemplate:"optionTemplate",node:"node",activated:"activated",highlightText:"highlightText",nzLabelProperty:"nzLabelProperty",columnIndex:[2,"columnIndex","columnIndex",Y],expandIcon:"expandIcon",dir:"dir",checkable:[2,"checkable","checkable",k]},outputs:{check:"check"},exportAs:["nzCascaderOption"],attrs:Rt,decls:4,vars:3,consts:[[1,"ant-cascader-checkbox",3,"ant-cascader-checkbox-checked","ant-cascader-checkbox-indeterminate","ant-cascader-checkbox-disabled"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-cascader-menu-item-content",3,"innerHTML"],[1,"ant-cascader-menu-item-expand-icon"],[1,"ant-cascader-checkbox",3,"click"],[1,"ant-cascader-checkbox-inner"],["nzType","loading"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(s,o){s&1&&v(0,Ht,2,6,"span",0)(1,Wt,1,5,null,1)(2,Qt,2,6,"div",2)(3,Gt,3,1,"div",3),s&2&&(_(o.checkable?0:-1),C(),_(o.optionTemplate?1:2),C(2),_(!o.node.isLeaf||o.node.children!=null&&o.node.children.length||o.node.isLoading?3:-1))},dependencies:[Ze,xt,Nt,ue,pe,st,nt],encapsulation:2,changeDetection:0})}return n})(),Lt=(()=>{class n extends bt{fieldNames={label:"label",value:"value"};missingNodeList=[];treeNodePostProcessor=e=>{e.key=this.getOptionValue(e),e.title=this.getOptionLabel(e)};getOptionValue(e){return e.origin[this.fieldNames.value||"value"]}getOptionLabel(e){return e.origin[this.fieldNames.label||"label"]}get children(){return this.rootNodes}set children(e){this.rootNodes=e.map(s=>s instanceof R?s:new R(s,null))}constructor(){super()}toOptions(e){return e.map(s=>s.origin)}getAncestorNodeList(e){return e?e.parentNode?[...this.getAncestorNodeList(e.parentNode),e]:[e]:[]}conductCheckPaths(e,s){this.checkedNodeList=[],this.halfCheckedNodeList=[],this.missingNodeList=[];let o=[],c=d=>{d.forEach(p=>{if(e===null)p.isChecked=!!p.origin.checked;else{let t=this.getAncestorNodeList(p).map(i=>this.getOptionValue(i));e.some(i=>J(t,i))?(p.isChecked=!0,p.isHalfChecked=!1,o.push(t)):(p.isChecked=!1,p.isHalfChecked=!1)}p.children.length>0&&c(p.children)})};c(this.rootNodes),this.refreshCheckState(s),this.missingNodeList=this.getMissingNodeList(e,o)}conductSelectedPaths(e,s){this.selectedNodeList.forEach(d=>d.isSelected=!1),this.selectedNodeList=[],this.missingNodeList=[];let o=[],c=d=>d.every(p=>{let t=this.getAncestorNodeList(p).map(i=>this.getOptionValue(i));if(e.some(i=>J(t,i))){if(p.isSelected=!0,this.setSelectedNodeList(p),o.push(t),!s)return!1}else p.isSelected=!1;return p.children.length>0?c(p.children):!0});c(this.rootNodes),this.missingNodeList=this.getMissingNodeList(e,o)}getMissingNodeList(e,s){return e?e.filter(o=>!s.some(c=>J(o,c))).map(o=>this.createMissingNode(o)).filter($):[]}createMissingNode(e){if(!e?.length)return null;let s=c=>({[this.fieldNames.value||"value"]:c,[this.fieldNames.label||"label"]:c}),o=new R(s(e[0]),null,this);for(let c=1;c<e.length;c++){let d=new R(s(e[c]));o.addChildren([d]),o=d}return o}static \u0275fac=function(s){return new(s||n)};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Dt=(()=>{class n{activatedNodes=[];columns=[];inSearchingMode=!1;values=[];$loading=new ie(!1);$redraw=new W;$nodeSelected=new W;$quitSearching=new W;columnSnapshot=[[]];cascaderComponent;searchOptionPathMap=new Map;get nzOptions(){return this.cascaderComponent.treeService.toOptions(this.columns[0]||[])}ngOnDestroy(){this.$redraw.complete(),this.$quitSearching.complete(),this.$nodeSelected.complete(),this.$loading.complete(),this.searchOptionPathMap.clear()}withComponent(e){this.cascaderComponent=e}setNodeActivated(e,s,o=!1,c=!1,d=!0){e.isDisabled||(this.activatedNodes[s]=e,this.trackAncestorActivatedNodes(s),this.dropBehindActivatedNodes(s),Ci(e)?this.setColumnData(e.children,s+1):!e.isLeaf&&d?this.loadChildren(e,s):e.isLeaf&&this.dropBehindColumns(s),o&&e.isSelectable&&this.setNodeSelected(e,s,c),this.$redraw.next())}setNodeSelected(e,s,o=!1){let c=this.cascaderComponent.nzChangeOn,d=(p,t)=>typeof c=="function"?c(p,t):!1;(o||e.isLeaf||this.cascaderComponent.nzChangeOnSelect||d(e.origin,s))&&(e.isSelected=!0,this.cascaderComponent.treeService.setSelectedNodeList(e,o),this.cascaderComponent.updateSelectedNodes(),this.$redraw.next(),this.$nodeSelected.next(e))}setNodeDeactivatedSinceColumn(e){this.dropBehindActivatedNodes(e-1),this.dropBehindColumns(e),this.$redraw.next()}setSearchOptionSelected(e,s=!1){this.setNodeSelected(e,e.level,s),setTimeout(()=>{this.$quitSearching.next(),this.$redraw.next()},200)}clearSearchOptions(){for(let e of this.searchOptionPathMap.keys())e.isDisabled=e.origin.disabled||!1,e.title=this.getOptionLabel(e.origin);this.searchOptionPathMap.clear()}prepareSearchOptions(e){let s=[],o=[],c=(r,m)=>m.some(u=>{let f=this.getOptionLabel(u);return!!f&&f.indexOf(r)!==-1}),d=this.cascaderComponent.nzShowSearch,p=kt(d)&&d.filter?d.filter:c,t=kt(d)&&d.sorter?d.sorter:null,i=(r,m=!1)=>{o.push(r);let u=this.cascaderComponent.treeService.toOptions(o);p(e,u)&&(this.searchOptionPathMap.set(r,u),r.isDisabled=m||r.isDisabled,r.title=u.map(f=>this.getOptionLabel(f)).join(" / "),s.push(r)),o.pop()},a=(r,m=!1)=>{let u=m||r.isDisabled;o.push(r),r.children.forEach(f=>{f.isLeaf||a(f,u),(f.isLeaf||!f.children||!f.children.length)&&i(f,u)}),o.pop()};if(!this.columnSnapshot.length){this.columns=[[]];return}this.columnSnapshot[0].forEach(r=>fi(r)?i(r):a(r)),t&&s.sort((r,m)=>t(this.searchOptionPathMap.get(r),this.searchOptionPathMap.get(m),e)),this.columns=[s],this.$redraw.next()}setSearchingMode(e){this.inSearchingMode=e,e?(this.clearSearchOptions(),this.columnSnapshot=[...this.columns],this.activatedNodes=[]):(this.clearSearchOptions(),this.activatedNodes=[],setTimeout(()=>{if(this.columns=[...this.columnSnapshot],this.cascaderComponent.selectedNodes.length){let s=this.cascaderComponent.selectedNodes[0],o=s.level;this.activatedNodes[o]=s,this.trackAncestorActivatedNodes(o),this.trackAncestorColumnData(o)}this.$redraw.next()})),this.$redraw.next()}clear(){this.values=[],this.activatedNodes=[],this.dropBehindColumns(0),this.$redraw.next(),this.$nodeSelected.next(null)}getOptionLabel(e){return e[this.cascaderComponent.nzLabelProperty||"label"]}getOptionValue(e){return e[this.cascaderComponent.nzValueProperty||"value"]}setColumnData(e,s){this.columns[s]=e,this.dropBehindColumns(s)}trackAncestorColumnData(e){if(this.activatedNodes[e]){this.dropBehindColumns(e);for(let o=0;o<e;o++)this.columns[o+1]=this.activatedNodes[o].children}}trackAncestorActivatedNodes(e){for(let s=e-1;s>=0;s--)this.activatedNodes[s]||(this.activatedNodes[s]=this.activatedNodes[s+1].parentNode)}dropBehindActivatedNodes(e){this.activatedNodes=this.activatedNodes.splice(0,e+1)}dropBehindColumns(e){e<this.columns.length-1&&(this.columns=this.columns.slice(0,e+1))}loadChildren(e,s,o){let c=s<0||!$(e),d=e?.origin||{},p=this.cascaderComponent.nzLoadData;p&&(this.$loading.next(c),e&&(e.isLoading=!0),_e(p(d,s)).pipe(Ne(()=>{e&&(e.isLoading=!1),this.$loading.next(!1),this.$redraw.next()})).subscribe({next:()=>{if(d.children){if(c){let t=this.cascaderComponent.coerceTreeNodes(d.children);this.cascaderComponent.treeService.initTree(t),this.setColumnData(t,0)}else{let t=d.children.map(i=>new R(i,e));e.children=t,this.setColumnData(t,s+1)}o?.(d.children)}},error:()=>{e&&(e.isLeaf=!0)}}))}isLoaded(e){return!!this.columns[e]&&this.columns[e].length>0}static \u0275fac=function(s){return new(s||n)};static \u0275prov=se({token:n,factory:n.\u0275fac})}return n})(),Vt="cascader",At=n=>n.join(" / "),gi=(()=>{let n=yt,h,e=[],s=[],o,c=[],d=[];return class te extends n{static{let t=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;h=[he()],o=[he()],ne(null,null,h,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:i=>"nzSize"in i,get:i=>i.nzSize,set:(i,a)=>{i.nzSize=a}},metadata:t},e,s),ne(null,null,o,{kind:"field",name:"nzBackdrop",static:!1,private:!1,access:{has:i=>"nzBackdrop"in i,get:i=>i.nzBackdrop,set:(i,a)=>{i.nzBackdrop=a}},metadata:t},c,d),t&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})}ngZone;cdr;i18nService;destroy$;elementRef;renderer;directionality;_nzModuleName=Vt;selectContainer;set input(t){this.input$.next(t?.inputElement)}get input(){return this.input$.getValue()}input$=new ie(void 0);menu;overlay;cascaderItems;nzOptionRender=null;nzShowInput=!0;nzShowArrow=!0;nzAllowClear=!0;nzAutoFocus=!1;nzChangeOnSelect=!1;nzDisabled=!1;nzColumnClassName;nzExpandTrigger="click";nzValueProperty="value";nzLabelProperty="label";nzLabelRender=null;nzNotFoundContent;nzSize=B(this,e,"default");nzBackdrop=(B(this,s),B(this,c,!1));nzShowSearch=(B(this,d),!1);nzPlaceHolder="";nzMenuClassName;nzMenuStyle=null;nzMouseLeaveDelay=150;nzMouseEnterDelay=150;nzStatus="";nzMultiple=!1;nzMaxTagCount=1/0;nzPlacement="bottomLeft";nzTriggerAction=["click"];nzChangeOn;nzLoadData;nzDisplayWith=t=>At(t.map(i=>this.cascaderService.getOptionLabel(i)));nzSuffixIcon="down";nzExpandIcon="";get nzOptions(){return this.cascaderService.nzOptions}set nzOptions(t){let i=this.coerceTreeNodes(t||[]);this.treeService.initTree(i),this.cascaderService.columns=[i],this.updateSelectedNodes(!0),this.inSearchingMode&&(this.cascaderService.setSearchingMode(this.inSearchingMode),this.cascaderService.prepareSearchOptions(this.inputValue))}get treeService(){return this.nzTreeService}nzVisibleChange=new E;nzSelectionChange=new E;nzRemoved=new E;nzClear=new E;prefixCls="ant-select";statusCls={};status="";hasFeedback=!1;shouldShowEmpty=!1;el;menuVisible=!1;isLoading=!1;labelRenderText;labelRenderContext={};onChange=Function.prototype;onTouched=Function.prototype;positions=[...at];dropdownWidthStyle;dropdownHeightStyle="";dropdownPosition="bottomLeft";isFocused=!1;locale;dir="ltr";isComposing=!1;get overlayOrigin(){return this.elementRef}finalSize=qe(()=>this.compactSize?this.compactSize():this.size());size=Le(this.nzSize);compactSize=M(lt,{optional:!0});inputString="";isOpening=!1;delayMenuTimer;delaySelectTimer;isNzDisableFirstChange=!0;selectedNodes=[];get inSearchingMode(){return this.cascaderService.inSearchingMode}set inputValue(t){this.inputString=t,this.toggleSearchingMode(!!t)}get inputValue(){return this.inputString}get hasInput(){return!!this.inputValue}get hasValue(){return this.cascaderService.values&&this.cascaderService.values.length>0}get showLabelRender(){return!this.hasInput&&!this.nzMultiple&&!!this.selectedNodes.length}get showPlaceholder(){return!(this.hasInput||this.hasValue)}get clearIconVisible(){return this.nzAllowClear&&!this.nzDisabled&&(this.hasValue||this.hasInput)}get isLabelRenderTemplate(){return!!this.nzLabelRender}noAnimation=M(me,{host:!0,optional:!0});nzFormStatusService=M(mt,{optional:!0});nzFormNoStatusService=M(ft,{optional:!0});nzConfigService=M(Xe);cascaderService=M(Dt);constructor(t,i,a,r,m,u,f,D){super(t),this.ngZone=i,this.cdr=a,this.i18nService=r,this.destroy$=m,this.elementRef=u,this.renderer=f,this.directionality=D,this.el=u.nativeElement,this.cascaderService.withComponent(this),this.renderer.addClass(this.elementRef.nativeElement,"ant-select"),this.renderer.addClass(this.elementRef.nativeElement,"ant-cascader")}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(ye((i,a)=>i.status===a.status&&i.hasFeedback===a.hasFeedback),Oe(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:Se(!1)),ve(([{status:i,hasFeedback:a},r])=>({status:r?"":i,hasFeedback:a})),S(this.destroy$)).subscribe(({status:i,hasFeedback:a})=>{this.setStatusStyles(i,a)});let t=this.cascaderService;t.$redraw.pipe(S(this.destroy$)).subscribe(()=>{this.checkChildren(),this.setDisplayLabel(),this.cdr.detectChanges(),this.reposition(),this.setDropdownStyles()}),t.$loading.pipe(S(this.destroy$)).subscribe(i=>{this.isLoading=i}),t.$nodeSelected.pipe(S(this.destroy$)).subscribe(i=>{i?(!this.nzMultiple&&(i.isLeaf||this.nzChangeOnSelect&&this.nzExpandTrigger==="hover")&&this.delaySetMenuVisible(!1),this.nzSelectionChange.emit(this.getAncestorOptionList(i)),this.cdr.markForCheck()):(this.emitValue([]),this.nzSelectionChange.emit([]))}),t.$quitSearching.pipe(S(this.destroy$)).subscribe(()=>{this.inputValue="",this.dropdownWidthStyle=""}),this.i18nService.localeChange.pipe(xe(),S(this.destroy$)).subscribe(()=>{this.setLocale()}),this.size.set(this.nzSize),this.nzConfigService.getConfigChangeEventForComponent(Vt).pipe(S(this.destroy$)).subscribe(()=>{this.size.set(this.nzSize),this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change.pipe(S(this.destroy$)).subscribe(()=>{this.dir=this.directionality.value,t.$redraw.next()}),this.setupSelectionChangeListener(),this.setupChangeListener(),this.setupKeydownListener(),this.setupFocusListener()}ngOnChanges(t){let{nzStatus:i,nzSize:a,nzPlacement:r}=t;if(i&&this.setStatusStyles(this.nzStatus,this.hasFeedback),a&&this.size.set(a.currentValue),r){let{currentValue:m}=r;this.dropdownPosition=m;let u=["bottomLeft","topLeft","bottomRight","topRight"];m&&u.includes(m)?this.positions=[fe[m]]:this.positions=u.map(f=>fe[f])}}ngOnDestroy(){this.clearDelayMenuTimer(),this.clearDelaySelectTimer()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}writeValue(t){$(t)?(this.nzMultiple?this.cascaderService.values=de(t):this.cascaderService.values=[de(t)],this.clearSelectedNodes(),this.updateSelectedNodes(!0,!1)):(this.cascaderService.values=[],this.clearSelectedNodes(),this.selectedNodes=[],this.cascaderService.$redraw.next())}setupSelectionChangeListener(){be(this.nzSelectionChange,this.nzRemoved,this.nzClear).pipe(S(this.destroy$)).subscribe(()=>{this.updateSelectedNodes(),this.emitValue(this.cascaderService.values),this.cascaderService.$redraw.next()})}delaySetMenuVisible(t,i=100,a=!1){this.clearDelayMenuTimer(),i?(t&&a&&(this.isOpening=!0),this.delayMenuTimer=setTimeout(()=>{this.setMenuVisible(t),this.cdr.detectChanges(),this.clearDelayMenuTimer(),t&&setTimeout(()=>{this.isOpening=!1},100)},i)):this.setMenuVisible(t)}setMenuVisible(t){this.nzDisabled||this.menuVisible===t||(t?(this.cascaderService.$redraw.next(),this.updateSelectedNodes(!!this.nzLoadData),this.scrollToActivatedOptions()):this.inputValue="",this.menuVisible=t,this.nzVisibleChange.emit(t),this.cdr.detectChanges())}clearDelayMenuTimer(){this.delayMenuTimer&&(clearTimeout(this.delayMenuTimer),this.delayMenuTimer=void 0)}clearSelection(t){t&&(t.preventDefault(),t.stopPropagation()),this.clearSelectedNodes(),this.labelRenderText="",this.labelRenderContext={},this.inputValue="",this.setMenuVisible(!1),this.cascaderService.clear(),this.nzClear.emit()}clearSelectedNodes(){this.selectedNodes.forEach(t=>{this.removeSelected(t,!1)})}emitValue(t){this.nzMultiple?this.onChange(t):this.onChange(t?.length?t[0]:[])}getSubmitValue(){return this.nzMultiple?this.cascaderService.values:this.cascaderService.values?.length?this.cascaderService.values[0]:[]}focus(){this.isFocused||((this.input?.nativeElement||this.el).focus(),this.isFocused=!0)}blur(){this.isFocused&&((this.input?.nativeElement||this.el).blur(),this.isFocused=!1)}handleInputBlur(){this.menuVisible?this.focus():this.blur()}handleInputFocus(){this.focus()}isComposingChange(t){this.isComposing=t}onTriggerClick(){this.nzDisabled||(this.nzShowSearch&&this.focus(),this.isActionTrigger("click")&&this.delaySetMenuVisible(!this.menuVisible,100),this.onTouched())}onTriggerMouseEnter(){this.nzDisabled||!this.isActionTrigger("hover")||this.delaySetMenuVisible(!0,this.nzMouseEnterDelay,!0)}onTriggerMouseLeave(t){if(this.nzDisabled||!this.menuVisible||this.isOpening||!this.isActionTrigger("hover")){t.preventDefault();return}let i=t.relatedTarget,a=this.el,r=this.menu&&this.menu.nativeElement;a.contains(i)||r&&r.contains(i)||this.delaySetMenuVisible(!1,this.nzMouseLeaveDelay)}onOptionMouseEnter(t,i,a){a.preventDefault(),this.nzExpandTrigger==="hover"&&(t.isLeaf?this.cascaderService.setNodeDeactivatedSinceColumn(i):this.delaySetOptionActivated(t,i,!1))}onOptionMouseLeave(t,i,a){a.preventDefault(),this.nzExpandTrigger==="hover"&&!t.isLeaf&&this.clearDelaySelectTimer()}getAncestorOptionList(t){let i=this.treeService.getAncestorNodeList(t);return this.treeService.toOptions(i)}updateSelectedNodes(t=!1,i=!0){let a=this.cascaderService.values,r=this.nzMultiple,m=u=>{this.selectedNodes=[...this.treeService.missingNodeList,...this.nzMultiple?this.getCheckedNodeList():this.getSelectedNodeList()].sort((f,D)=>{let V=a.indexOf(f.key),z=a.indexOf(D.key);return V!==-1&&z!==-1?V-z:V!==-1?-1:z!==-1?1:0}),u&&(this.cascaderService.values=this.selectedNodes.map(f=>this.getAncestorOptionList(f).map(D=>this.cascaderService.getOptionValue(D)))),this.cascaderService.$redraw.next()};if(t){let u=a[0],f=u?.length?u.length-1:0;this.treeService.fieldNames={value:this.nzValueProperty,label:this.nzLabelProperty},this.treeService.isMultiple=r,this.treeService.isCheckStrictly=!1;let D=()=>{r?this.treeService.conductCheckPaths(a,this.treeService.isCheckStrictly):this.treeService.conductSelectedPaths(a,r)},V=(z=0)=>{let ge=()=>{let j=u?.[z];if(!$(j)){this.cascaderService.$redraw.next();return}let ze=this.cascaderService.columns[z].find(Et=>this.cascaderService.getOptionValue(Et.origin)===j)||null;$(ze)&&(this.cascaderService.setNodeActivated(ze,z,!1,r,!1),z<f&&V(z+1)),D(),m(!1)};if(this.cascaderService.isLoaded(z)||!this.nzLoadData)ge();else{let j=this.cascaderService.activatedNodes[z-1];this.cascaderService.loadChildren(j,z-1,ge)}};if(this.nzLoadData)V();else{let z=this.coerceTreeNodes(this.nzOptions||[]);this.treeService.initTree(z),this.cascaderService.setColumnData(z,0),V()}}m(i)}onOptionClick(t,i,a){a&&a.preventDefault(),!(t&&t.isDisabled)&&(this.el.focus(),this.nzMultiple&&t.isLeaf?this.onOptionCheck(t,i,!0):this.inSearchingMode?this.cascaderService.setSearchOptionSelected(t,this.nzMultiple):this.cascaderService.setNodeActivated(t,i,!this.nzMultiple))}onOptionCheck(t,i,a=!1){!this.nzMultiple||t.isDisabled||t.isDisableCheckbox||(t.isChecked=!t.isChecked,t.isHalfChecked=!1,this.treeService.setCheckedNodeList(t),this.treeService.conduct(t,this.treeService.isCheckStrictly),this.inSearchingMode?this.cascaderService.setSearchOptionSelected(t,!0):a?this.cascaderService.setNodeActivated(t,i,!0,!0):this.cascaderService.setNodeSelected(t,i,!0))}removeSelected(t,i=!0){t.isSelected=!1,t.isChecked=!1,this.nzMultiple&&this.treeService.conduct(t,this.treeService.isCheckStrictly),this.treeService.setSelectedNodeList(t,this.nzMultiple),i&&this.nzRemoved.emit(t.origin)}onClickOutside(t){let i=et(t);this.el.contains(i)||this.closeMenu()}onPositionChange(t){let i=ot(t);this.dropdownPosition=i}isActionTrigger(t){return typeof this.nzTriggerAction=="string"?this.nzTriggerAction===t:this.nzTriggerAction.indexOf(t)!==-1}onEnter(){let t=Math.max(this.cascaderService.activatedNodes.length-1,0),i=this.cascaderService.activatedNodes[t];i&&!i.isDisabled&&(this.inSearchingMode?this.cascaderService.setSearchOptionSelected(i):this.cascaderService.setNodeActivated(i,t,!0))}moveUpOrDown(t){let i=Math.max(this.cascaderService.activatedNodes.length-1,0),a=this.cascaderService.activatedNodes[i],r=this.cascaderService.columns[i]||[],m=r.length,u=-1;for(a?u=r.indexOf(a):u=t?m:-1;u=t?u-1:u+1,!(u<0||u>=m);){let f=r[u];if(!(!f||f.isDisabled)){this.cascaderService.setNodeActivated(f,i);break}}}moveLeft(){let t=this.cascaderService.activatedNodes;t.length&&(t.pop(),this.cascaderService.setNodeDeactivatedSinceColumn(t.length))}moveRight(){let t=this.cascaderService.activatedNodes.length,i=this.cascaderService.columns[t];if(i&&i.length){let a=i.find(r=>!r.isDisabled);a&&this.cascaderService.setNodeActivated(a,t)}}clearDelaySelectTimer(){this.delaySelectTimer&&(clearTimeout(this.delaySelectTimer),this.delaySelectTimer=void 0)}delaySetOptionActivated(t,i,a){this.clearDelaySelectTimer(),this.delaySelectTimer=setTimeout(()=>{this.cascaderService.setNodeActivated(t,i,a,this.nzMultiple),this.delaySelectTimer=void 0},150)}toggleSearchingMode(t){this.inSearchingMode!==t&&this.cascaderService.setSearchingMode(t),this.inSearchingMode&&this.cascaderService.prepareSearchOptions(this.inputValue)}isOptionActivated(t,i){return this.cascaderService.activatedNodes[i]===t}setDisabledState(t){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||t,this.isNzDisableFirstChange=!1,this.nzDisabled&&this.closeMenu()}closeMenu(){this.blur(),this.clearDelayMenuTimer(),this.setMenuVisible(!1),!this.hasValue&&this.cascaderService.columns.length&&this.cascaderService.dropBehindColumns(0)}reposition(){this.overlay&&this.overlay.overlayRef&&this.menuVisible&&Promise.resolve().then(()=>{this.overlay.overlayRef.updatePosition(),this.cdr.markForCheck()})}checkChildren(){this.cascaderItems&&this.cascaderItems.forEach(t=>t.markForCheck())}setDisplayLabel(){if(this.nzMultiple)return;let t=this.selectedNodes.length?this.selectedNodes[0]:null,i=this.getAncestorOptionList(t),a=i.map(r=>this.cascaderService.getOptionLabel(r));this.isLabelRenderTemplate&&(this.labelRenderContext={labels:a,selectedOptions:i}),this.labelRenderText=At.call(this,a)}setDropdownStyles(){let t=this.cascaderService.columns[0];this.shouldShowEmpty=this.inSearchingMode&&(!t||!t.length)||!(this.nzOptions&&this.nzOptions.length)&&!this.nzLoadData,this.dropdownHeightStyle=this.shouldShowEmpty?"auto":"",this.input&&(this.dropdownWidthStyle=this.inSearchingMode||this.shouldShowEmpty?`${this.selectContainer.nativeElement.offsetWidth}px`:"")}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.cdr.markForCheck(),this.statusCls=Ye(this.prefixCls,t,i),Object.keys(this.statusCls).forEach(a=>{this.statusCls[a]?this.renderer.addClass(this.elementRef.nativeElement,a):this.renderer.removeClass(this.elementRef.nativeElement,a)})}setLocale(){this.locale=this.i18nService.getLocaleData("global"),this.cdr.markForCheck()}scrollToActivatedOptions(){this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this.cascaderItems.toArray().filter(t=>t.activated).forEach(t=>{t.nativeElement.scrollIntoView({block:"start",inline:"nearest"})})})})}setupChangeListener(){this.input$.pipe(Q(t=>H(t?.nativeElement,"change")),S(this.destroy$)).subscribe(t=>t.stopPropagation())}setupFocusListener(){this.input$.pipe(Q(t=>H(t?.nativeElement,"focus")),S(this.destroy$)).subscribe(()=>this.handleInputFocus()),this.input$.pipe(Q(t=>H(t?.nativeElement,"blur")),S(this.destroy$)).subscribe(()=>this.handleInputBlur())}setupKeydownListener(){H(this.el,"keydown").pipe(S(this.destroy$)).subscribe(t=>{let i=t.keyCode;if(!(i!==40&&i!==38&&i!==37&&i!==39&&i!==13&&i!==8&&i!==27)){if(!this.menuVisible&&i!==8&&i!==27)return this.ngZone.run(()=>this.setMenuVisible(!0));this.inSearchingMode&&(i===8||i===37||i===39)||this.menuVisible&&(t.preventDefault(),this.ngZone.run(()=>{i===40?this.moveUpOrDown(!1):i===38?this.moveUpOrDown(!0):i===37?this.moveLeft():i===39?this.moveRight():i===13&&this.onEnter(),this.cdr.markForCheck()}))}})}static \u0275fac=function(i){return new(i||te)(T(Lt),T(Me),T(le),T(Je),T(ee),T(q),T(Ve),T(Ge))};static \u0275cmp=ae({type:te,selectors:[["nz-cascader"],["","nz-cascader",""]],viewQuery:function(i,a){if(i&1&&(P(Kt,5),P(Ce,5),P(Yt,5),P(X,5),P(Mt,5)),i&2){let r;F(r=I())&&(a.selectContainer=r.first),F(r=I())&&(a.input=r.first),F(r=I())&&(a.menu=r.first),F(r=I())&&(a.overlay=r.first),F(r=I())&&(a.cascaderItems=r)}},hostVars:25,hostBindings:function(i,a){i&1&&w("click",function(){return a.onTriggerClick()})("mouseenter",function(){return a.onTriggerMouseEnter()})("mouseleave",function(m){return a.onTriggerMouseLeave(m)}),i&2&&(oe("tabIndex","0"),L("ant-select-in-form-item",!!a.nzFormStatusService)("ant-select-lg",a.finalSize()==="large")("ant-select-sm",a.finalSize()==="small")("ant-select-allow-clear",a.nzAllowClear)("ant-select-show-arrow",a.nzShowArrow)("ant-select-show-search",!!a.nzShowSearch)("ant-select-disabled",a.nzDisabled)("ant-select-open",a.menuVisible)("ant-select-focused",a.isFocused)("ant-select-multiple",a.nzMultiple)("ant-select-single",!a.nzMultiple)("ant-select-rtl",a.dir==="rtl"))},inputs:{nzOptionRender:"nzOptionRender",nzShowInput:[2,"nzShowInput","nzShowInput",k],nzShowArrow:[2,"nzShowArrow","nzShowArrow",k],nzAllowClear:[2,"nzAllowClear","nzAllowClear",k],nzAutoFocus:[2,"nzAutoFocus","nzAutoFocus",k],nzChangeOnSelect:[2,"nzChangeOnSelect","nzChangeOnSelect",k],nzDisabled:[2,"nzDisabled","nzDisabled",k],nzColumnClassName:"nzColumnClassName",nzExpandTrigger:"nzExpandTrigger",nzValueProperty:"nzValueProperty",nzLabelProperty:"nzLabelProperty",nzLabelRender:"nzLabelRender",nzNotFoundContent:"nzNotFoundContent",nzSize:"nzSize",nzBackdrop:"nzBackdrop",nzShowSearch:"nzShowSearch",nzPlaceHolder:"nzPlaceHolder",nzMenuClassName:"nzMenuClassName",nzMenuStyle:"nzMenuStyle",nzMouseLeaveDelay:[2,"nzMouseLeaveDelay","nzMouseLeaveDelay",Y],nzMouseEnterDelay:[2,"nzMouseEnterDelay","nzMouseEnterDelay",Y],nzStatus:"nzStatus",nzMultiple:[2,"nzMultiple","nzMultiple",k],nzMaxTagCount:"nzMaxTagCount",nzPlacement:"nzPlacement",nzTriggerAction:"nzTriggerAction",nzChangeOn:"nzChangeOn",nzLoadData:"nzLoadData",nzDisplayWith:"nzDisplayWith",nzSuffixIcon:"nzSuffixIcon",nzExpandIcon:"nzExpandIcon",nzOptions:"nzOptions"},outputs:{nzVisibleChange:"nzVisibleChange",nzSelectionChange:"nzSelectionChange",nzRemoved:"nzRemoved",nzClear:"nzClear"},exportAs:["nzCascader"],features:[He([{provide:pt,useExisting:Te(()=>te),multi:!0},{provide:dt,useValue:"select"},Dt,ee,Lt]),Pe([ht]),Ee,ke],ngContentSelectors:Jt,decls:3,vars:6,consts:[["selectContainer",""],["menu",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayTransformOriginOn","cdkConnectedOverlayOpen"],[1,"ant-select-selector"],[3,"isComposingChange","valueChange","showInput","value","mirrorSync","disabled","autofocus","focusTrigger"],[3,"placeholder","display"],[3,"deletable","disabled","label","contentTemplateOutlet","contentTemplateOutletContext"],[1,"ant-select-arrow",3,"ant-select-arrow-loading"],[3,"deletable","disabled","label"],[3,"delete","deletable","disabled","label"],[3,"placeholder"],[1,"ant-select-arrow"],[3,"nzType","ant-cascader-picker-arrow-expand"],["nzType","loading"],[3,"status"],[3,"nzType"],[3,"clear"],[1,"ant-select-dropdown","ant-cascader-dropdown",3,"mouseenter","mouseleave","nzNoAnimation"],[1,"ant-cascader-menus"],[1,"ant-cascader-menu",3,"width","height"],[1,"ant-cascader-menu"],[1,"ant-cascader-menu-item","ant-cascader-menu-item-disabled"],[1,"ant-cascader-menu-item-content",3,"nzComponentName","specificContent"],["role","menuitemcheckbox",1,"ant-cascader-menu",3,"class","height"],["role","menuitemcheckbox",1,"ant-cascader-menu"],["nz-cascader-option","",3,"expandIcon","columnIndex","nzLabelProperty","optionTemplate","activated","highlightText","node","dir","checkable"],["nz-cascader-option","",3,"mouseenter","mouseleave","click","check","expandIcon","columnIndex","nzLabelProperty","optionTemplate","activated","highlightText","node","dir","checkable"]],template:function(i,a){i&1&&(Re(),v(0,li,8,11),Be(1),v(2,mi,5,24,"ng-template",2),w("overlayOutsideClick",function(m){return a.onClickOutside(m)})("detach",function(){return a.closeMenu()})("positionChange",function(m){return a.onPositionChange(m)})),i&2&&(_(a.nzShowInput?0:-1),C(2),g("cdkConnectedOverlayHasBackdrop",a.nzBackdrop)("cdkConnectedOverlayOrigin",a.overlayOrigin)("cdkConnectedOverlayPositions",a.positions)("cdkConnectedOverlayTransformOriginOn",".ant-cascader-dropdown")("cdkConnectedOverlayOpen",a.menuVisible))},dependencies:[Ue,tt,X,Ke,ut,ue,pe,zt,gt,Ct,ct,rt,me,_t,St,vt,Ce,Mt],encapsulation:2,data:{animation:[it]},changeDetection:0})}})(),ln=(()=>{class n{static \u0275fac=function(s){return new(s||n)};static \u0275mod=Ae({type:n});static \u0275inj=we({imports:[gi]})}return n})();export{gi as a,ln as b};
