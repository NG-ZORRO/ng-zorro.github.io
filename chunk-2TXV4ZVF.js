import{c as q,d as u}from"./chunk-YECS2PBY.js";import{Bd as Q,Ga as c,Ha as $,Qa as H,V as E,Y as g,ab as m,db as d,ga as W,i as z,j as s,le as T,mc as Z,me as p,na as V,oc as S,sb as R,tb as O,ub as U,xd as b,ze as J}from"./chunk-BKDXVBLI.js";var ie=["imageRef"];function G(t){return typeof t=="number"||/^(\d)+(px)?$/.test(t)}function ne(t){return t[0]==="/"?t.slice(1):t}var B=({src:t})=>t;function I(t){return({src:l,width:n})=>{let a=Q(n)?"":`?x-oss-process=image/resize,w_${n}`;return`${t}/${ne(l)}${a}`}}var K="imageExperimental",re=[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840],f=(()=>{let t,l=[],n=[],a,_=[],w=[],N,C=[],A=[],L,k=[],x=[],M,F=[],j=[];return class y{static{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[p()],a=[p()],N=[p()],L=[p()],M=[p()],z(null,null,t,{kind:"field",name:"nzSrcLoader",static:!1,private:!1,access:{has:e=>"nzSrcLoader"in e,get:e=>e.nzSrcLoader,set:(e,i)=>{e.nzSrcLoader=i}},metadata:r},l,n),z(null,null,a,{kind:"field",name:"nzAutoSrcset",static:!1,private:!1,access:{has:e=>"nzAutoSrcset"in e,get:e=>e.nzAutoSrcset,set:(e,i)=>{e.nzAutoSrcset=i}},metadata:r},_,w),z(null,null,N,{kind:"field",name:"nzFallback",static:!1,private:!1,access:{has:e=>"nzFallback"in e,get:e=>e.nzFallback,set:(e,i)=>{e.nzFallback=i}},metadata:r},C,A),z(null,null,L,{kind:"field",name:"nzPlaceholder",static:!1,private:!1,access:{has:e=>"nzPlaceholder"in e,get:e=>e.nzPlaceholder,set:(e,i)=>{e.nzPlaceholder=i}},metadata:r},k,x),z(null,null,M,{kind:"field",name:"nzDisablePreview",static:!1,private:!1,access:{has:e=>"nzDisablePreview"in e,get:e=>e.nzDisablePreview,set:(e,i)=>{e.nzDisablePreview=i}},metadata:r},F,j),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}cdr=g(Z);imagePreloadService=g(J);destroyRef=g(W);_nzModuleName=K;nzSrc="";nzAlt="";nzWidth="auto";nzHeight="auto";nzSrcLoader=s(this,l,B);nzAutoSrcset=(s(this,n),s(this,_,!1));nzPriority=(s(this,w),!1);nzFallback=s(this,C,null);nzPlaceholder=(s(this,A),s(this,k,null));nzDisablePreview=(s(this,x),s(this,F,!1));imageRef=s(this,j);src="";width="auto";height="auto";srcset="";reloadDisposeHandler=()=>{};constructor(){T(K,()=>{this.composeImageAttrs(),this.cdr.markForCheck()}),this.destroyRef.onDestroy(()=>{this.reloadDisposeHandler()})}ngOnInit(){this.nzPriority&&this.preload()}ngOnChanges(r){let{nzLoader:e,nzSrc:i,nzOptimize:o}=r;(i||e||o)&&this.composeImageAttrs()}preload(){this.reloadDisposeHandler=this.imagePreloadService.addPreload({src:this.src,srcset:this.srcset})}optimizable(){return this.nzAutoSrcset?!G(this.nzWidth)||!G(this.nzHeight)?(b('When using "nzAutoSrcset" you should use a fixed size width and height, for more information please refer to CLS (https://web.dev/cls/) performance metrics'),!1):this.nzSrc.endsWith(".svg")?(b("SVG does not need to be optimized"),!1):this.nzSrc.startsWith("data:")?(b("Data URLs cannot be optimized"),!1):!0:!1}composeImageAttrs(){let r=this.getLoader();if(!this.optimizable()){this.src=r({src:this.nzSrc}),this.width=this.nzWidth,this.height=this.nzHeight;return}this.width=typeof this.nzWidth=="number"?this.nzWidth:parseInt(this.nzWidth,10),this.height=typeof this.nzHeight=="number"?this.nzHeight:parseInt(this.nzHeight,10);let e=this.convertWidths(this.width,re);this.src=r({src:this.nzSrc,width:e[0]}),this.srcset=e.map((i,o)=>`${r({src:this.nzSrc,width:i})} ${o+1}x`).join(", ")}getLoader(){return this.nzSrcLoader||B}convertWidths(r,e){let i=[...e].sort((o,v)=>o-v);return[...new Set([r,r*2].map(o=>i.find(v=>v>=o)||o))]}static \u0275fac=function(e){return new(e||y)};static \u0275cmp=c({type:y,selectors:[["nz-image"]],viewQuery:function(e,i){if(e&1&&R(ie,5),e&2){let o;O(o=U())&&(i.imageRef=o.first)}},inputs:{nzSrc:"nzSrc",nzAlt:"nzAlt",nzWidth:"nzWidth",nzHeight:"nzHeight",nzSrcLoader:"nzSrcLoader",nzAutoSrcset:[2,"nzAutoSrcset","nzAutoSrcset",S],nzPriority:[2,"nzPriority","nzPriority",S],nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzDisablePreview:[2,"nzDisablePreview","nzDisablePreview",S]},exportAs:["nzImage"],features:[V],decls:2,vars:9,consts:[["imageRef",""],["nz-image","",3,"nzSrc","nzSrcset","nzDisablePreview","nzFallback","nzPlaceholder"]],template:function(e,i){e&1&&d(0,"img",1,0),e&2&&(m("nzSrc",i.src)("nzSrcset",i.srcset)("nzDisablePreview",i.nzDisablePreview)("nzFallback",i.nzFallback)("nzPlaceholder",i.nzPlaceholder),H("width",i.width)("height",i.height)("srcset",i.srcset)("alt",i.nzAlt||null))},dependencies:[q],encapsulation:2,changeDetection:0})}})(),h=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=$({type:t});static \u0275inj=E({})}return t})();var X=class t{src="jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png";loader=I("https://zos.alipayobjects.com/rmsportal");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=c({type:t,selectors:[["nz-demo-experimental-image-auto-srcset"]],decls:1,vars:2,consts:[["nzWidth","200","nzHeight","200","nzAutoSrcset","",3,"nzSrc","nzSrcLoader"]],template:function(n,a){n&1&&d(0,"nz-image",0),n&2&&m("nzSrc",a.src)("nzSrcLoader",a.loader)},dependencies:[u,h,f],encapsulation:2})};var ee=class t{src="https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=c({type:t,selectors:[["nz-demo-experimental-image-preloading"]],decls:1,vars:1,consts:[["nzWidth","200","nzHeight","200","nzPriority","",3,"nzSrc"]],template:function(n,a){n&1&&d(0,"nz-image",0),n&2&&m("nzSrc",a.src)},dependencies:[u,h,f],encapsulation:2})};var te=class t{src="jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png";loader=I("https://zos.alipayobjects.com/rmsportal");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=c({type:t,selectors:[["nz-demo-experimental-image-src-loader"]],decls:1,vars:2,consts:[["nzWidth","200","nzHeight","200",3,"nzSrc","nzSrcLoader"]],template:function(n,a){n&1&&d(0,"nz-image",0),n&2&&m("nzSrc",a.src)("nzSrcLoader",a.loader)},dependencies:[u,h,f],encapsulation:2})};export{X as a,ee as b,te as c};
