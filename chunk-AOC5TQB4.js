import{Ua as ee,Va as te,ca as S,lc as m,ra as x,va as M}from"./chunk-KK7CC6GQ.js";import{C as N,E as T,Ja as b,Jb as A,Ka as D,Kb as Z,Lb as F,Oa as y,Sc as $,Wb as U,Yb as O,aa as c,f as v,fc as _,gc as X,ha as P,hc as Y,ia as j,kc as V,ma as W,md as C,na as k,nd as u,rc as q,uc as J,vc as K,wa as G,xb as H,xd as Q,yb as h}from"./chunk-PXCXDVYP.js";import{a as f,b as w}from"./chunk-EQDQRRRY.js";var oe=["*"];function re(i,d){if(i&1&&V(0,"nz-resize-handle",0),i&2){let t=d.$implicit;U("nzDirection",t.direction)("nzCursorType",t.cursorType)}}function ne(i){return S(i)?i.touches[0]||i.changedTouches[0]:i}var I=(()=>{class i{ngZone;document=k(Q);listeners=new Map;handleMouseDownOutsideAngular$=new v;documentMouseUpOutsideAngular$=new v;documentMouseMoveOutsideAngular$=new v;mouseEnteredOutsideAngular$=new v;constructor(t){this.ngZone=t}startResizing(t){let e=S(t);this.clearListeners();let n=e?"touchmove":"mousemove",s=e?"touchend":"mouseup",o=r=>{this.documentMouseMoveOutsideAngular$.next(r)},l=r=>{this.documentMouseUpOutsideAngular$.next(r),this.clearListeners()};this.listeners.set(n,o),this.listeners.set(s,l),this.ngZone.runOutsideAngular(()=>{this.listeners.forEach((r,a)=>{this.document.addEventListener(a,r)})})}clearListeners(){this.listeners.forEach((t,e)=>{this.document.removeEventListener(e,t)}),this.listeners.clear()}ngOnDestroy(){this.handleMouseDownOutsideAngular$.complete(),this.documentMouseUpOutsideAngular$.complete(),this.documentMouseMoveOutsideAngular$.complete(),this.mouseEnteredOutsideAngular$.complete(),this.clearListeners()}static \u0275fac=function(e){return new(e||i)(W(D))};static \u0275prov=P({token:i,factory:i.\u0275fac})}return i})(),He=(()=>{class i{elementRef;renderer;nzResizableService;platform;ngZone;destroy$;nzBounds="parent";nzMaxHeight;nzMaxWidth;nzMinHeight=40;nzMinWidth=40;nzGridColumnCount=-1;nzMaxColumn=-1;nzMinColumn=-1;nzLockAspectRatio=!1;nzPreview=!1;nzDisabled=!1;nzResize=new b;nzResizeEnd=new b;nzResizeStart=new b;resizing=!1;elRect;currentHandleEvent=null;ghostElement=null;el;sizeCache=null;constructor(t,e,n,s,o,l){this.elementRef=t,this.renderer=e,this.nzResizableService=n,this.platform=s,this.ngZone=o,this.destroy$=l,this.nzResizableService.handleMouseDownOutsideAngular$.pipe(c(this.destroy$)).subscribe(r=>{this.nzDisabled||(this.resizing=!0,this.nzResizableService.startResizing(r.mouseEvent),this.currentHandleEvent=r,this.nzResizeStart.observers.length&&this.ngZone.run(()=>this.nzResizeStart.emit({mouseEvent:r.mouseEvent,direction:r.direction})),this.elRect=this.el.getBoundingClientRect())}),this.nzResizableService.documentMouseUpOutsideAngular$.pipe(c(this.destroy$),T(Boolean)).subscribe(r=>{this.resizing&&(this.resizing=!1,this.nzResizableService.documentMouseUpOutsideAngular$.next(null),this.endResize(r))}),this.nzResizableService.documentMouseMoveOutsideAngular$.pipe(c(this.destroy$)).subscribe(r=>{this.resizing&&this.resize(r)})}setPosition(){let t=getComputedStyle(this.el).position;(t==="static"||!t)&&this.renderer.setStyle(this.el,"position","relative")}calcSize(t,e,n){let s,o,l,r,a=0,p=0,z=this.nzMinWidth,R=1/0,E=1/0;if(this.nzBounds==="parent"){let g=this.renderer.parentNode(this.el);if(g instanceof HTMLElement){let B=g.getBoundingClientRect();R=B.width,E=B.height}}else if(this.nzBounds==="window")typeof window<"u"&&(R=window.innerWidth,E=window.innerHeight);else if(this.nzBounds&&this.nzBounds.nativeElement&&this.nzBounds.nativeElement instanceof HTMLElement){let g=this.nzBounds.nativeElement.getBoundingClientRect();R=g.width,E=g.height}return l=x(this.nzMaxWidth,R),r=x(this.nzMaxHeight,E),this.nzGridColumnCount!==-1&&(p=l/this.nzGridColumnCount,z=this.nzMinColumn!==-1?p*this.nzMinColumn:z,l=this.nzMaxColumn!==-1?p*this.nzMaxColumn:l),n!==-1?/(left|right)/i.test(this.currentHandleEvent.direction)?(s=Math.min(Math.max(t,z),l),o=Math.min(Math.max(s/n,this.nzMinHeight),r),(o>=r||o<=this.nzMinHeight)&&(s=Math.min(Math.max(o*n,z),l))):(o=Math.min(Math.max(e,this.nzMinHeight),r),s=Math.min(Math.max(o*n,z),l),(s>=l||s<=z)&&(o=Math.min(Math.max(s/n,this.nzMinHeight),r))):(s=Math.min(Math.max(t,z),l),o=Math.min(Math.max(e,this.nzMinHeight),r)),this.nzGridColumnCount!==-1&&(a=Math.round(s/p),s=a*p),{col:a,width:s,height:o}}resize(t){let e=this.elRect,n=ne(t),s=ne(this.currentHandleEvent.mouseEvent),o=e.width,l=e.height,r=this.nzLockAspectRatio?o/l:-1;switch(this.currentHandleEvent.direction){case"bottomRight":o=n.clientX-e.left,l=n.clientY-e.top;break;case"bottomLeft":o=e.width+s.clientX-n.clientX,l=n.clientY-e.top;break;case"topRight":o=n.clientX-e.left,l=e.height+s.clientY-n.clientY;break;case"topLeft":o=e.width+s.clientX-n.clientX,l=e.height+s.clientY-n.clientY;break;case"top":l=e.height+s.clientY-n.clientY;break;case"right":o=n.clientX-e.left;break;case"bottom":l=n.clientY-e.top;break;case"left":o=e.width+s.clientX-n.clientX}let a=this.calcSize(o,l,r);this.sizeCache=f({},a),this.nzResize.observers.length&&this.ngZone.run(()=>{this.nzResize.emit(w(f({},a),{mouseEvent:t,direction:this.currentHandleEvent.direction}))}),this.nzPreview&&this.previewResize(a)}endResize(t){this.removeGhostElement();let e=this.sizeCache?f({},this.sizeCache):{width:this.elRect.width,height:this.elRect.height};this.nzResizeEnd.observers.length&&this.ngZone.run(()=>{this.nzResizeEnd.emit(w(f({},e),{mouseEvent:t,direction:this.currentHandleEvent.direction}))}),this.sizeCache=null,this.currentHandleEvent=null}previewResize({width:t,height:e}){this.createGhostElement(),this.renderer.setStyle(this.ghostElement,"width",`${t}px`),this.renderer.setStyle(this.ghostElement,"height",`${e}px`)}createGhostElement(){this.ghostElement||(this.ghostElement=this.renderer.createElement("div"),this.renderer.setAttribute(this.ghostElement,"class","nz-resizable-preview")),this.renderer.appendChild(this.el,this.ghostElement)}removeGhostElement(){this.ghostElement&&this.renderer.removeChild(this.el,this.ghostElement)}ngAfterViewInit(){this.platform.isBrowser&&(this.el=this.elementRef.nativeElement,this.setPosition(),M(this.el,"mouseenter").pipe(c(this.destroy$)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!0)}),M(this.el,"mouseleave").pipe(c(this.destroy$)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!1)}))}ngOnDestroy(){this.ghostElement=null,this.sizeCache=null}static \u0275fac=function(e){return new(e||i)(h(y),h(H),h(I),h(ee),h(D),h(m))};static \u0275dir=F({type:i,selectors:[["","nz-resizable",""]],hostAttrs:[1,"nz-resizable"],hostVars:4,hostBindings:function(e,n){e&2&&O("nz-resizable-resizing",n.resizing)("nz-resizable-disabled",n.nzDisabled)},inputs:{nzBounds:"nzBounds",nzMaxHeight:"nzMaxHeight",nzMaxWidth:"nzMaxWidth",nzMinHeight:[2,"nzMinHeight","nzMinHeight",u],nzMinWidth:[2,"nzMinWidth","nzMinWidth",u],nzGridColumnCount:[2,"nzGridColumnCount","nzGridColumnCount",u],nzMaxColumn:[2,"nzMaxColumn","nzMaxColumn",u],nzMinColumn:[2,"nzMinColumn","nzMinColumn",u],nzLockAspectRatio:[2,"nzLockAspectRatio","nzLockAspectRatio",C],nzPreview:[2,"nzPreview","nzPreview",C],nzDisabled:[2,"nzDisabled","nzDisabled",C]},outputs:{nzResize:"nzResize",nzResizeEnd:"nzResizeEnd",nzResizeStart:"nzResizeStart"},exportAs:["nzResizable"],features:[$([I,m])]})}return i})(),L=class{direction;mouseEvent;constructor(d,t){this.direction=d,this.mouseEvent=t}},ie=te({passive:!0}),le=(()=>{class i{nzResizableService;renderer;host;destroy$;nzDirection="bottomRight";nzCursorType="window";nzMouseDown=new b;constructor(t,e,n,s){this.nzResizableService=t,this.renderer=e,this.host=n,this.destroy$=s}ngOnInit(){this.nzResizableService.mouseEnteredOutsideAngular$.pipe(c(this.destroy$)).subscribe(t=>{t?this.renderer.addClass(this.host.nativeElement,"nz-resizable-handle-box-hover"):this.renderer.removeClass(this.host.nativeElement,"nz-resizable-handle-box-hover")}),N(M(this.host.nativeElement,"mousedown",ie),M(this.host.nativeElement,"touchstart",ie)).pipe(c(this.destroy$)).subscribe(t=>{this.nzResizableService.handleMouseDownOutsideAngular$.next(new L(this.nzDirection,t))})}onPointerDown(t){t.target.setPointerCapture(t.pointerId)}onPointerUp(t){t.target.releasePointerCapture(t.pointerId)}static \u0275fac=function(e){return new(e||i)(h(I),h(H),h(y),h(m))};static \u0275cmp=A({type:i,selectors:[["nz-resize-handle"],["","nz-resize-handle",""]],hostAttrs:[1,"nz-resizable-handle"],hostVars:20,hostBindings:function(e,n){e&1&&q("pointerdown",function(o){return n.onPointerDown(o)})("pointerup",function(o){return n.onPointerUp(o)}),e&2&&O("nz-resizable-handle-top",n.nzDirection==="top")("nz-resizable-handle-right",n.nzDirection==="right")("nz-resizable-handle-bottom",n.nzDirection==="bottom")("nz-resizable-handle-left",n.nzDirection==="left")("nz-resizable-handle-topRight",n.nzDirection==="topRight")("nz-resizable-handle-bottomRight",n.nzDirection==="bottomRight")("nz-resizable-handle-bottomLeft",n.nzDirection==="bottomLeft")("nz-resizable-handle-topLeft",n.nzDirection==="topLeft")("nz-resizable-handle-cursor-type-grid",n.nzCursorType==="grid")("nz-resizable-handle-cursor-type-window",n.nzCursorType==="window")},inputs:{nzDirection:"nzDirection",nzCursorType:"nzCursorType"},outputs:{nzMouseDown:"nzMouseDown"},exportAs:["nzResizeHandle"],features:[$([m])],ngContentSelectors:oe,decls:1,vars:0,template:function(e,n){e&1&&(J(),K(0))},encapsulation:2,changeDetection:0})}return i})(),he=["bottomRight","topRight","bottomLeft","topLeft","bottom","right","top","left"];function se(i){return i.map(d=>typeof d=="string"?{direction:d,cursorType:"window"}:d)}var Ae=(()=>{class i{nzDirections=he;resizeHandleOptions=se(this.nzDirections);ngOnChanges(t){t.nzDirections&&(this.resizeHandleOptions=se(t.nzDirections.currentValue))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=A({type:i,selectors:[["nz-resize-handles"]],inputs:{nzDirections:"nzDirections"},exportAs:["nzResizeHandles"],features:[G],decls:2,vars:0,consts:[[3,"nzDirection","nzCursorType"]],template:function(e,n){e&1&&X(0,re,1,2,"nz-resize-handle",0,_),e&2&&Y(n.resizeHandleOptions)},dependencies:[le],encapsulation:2,changeDetection:0})}return i})(),Oe=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=Z({type:i});static \u0275inj=j({})}return i})();export{ne as a,He as b,le as c,Ae as d,Oe as e};
