"use strict";(self.webpackChunkng_zorro_antd_doc=self.webpackChunkng_zorro_antd_doc||[]).push([[6657],{6657:(le,k,r)=>{r.d(k,{FY:()=>se,cS:()=>oe});var B=r(2840),O=r(3144),t=r(2223),w=r(9646),y=r(9751),U=r(727),L=r(7579),M=r(4968),I=r(3900),E=r(4004),$=r(8505),C=r(2722),W=r(9300),F=r(9289),x=r(1591),h=r(4755),b=r(2966),P=r(2647),A=r(6844),N=r(3424),S=r(4265),Z=r(6447),T=r(7582),z=r(1724),Y=r(9001),R=r(8930),K=r(9401);const j=["file"],H=["nz-upload-btn",""],Q=["*"];function G(n,l){}const D=function(n){return{$implicit:n}};function q(n,l){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,G,0,0,"ng-template",19),t.qZA()),2&n){const s=t.oxw(2).$implicit,e=t.MAs(5);t.ekj("ant-upload-list-item-file",!s.isUploading),t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.VKq(4,D,s))}}function V(n,l){if(1&n&&t._UZ(0,"img",22),2&n){const s=t.oxw(3).$implicit;t.Q6J("src",s.thumbUrl||s.url,t.LSH),t.uIk("alt",s.name)}}function X(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"a",20),t.NdJ("click",function(i){t.CHM(s);const o=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePreview(o,i))}),t.YNc(1,V,1,2,"img",21),t.qZA()}if(2&n){t.oxw();const s=t.MAs(5),e=t.oxw().$implicit;t.ekj("ant-upload-list-item-file",!e.isImageUrl),t.Q6J("href",e.url||e.thumbUrl,t.LSH),t.xp6(1),t.Q6J("ngIf",e.isImageUrl)("ngIfElse",s)}}function tt(n,l){}function et(n,l){if(1&n&&(t.TgZ(0,"div",23),t.YNc(1,tt,0,0,"ng-template",19),t.qZA()),2&n){const s=t.oxw(2).$implicit,e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.VKq(2,D,s))}}function nt(n,l){}function it(n,l){if(1&n&&t.YNc(0,nt,0,0,"ng-template",19),2&n){const s=t.oxw(2).$implicit,e=t.MAs(5);t.Q6J("ngTemplateOutlet",e)("ngTemplateOutletContext",t.VKq(2,D,s))}}function st(n,l){if(1&n&&(t.ynx(0,13),t.YNc(1,q,2,6,"div",14),t.YNc(2,X,2,5,"a",15),t.YNc(3,et,2,4,"div",16),t.BQk(),t.YNc(4,it,1,4,"ng-template",null,17,t.W1O)),2&n){const s=t.oxw().$implicit;t.Q6J("ngSwitch",s.iconType),t.xp6(1),t.Q6J("ngSwitchCase","uploading"),t.xp6(1),t.Q6J("ngSwitchCase","thumbnail")}}function ot(n,l){1&n&&(t.ynx(0),t._UZ(1,"span",29),t.BQk())}function lt(n,l){if(1&n&&(t.ynx(0),t.YNc(1,ot,2,0,"ng-container",24),t.BQk()),2&n){const s=t.oxw(2).$implicit,e=t.MAs(4);t.xp6(1),t.Q6J("ngIf",s.isUploading)("ngIfElse",e)}}function at(n,l){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const s=t.oxw(5);t.xp6(1),t.hij(" ",s.locale.uploading," ")}}function rt(n,l){if(1&n&&(t.ynx(0),t.YNc(1,at,2,1,"ng-container",24),t.BQk()),2&n){const s=t.oxw(2).$implicit,e=t.MAs(4);t.xp6(1),t.Q6J("ngIf",s.isUploading)("ngIfElse",e)}}function ct(n,l){if(1&n&&t._UZ(0,"span",30),2&n){const s=t.oxw(2).$implicit;t.Q6J("nzType",s.isUploading?"loading":"paper-clip")}}function _t(n,l){if(1&n&&(t.ynx(0)(1,13),t.YNc(2,lt,2,2,"ng-container",27),t.YNc(3,rt,2,2,"ng-container",27),t.YNc(4,ct,1,1,"span",28),t.BQk()()),2&n){const s=t.oxw(3);t.xp6(1),t.Q6J("ngSwitch",s.listType),t.xp6(1),t.Q6J("ngSwitchCase","picture"),t.xp6(1),t.Q6J("ngSwitchCase","picture-card")}}function pt(n,l){}function dt(n,l){if(1&n&&t._UZ(0,"span",31),2&n){const s=t.oxw().$implicit;t.Q6J("nzType",s.isImageUrl?"picture":"file")}}function ut(n,l){if(1&n&&(t.YNc(0,_t,5,3,"ng-container",24),t.YNc(1,pt,0,0,"ng-template",19,25,t.W1O),t.YNc(3,dt,1,1,"ng-template",null,26,t.W1O)),2&n){const s=l.$implicit,e=t.MAs(2),i=t.oxw(2);t.Q6J("ngIf",!i.iconRender)("ngIfElse",e),t.xp6(1),t.Q6J("ngTemplateOutlet",i.iconRender)("ngTemplateOutletContext",t.VKq(4,D,s))}}function mt(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(i){t.CHM(s);const o=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleRemove(o,i))}),t._UZ(1,"span",34),t.qZA()}if(2&n){const s=t.oxw(3);t.uIk("title",s.locale.removeFile)}}function gt(n,l){if(1&n&&t.YNc(0,mt,2,1,"button",32),2&n){const s=t.oxw(2);t.Q6J("ngIf",s.icons.showRemoveIcon)}}function ht(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(s);const i=t.oxw(2).$implicit,o=t.oxw();return t.KtG(o.handleDownload(i))}),t._UZ(1,"span",35),t.qZA()}if(2&n){const s=t.oxw(3);t.uIk("title",s.locale.downloadFile)}}function ft(n,l){if(1&n&&t.YNc(0,ht,2,1,"button",32),2&n){const s=t.oxw().$implicit;t.Q6J("ngIf",s.showDownload)}}function zt(n,l){}function xt(n,l){}function Tt(n,l){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,zt,0,0,"ng-template",10),t.YNc(2,xt,0,0,"ng-template",10),t.qZA()),2&n){t.oxw(2);const s=t.MAs(9),e=t.MAs(7),i=t.oxw();t.Gre("ant-upload-list-item-card-actions ","picture"===i.listType?"picture":"",""),t.xp6(1),t.Q6J("ngTemplateOutlet",s),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function vt(n,l){if(1&n&&t.YNc(0,Tt,3,5,"span",36),2&n){const s=t.oxw(2);t.Q6J("ngIf","picture-card"!==s.listType)}}function yt(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"a",39),t.NdJ("click",function(i){t.CHM(s);const o=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePreview(o,i))}),t._uU(1),t.qZA()}if(2&n){const s=t.oxw(2).$implicit;t.Q6J("href",s.url,t.LSH),t.uIk("title",s.name)("download",s.linkProps&&s.linkProps.download),t.xp6(1),t.hij(" ",s.name," ")}}function wt(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"span",40),t.NdJ("click",function(i){t.CHM(s);const o=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePreview(o,i))}),t._uU(1),t.qZA()}if(2&n){const s=t.oxw(2).$implicit;t.uIk("title",s.name),t.xp6(1),t.hij(" ",s.name," ")}}function Ct(n,l){}function Ot(n,l){if(1&n&&(t.YNc(0,yt,2,4,"a",37),t.YNc(1,wt,2,2,"span",38),t.YNc(2,Ct,0,0,"ng-template",10)),2&n){const s=t.oxw().$implicit,e=t.MAs(11);t.Q6J("ngIf",s.url),t.xp6(1),t.Q6J("ngIf",!s.url),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function It(n,l){}function Dt(n,l){}const Mt=function(){return{opacity:.5,"pointer-events":"none"}};function Et(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(i){t.CHM(s);const o=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePreview(o,i))}),t._UZ(1,"span",45),t.qZA()}if(2&n){const s=t.oxw(2).$implicit,e=t.oxw();t.Q6J("href",s.url||s.thumbUrl,t.LSH)("ngStyle",s.url||s.thumbUrl?null:t.DdM(3,Mt)),t.uIk("title",e.locale.previewFile)}}function Lt(n,l){}function Ft(n,l){if(1&n&&(t.ynx(0),t.YNc(1,Lt,0,0,"ng-template",10),t.BQk()),2&n){t.oxw(2);const s=t.MAs(9);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Rt(n,l){}function Ut(n,l){if(1&n&&(t.TgZ(0,"span",41),t.YNc(1,Et,2,4,"a",42),t.YNc(2,Ft,2,1,"ng-container",43),t.YNc(3,Rt,0,0,"ng-template",10),t.qZA()),2&n){const s=t.oxw().$implicit,e=t.MAs(7),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.icons.showPreviewIcon),t.xp6(1),t.Q6J("ngIf","done"===s.status),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function bt(n,l){if(1&n&&(t.TgZ(0,"div",46),t._UZ(1,"nz-progress",47),t.qZA()),2&n){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("nzPercent",s.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function Pt(n,l){if(1&n&&(t.TgZ(0,"div")(1,"div",1),t.YNc(2,st,6,3,"ng-template",null,2,t.W1O),t.YNc(4,ut,5,6,"ng-template",null,3,t.W1O),t.YNc(6,gt,1,1,"ng-template",null,4,t.W1O),t.YNc(8,ft,1,1,"ng-template",null,5,t.W1O),t.YNc(10,vt,1,1,"ng-template",null,6,t.W1O),t.YNc(12,Ot,3,3,"ng-template",null,7,t.W1O),t.TgZ(14,"div",8)(15,"span",9),t.YNc(16,It,0,0,"ng-template",10),t.YNc(17,Dt,0,0,"ng-template",10),t.qZA()(),t.YNc(18,Ut,4,3,"span",11),t.YNc(19,bt,2,3,"div",12),t.qZA()()),2&n){const s=l.$implicit,e=t.MAs(3),i=t.MAs(13),o=t.oxw();t.Gre("ant-upload-list-",o.listType,"-container"),t.xp6(1),t.MT6("ant-upload-list-item ant-upload-list-item-",s.status," ant-upload-list-item-list-type-",o.listType,""),t.Q6J("@itemState",void 0)("nzTooltipTitle","error"===s.status?s.message:null),t.uIk("data-key",s.key),t.xp6(15),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngIf","picture-card"===o.listType&&!s.isUploading),t.xp6(1),t.Q6J("ngIf",s.isUploading)}}const At=["uploadComp"],Nt=["listComp"],St=function(){return[]};function Yt(n,l){if(1&n&&t._UZ(0,"nz-upload-list",8,9),2&n){const s=t.oxw(2);t.Udp("display",s.nzShowUploadList?"":"none"),t.Q6J("locale",s.locale)("listType",s.nzListType)("items",s.nzFileList||t.DdM(13,St))("icons",s.nzShowUploadList)("iconRender",s.nzIconRender)("previewFile",s.nzPreviewFile)("previewIsImage",s.nzPreviewIsImage)("onPreview",s.nzPreview)("onRemove",s.onRemove)("onDownload",s.nzDownload)("dir",s.dir)}}function Qt(n,l){1&n&&t.GkF(0)}function Jt(n,l){if(1&n&&(t.ynx(0),t.YNc(1,Qt,1,0,"ng-container",10),t.BQk()),2&n){const s=t.oxw(2);t.xp6(1),t.Q6J("ngTemplateOutlet",s.nzFileListRender)("ngTemplateOutletContext",t.VKq(2,D,s.nzFileList))}}function kt(n,l){if(1&n&&(t.YNc(0,Yt,2,14,"nz-upload-list",6),t.YNc(1,Jt,2,4,"ng-container",7)),2&n){const s=t.oxw();t.Q6J("ngIf",s.locale&&!s.nzFileListRender),t.xp6(1),t.Q6J("ngIf",s.nzFileListRender)}}function Bt(n,l){1&n&&t.Hsn(0)}function $t(n,l){}function Wt(n,l){if(1&n&&(t.TgZ(0,"div",11)(1,"div",12,13),t.YNc(3,$t,0,0,"ng-template",14),t.qZA()()),2&n){const s=t.oxw(),e=t.MAs(3);t.Udp("display",s.nzShowButton?"":"none"),t.Q6J("ngClass",s.classList),t.xp6(1),t.Q6J("options",s._btnOptions),t.xp6(2),t.Q6J("ngTemplateOutlet",e)}}function Zt(n,l){}function Kt(n,l){}function jt(n,l){if(1&n){const s=t.EpF();t.ynx(0),t.TgZ(1,"div",15),t.NdJ("drop",function(i){t.CHM(s);const o=t.oxw();return t.KtG(o.fileDrop(i))})("dragover",function(i){t.CHM(s);const o=t.oxw();return t.KtG(o.fileDrop(i))})("dragleave",function(i){t.CHM(s);const o=t.oxw();return t.KtG(o.fileDrop(i))}),t.TgZ(2,"div",16,13)(4,"div",17),t.YNc(5,Zt,0,0,"ng-template",14),t.qZA()()(),t.YNc(6,Kt,0,0,"ng-template",14),t.BQk()}if(2&n){const s=t.oxw(),e=t.MAs(3),i=t.MAs(1);t.xp6(1),t.Q6J("ngClass",s.classList),t.xp6(1),t.Q6J("options",s._btnOptions),t.xp6(3),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Ht(n,l){}function Gt(n,l){}function qt(n,l){if(1&n&&(t.ynx(0),t.YNc(1,Ht,0,0,"ng-template",14),t.YNc(2,Gt,0,0,"ng-template",14),t.BQk()),2&n){t.oxw(2);const s=t.MAs(1),e=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",s),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Vt(n,l){if(1&n&&t.YNc(0,qt,3,2,"ng-container",3),2&n){const s=t.oxw(),e=t.MAs(10);t.Q6J("ngIf","picture-card"===s.nzListType)("ngIfElse",e)}}function Xt(n,l){}function te(n,l){}function ee(n,l){if(1&n&&(t.YNc(0,Xt,0,0,"ng-template",14),t.YNc(1,te,0,0,"ng-template",14)),2&n){t.oxw();const s=t.MAs(5),e=t.MAs(1);t.Q6J("ngTemplateOutlet",s),t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}let ne=(()=>{var n;class l{onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(e){if(this.options.disabled||"dragover"===e.type)e.preventDefault();else{if(this.options.directory)this.traverseFileTree(e.dataTransfer.items);else{const i=Array.prototype.slice.call(e.dataTransfer.files).filter(o=>this.attrAccept(o,this.options.accept));i.length&&this.uploadFiles(i)}e.preventDefault()}}onChange(e){if(this.options.disabled)return;const i=e.target;this.uploadFiles(i.files),i.value=""}traverseFileTree(e){const i=(o,a)=>{o.isFile?o.file(u=>{this.attrAccept(u,this.options.accept)&&this.uploadFiles([u])}):o.isDirectory&&o.createReader().readEntries(c=>{for(const p of c)i(p,`${a}${o.name}/`)})};for(const o of e)i(o.webkitGetAsEntry(),"")}attrAccept(e,i){if(e&&i){const o=Array.isArray(i)?i:i.split(","),a=`${e.name}`,u=`${e.type}`,c=u.replace(/\/.*$/,"");return o.some(p=>{const d=p.trim();return"."===d.charAt(0)?-1!==a.toLowerCase().indexOf(d.toLowerCase(),a.toLowerCase().length-d.toLowerCase().length):/\/\*$/.test(d)?c===d.replace(/\/.*$/,""):u===d})}return!0}attachUid(e){return e.uid||(e.uid=Math.random().toString(36).substring(2)),e}uploadFiles(e){let i=(0,w.of)(Array.prototype.slice.call(e));this.options.filters&&this.options.filters.forEach(o=>{i=i.pipe((0,I.w)(a=>{const u=o.fn(a);return u instanceof y.y?u:(0,w.of)(u)}))}),i.subscribe(o=>{o.forEach(a=>{this.attachUid(a),this.upload(a,o)})},o=>{(0,F.ZK)("Unhandled upload filter error",o)})}upload(e,i){if(!this.options.beforeUpload)return this.post(e);const o=this.options.beforeUpload(e,i);if(o instanceof y.y)o.subscribe(a=>{const u=Object.prototype.toString.call(a);"[object File]"===u||"[object Blob]"===u?(this.attachUid(a),this.post(a)):"boolean"==typeof a&&!1!==a&&this.post(e)},a=>{(0,F.ZK)("Unhandled upload beforeUpload error",a)});else if(!1!==o)return this.post(e)}post(e){if(this.destroy)return;let o,i=(0,w.of)(e);const a=this.options,{uid:u}=e,{action:c,data:p,headers:d,transformFile:m}=a,f={action:"string"==typeof c?c:"",name:a.name,headers:d,file:e,postFile:e,data:p,withCredentials:a.withCredentials,onProgress:a.onProgress?_=>{a.onProgress(_,e)}:void 0,onSuccess:(_,g)=>{this.clean(u),a.onSuccess(_,e,g)},onError:_=>{this.clean(u),a.onError(_,e)}};if("function"==typeof c){const _=c(e);_ instanceof y.y?i=i.pipe((0,I.w)(()=>_),(0,E.U)(g=>(f.action=g,e))):f.action=_}if("function"==typeof m){const _=m(e);i=i.pipe((0,I.w)(()=>_ instanceof y.y?_:(0,w.of)(_)),(0,$.b)(g=>o=g))}if("function"==typeof p){const _=p(e);_ instanceof y.y?i=i.pipe((0,I.w)(()=>_),(0,E.U)(g=>(f.data=g,o??e))):f.data=_}if("function"==typeof d){const _=d(e);_ instanceof y.y?i=i.pipe((0,I.w)(()=>_),(0,E.U)(g=>(f.headers=g,o??e))):f.headers=_}i.subscribe(_=>{f.postFile=_;const g=(a.customRequest||this.xhr).call(this,f);g instanceof U.w0||(0,F.ZK)("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[u]=g,a.onStart(e)})}xhr(e){const i=new FormData;e.data&&Object.keys(e.data).map(a=>{i.append(a,e.data[a])}),i.append(e.name,e.postFile),e.headers||(e.headers={}),null!==e.headers["X-Requested-With"]?e.headers["X-Requested-With"]="XMLHttpRequest":delete e.headers["X-Requested-With"];const o=new O.aW("POST",e.action,i,{reportProgress:!0,withCredentials:e.withCredentials,headers:new O.WM(e.headers)});return this.http.request(o).subscribe(a=>{a.type===O.dt.UploadProgress?(a.total>0&&(a.percent=a.loaded/a.total*100),e.onProgress(a,e.file)):a instanceof O.Zn&&e.onSuccess(a.body,e.file,a)},a=>{this.abort(e.file),e.onError(a,e.file)})}clean(e){const i=this.reqs[e];i instanceof U.w0&&i.unsubscribe(),delete this.reqs[e]}abort(e){e?this.clean(e&&e.uid):Object.keys(this.reqs).forEach(i=>this.clean(i))}constructor(e,i,o){if(this.ngZone=e,this.http=i,this.elementRef=o,this.reqs={},this.destroy=!1,this.destroy$=new L.x,!i)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,M.R)(this.elementRef.nativeElement,"click").pipe((0,C.R)(this.destroy$)).subscribe(()=>this.onClick()),(0,M.R)(this.elementRef.nativeElement,"keydown").pipe((0,C.R)(this.destroy$)).subscribe(e=>{this.options.disabled||("Enter"===e.key||e.keyCode===B.K5)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(t.R0b),t.Y36(O.eN,8),t.Y36(t.SBq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","nz-upload-btn",""]],viewQuery:function(e,i){if(1&e&&t.Gf(j,7),2&e){let o;t.iGM(o=t.CRH())&&(i.file=o.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(e,i){1&e&&t.NdJ("drop",function(a){return i.onFileDrop(a)})("dragover",function(a){return i.onFileDrop(a)}),2&e&&(t.uIk("tabindex","0")("role","button"),t.ekj("ant-upload-disabled",i.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],attrs:H,ngContentSelectors:Q,decls:3,vars:4,consts:[["type","file",2,"display","none",3,"multiple","change"],["file",""]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"input",0,1),t.NdJ("change",function(a){return i.onChange(a)}),t.qZA(),t.Hsn(2)),2&e&&(t.Q6J("multiple",i.options.multiple),t.uIk("accept",i.options.accept)("directory",i.options.directory?"directory":null)("webkitdirectory",i.options.directory?"webkitdirectory":null))},encapsulation:2}),l})();const J=n=>!!n&&0===n.indexOf("image/"),v=200;let ie=(()=>{var n;class l{get showPic(){return"picture"===this.listType||"picture-card"===this.listType}set items(e){this.list=e}genErr(e){return e.response&&"string"==typeof e.response?e.response:e.error&&e.error.statusText||this.locale.uploadError}extname(e){const i=e.split("/"),a=i[i.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(a)||[""])[0]}isImageUrl(e){if(J(e.type))return!0;const i=e.thumbUrl||e.url||"";if(!i)return!1;const o=this.extname(i);return!(!/^data:image\//.test(i)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(o))||!/^data:/.test(i)&&!o}getIconType(e){return this.showPic?e.isUploading||!e.thumbUrl&&!e.url?"uploading":"thumbnail":""}previewImage(e){if(!J(e.type)||!this.platform.isBrowser)return(0,w.of)("");const i=this.doc.createElement("canvas");i.width=v,i.height=v,i.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",this.doc.body.appendChild(i);const o=i.getContext("2d"),a=new Image,u=URL.createObjectURL(e);return a.src=u,(0,M.R)(a,"load").pipe((0,E.U)(()=>{const{width:c,height:p}=a;let d=v,m=v,f=0,_=0;c<p?(m=p*(v/c),_=-(m-d)/2):(d=c*(v/p),f=-(d-m)/2);try{o.drawImage(a,f,_,d,m)}catch{}const g=i.toDataURL();return this.doc.body.removeChild(i),URL.revokeObjectURL(u),g}))}genThumb(){if(!this.platform.isBrowser)return;const e=window;!this.showPic||typeof document>"u"||typeof e>"u"||!e.FileReader||!e.File||this.list.filter(i=>i.originFileObj instanceof File&&void 0===i.thumbUrl).forEach(i=>{i.thumbUrl="";const o=(this.previewFile?this.previewFile(i):this.previewImage(i.originFileObj)).pipe((0,C.R)(this.destroy$));this.ngZone.runOutsideAngular(()=>{o.subscribe(a=>{this.ngZone.run(()=>{i.thumbUrl=a,this.detectChanges()})})})})}showDownload(e){return!(!this.icons.showDownloadIcon||"done"!==e.status)}fixData(){this.list.forEach(e=>{e.isUploading="uploading"===e.status,e.message=this.genErr(e),e.linkProps="string"==typeof e.linkProps?JSON.parse(e.linkProps):e.linkProps,e.isImageUrl=this.previewIsImage?this.previewIsImage(e):this.isImageUrl(e),e.iconType=this.getIconType(e),e.showDownload=this.showDownload(e)})}handlePreview(e,i){if(this.onPreview)return i.preventDefault(),this.onPreview(e)}handleRemove(e,i){i.preventDefault(),this.onRemove&&this.onRemove(e)}handleDownload(e){"function"==typeof this.onDownload?this.onDownload(e):e.url&&window.open(e.url)}constructor(e,i,o,a){this.cdr=e,this.doc=i,this.ngZone=o,this.platform=a,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.destroy$=new L.x}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(h.K0),t.Y36(t.R0b),t.Y36(b.t4))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(e,i){2&e&&t.ekj("ant-upload-list-rtl","rtl"===i.dir)("ant-upload-list-text","text"===i.listType)("ant-upload-list-picture","picture"===i.listType)("ant-upload-list-picture-card","picture-card"===i.listType)},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],features:[t.TTD],decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle"],["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],["class","ant-upload-list-item-actions",4,"ngIf"],["class","ant-upload-list-item-progress",4,"ngIf"],[3,"ngSwitch"],["class","ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file",4,"ngSwitchCase"],["class","ant-upload-list-item-thumbnail","target","_blank","rel","noopener noreferrer",3,"ant-upload-list-item-file","href","click",4,"ngSwitchCase"],["class","ant-upload-text-icon",4,"ngSwitchDefault"],["noImageThumbTpl",""],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"href","click"],["class","ant-upload-list-item-image",3,"src",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],[4,"ngIf","ngIfElse"],["customIconRender",""],["iconNodeFileIcon",""],[4,"ngSwitchCase"],["nz-icon","",3,"nzType",4,"ngSwitchDefault"],["nz-icon","","nzType","loading"],["nz-icon","",3,"nzType"],["nz-icon","","nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small","class","ant-upload-list-item-card-actions-btn",3,"click",4,"ngIf"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],[3,"class",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","ant-upload-list-item-name",3,"href","click",4,"ngIf"],["class","ant-upload-list-item-name",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href","click"],[1,"ant-upload-list-item-name",3,"click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click",4,"ngIf"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click"],["nz-icon","","nzType","eye"],[1,"ant-upload-list-item-progress"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(e,i){1&e&&t.YNc(0,Pt,20,14,"div",0),2&e&&t.Q6J("ngForOf",i.list)},dependencies:[h.sg,h.O5,h.tP,h.PC,h.RF,h.n9,h.ED,P.SY,A.M,N.Ls,S.ix,Z.w],encapsulation:2,data:{animation:[(0,x.X$)("itemState",[(0,x.eR)(":enter",[(0,x.oB)({height:"0",width:"0",opacity:0}),(0,x.jt)(150,(0,x.oB)({height:"*",width:"*",opacity:1}))]),(0,x.eR)(":leave",[(0,x.jt)(150,(0,x.oB)({height:"0",width:"0",opacity:0}))])])]},changeDetection:0}),l})(),se=(()=>{var n;class l{set nzShowUploadList(e){this._showUploadList="boolean"==typeof e?(0,z.sw)(e):e}get nzShowUploadList(){return this._showUploadList}zipOptions(){"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});const e=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===e.findIndex(i=>"limit"===i.name)&&e.push({name:"limit",fn:i=>i.slice(-this.nzLimit)}),this.nzSize>0&&-1===e.findIndex(i=>"size"===i.name)&&e.push({name:"size",fn:i=>i.filter(o=>o.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&-1===e.findIndex(i=>"type"===i.name)){const i=this.nzFileType.split(",");e.push({name:"type",fn:o=>o.filter(a=>~i.indexOf(a.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:e,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}constructor(e,i,o,a,u){this.ngZone=e,this.document=i,this.cdr=o,this.i18n=a,this.directionality=u,this.destroy$=new L.x,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new t.vpe,this.nzFileListChange=new t.vpe,this.onStart=c=>{this.nzFileList||(this.nzFileList=[]);const p=this.fileToObject(c);p.status="uploading",this.nzFileList=this.nzFileList.concat(p),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:p,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(c,p)=>{const m=this.getFileItem(p,this.nzFileList);m.percent=c.percent,this.nzChange.emit({event:c,file:{...m},fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(c,p)=>{const d=this.nzFileList,m=this.getFileItem(p,d);m.status="done",m.response=c,this.nzChange.emit({file:{...m},fileList:d,type:"success"}),this.detectChangesList()},this.onError=(c,p)=>{const d=this.nzFileList,m=this.getFileItem(p,d);m.error=c,m.status="error",this.nzChange.emit({file:{...m},fileList:d,type:"error"}),this.detectChangesList()},this.onRemove=c=>{this.uploadComp.abort(c),c.status="removed";const p="function"==typeof this.nzRemove?this.nzRemove(c):null==this.nzRemove||this.nzRemove;(p instanceof y.y?p:(0,w.of)(p)).pipe((0,W.h)(d=>d)).subscribe(()=>{this.nzFileList=this.removeFileItem(c,this.nzFileList),this.nzChange.emit({file:c,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}fileToObject(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e}}getFileItem(e,i){return i.filter(o=>o.uid===e.uid)[0]}removeFileItem(e,i){return i.filter(o=>o.uid!==e.uid)}fileDrop(e){e.type!==this.dragState&&(this.dragState=e.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}setClassMap(){let e=[];"drag"===this.nzType?(this.nzFileList.some(i=>"uploading"===i.status)&&e.push(`${this.prefixCls}-drag-uploading`),"dragover"===this.dragState&&e.push(`${this.prefixCls}-drag-hover`)):e=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...e,this.nzDisabled&&`${this.prefixCls}-disabled`||"","rtl"===this.dir&&`${this.prefixCls}-rtl`||""].filter(i=>!!i),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,C.R)(this.destroy$)).subscribe(e=>{this.dir=e,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe((0,C.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>(0,M.R)(this.document.body,"drop").pipe((0,C.R)(this.destroy$)).subscribe(e=>{e.preventDefault(),e.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(t.R0b),t.Y36(h.K0),t.Y36(t.sBO),t.Y36(Y.wi),t.Y36(R.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-upload"]],viewQuery:function(e,i){if(1&e&&(t.Gf(At,5),t.Gf(Nt,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.uploadComp=o.first),t.iGM(o=t.CRH())&&(i.listComp=o.first)}},hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("ant-upload-picture-card-wrapper","picture-card"===i.nzListType)},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[t.TTD],ngContentSelectors:Q,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],[4,"ngIf","ngIfElse"],["select",""],["pic",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir",4,"ngIf"],[4,"ngIf"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],["listComp",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],["uploadComp",""],[3,"ngTemplateOutlet"],[3,"ngClass","drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(e,i){if(1&e&&(t.F$t(),t.YNc(0,kt,2,2,"ng-template",null,0,t.W1O),t.YNc(2,Bt,1,0,"ng-template",null,1,t.W1O),t.YNc(4,Wt,4,5,"ng-template",null,2,t.W1O),t.YNc(6,jt,7,4,"ng-container",3),t.YNc(7,Vt,1,2,"ng-template",null,4,t.W1O),t.YNc(9,ee,2,2,"ng-template",null,5,t.W1O)),2&e){const o=t.MAs(8);t.xp6(6),t.Q6J("ngIf","drag"===i.nzType)("ngIfElse",o)}},dependencies:[R.Lv,h.mk,h.O5,h.tP,ne,ie],encapsulation:2,changeDetection:0}),(0,T.gn)([(0,z.Rn)()],l.prototype,"nzLimit",void 0),(0,T.gn)([(0,z.Rn)()],l.prototype,"nzSize",void 0),(0,T.gn)([(0,z.yF)()],l.prototype,"nzDirectory",void 0),(0,T.gn)([(0,z.yF)()],l.prototype,"nzOpenFileDialogOnClick",void 0),(0,T.gn)([(0,z.yF)()],l.prototype,"nzDisabled",void 0),(0,T.gn)([(0,z.yF)()],l.prototype,"nzMultiple",void 0),(0,T.gn)([(0,z.yF)()],l.prototype,"nzShowButton",void 0),(0,T.gn)([(0,z.yF)()],l.prototype,"nzWithCredentials",void 0),l})(),oe=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[R.vT,h.ez,K.u5,b.ud,P.cg,A.W,Y.YI,N.PV,S.sL]}),l})()}}]);