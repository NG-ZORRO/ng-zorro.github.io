import{Fa as S,Ja as v,Xa as d,hb as K,ib as Q,qa as x}from"./chunk-Z5XD4HFP.js";import{$b as j,Ad as c,Bc as O,C as $,E as P,Fb as b,Gb as A,Ja as I,Ma as D,Tc as J,Vb as _,Wb as F,Xb as X,Yb as Y,f,ga as N,ha as W,la as a,mc as Z,ob as y,qc as V,rc as q,wb as H,xa as k,xb as G,ya as w,yb as U,zd as E}from"./chunk-ES2AGF3L.js";import{a as g,b as C}from"./chunk-JNGVGNCT.js";var ie=["*"];function se(i,u){if(i&1&&j(0,"nz-resize-handle",0),i&2){let e=u.$implicit;Y("nzDirection",e.direction)("nzCursorType",e.cursorType)}}function ee(i){return x(i)?i.touches[0]||i.changedTouches[0]:i}var L=(()=>{class i{document=a(k);ngZone=a(A);listeners=new Map;handleMouseDownOutsideAngular$=new f;documentMouseUpOutsideAngular$=new f;documentMouseMoveOutsideAngular$=new f;mouseEnteredOutsideAngular$=new f;startResizing(e){let t=x(e);this.clearListeners();let n=t?"touchmove":"mousemove",o=t?"touchend":"mouseup",s=l=>{this.documentMouseMoveOutsideAngular$.next(l)},r=l=>{this.documentMouseUpOutsideAngular$.next(l),this.clearListeners()};this.listeners.set(n,s),this.listeners.set(o,r),this.ngZone.runOutsideAngular(()=>{this.listeners.forEach((l,h)=>{this.document.addEventListener(h,l)})})}clearListeners(){this.listeners.forEach((e,t)=>{this.document.removeEventListener(t,e)}),this.listeners.clear()}ngOnDestroy(){this.handleMouseDownOutsideAngular$.complete(),this.documentMouseUpOutsideAngular$.complete(),this.documentMouseMoveOutsideAngular$.complete(),this.mouseEnteredOutsideAngular$.complete(),this.clearListeners()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=N({token:i,factory:i.\u0275fac})}return i})(),Re=(()=>{class i{elementRef=a(D);renderer=a(y);nzResizableService=a(L);platform=a(K);ngZone=a(A);destroyRef=a(w);nzBounds="parent";nzMaxHeight;nzMaxWidth;nzMinHeight=40;nzMinWidth=40;nzGridColumnCount=-1;nzMaxColumn=-1;nzMinColumn=-1;nzLockAspectRatio=!1;nzPreview=!1;nzDisabled=!1;nzResize=new b;nzResizeEnd=new b;nzResizeStart=new b;resizing=!1;elRect;currentHandleEvent=null;ghostElement=null;el;sizeCache=null;constructor(){this.nzResizableService.handleMouseDownOutsideAngular$.pipe(d()).subscribe(e=>{this.nzDisabled||(this.resizing=!0,this.nzResizableService.startResizing(e.mouseEvent),this.currentHandleEvent=e,this.nzResizeStart.observers.length&&this.ngZone.run(()=>this.nzResizeStart.emit({mouseEvent:e.mouseEvent,direction:e.direction})),this.elRect=this.el.getBoundingClientRect())}),this.nzResizableService.documentMouseUpOutsideAngular$.pipe(d(),P(Boolean)).subscribe(e=>{this.resizing&&(this.resizing=!1,this.nzResizableService.documentMouseUpOutsideAngular$.next(null),this.endResize(e))}),this.nzResizableService.documentMouseMoveOutsideAngular$.pipe(d()).subscribe(e=>{this.resizing&&this.resize(e)})}setPosition(){let e=getComputedStyle(this.el).position;(e==="static"||!e)&&this.renderer.setStyle(this.el,"position","relative")}calcSize(e,t,n){let o,s,r,l,h=0,m=0,z=this.nzMinWidth,M=1/0,R=1/0;if(this.nzBounds==="parent"){let p=this.renderer.parentNode(this.el);if(p instanceof HTMLElement){let T=p.getBoundingClientRect();M=T.width,R=T.height}}else if(this.nzBounds==="window")typeof window<"u"&&(M=window.innerWidth,R=window.innerHeight);else if(this.nzBounds&&this.nzBounds.nativeElement&&this.nzBounds.nativeElement instanceof HTMLElement){let p=this.nzBounds.nativeElement.getBoundingClientRect();M=p.width,R=p.height}return r=S(this.nzMaxWidth,M),l=S(this.nzMaxHeight,R),this.nzGridColumnCount!==-1&&(m=r/this.nzGridColumnCount,z=this.nzMinColumn!==-1?m*this.nzMinColumn:z,r=this.nzMaxColumn!==-1?m*this.nzMaxColumn:r),n!==-1?/(left|right)/i.test(this.currentHandleEvent.direction)?(o=Math.min(Math.max(e,z),r),s=Math.min(Math.max(o/n,this.nzMinHeight),l),(s>=l||s<=this.nzMinHeight)&&(o=Math.min(Math.max(s*n,z),r))):(s=Math.min(Math.max(t,this.nzMinHeight),l),o=Math.min(Math.max(s*n,z),r),(o>=r||o<=z)&&(s=Math.min(Math.max(o/n,this.nzMinHeight),l))):(o=Math.min(Math.max(e,z),r),s=Math.min(Math.max(t,this.nzMinHeight),l)),this.nzGridColumnCount!==-1&&(h=Math.round(o/m),o=h*m),{col:h,width:o,height:s}}resize(e){let t=this.elRect,n=ee(e),o=ee(this.currentHandleEvent.mouseEvent),s=t.width,r=t.height,l=this.nzLockAspectRatio?s/r:-1;switch(this.currentHandleEvent.direction){case"bottomRight":s=n.clientX-t.left,r=n.clientY-t.top;break;case"bottomLeft":s=t.width+o.clientX-n.clientX,r=n.clientY-t.top;break;case"topRight":s=n.clientX-t.left,r=t.height+o.clientY-n.clientY;break;case"topLeft":s=t.width+o.clientX-n.clientX,r=t.height+o.clientY-n.clientY;break;case"top":r=t.height+o.clientY-n.clientY;break;case"right":s=n.clientX-t.left;break;case"bottom":r=n.clientY-t.top;break;case"left":s=t.width+o.clientX-n.clientX}let h=this.calcSize(s,r,l);this.sizeCache=g({},h),this.nzResize.observers.length&&this.ngZone.run(()=>{this.nzResize.emit(C(g({},h),{mouseEvent:e,direction:this.currentHandleEvent.direction}))}),this.nzPreview&&this.previewResize(h)}endResize(e){this.removeGhostElement();let t=this.sizeCache?g({},this.sizeCache):{width:this.elRect.width,height:this.elRect.height};this.nzResizeEnd.observers.length&&this.ngZone.run(()=>{this.nzResizeEnd.emit(C(g({},t),{mouseEvent:e,direction:this.currentHandleEvent.direction}))}),this.sizeCache=null,this.currentHandleEvent=null}previewResize({width:e,height:t}){this.createGhostElement(),this.renderer.setStyle(this.ghostElement,"width",`${e}px`),this.renderer.setStyle(this.ghostElement,"height",`${t}px`)}createGhostElement(){this.ghostElement||(this.ghostElement=this.renderer.createElement("div"),this.renderer.setAttribute(this.ghostElement,"class","nz-resizable-preview")),this.renderer.appendChild(this.el,this.ghostElement)}removeGhostElement(){this.ghostElement&&this.renderer.removeChild(this.el,this.ghostElement)}ngAfterViewInit(){this.platform.isBrowser&&(this.el=this.elementRef.nativeElement,this.setPosition(),v(this.el,"mouseenter").pipe(d(this.destroyRef)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!0)}),v(this.el,"mouseleave").pipe(d(this.destroyRef)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!1)}))}ngOnDestroy(){this.ghostElement=null,this.sizeCache=null}static \u0275fac=function(t){return new(t||i)};static \u0275dir=U({type:i,selectors:[["","nz-resizable",""]],hostAttrs:[1,"nz-resizable"],hostVars:4,hostBindings:function(t,n){t&2&&O("nz-resizable-resizing",n.resizing)("nz-resizable-disabled",n.nzDisabled)},inputs:{nzBounds:"nzBounds",nzMaxHeight:"nzMaxHeight",nzMaxWidth:"nzMaxWidth",nzMinHeight:[2,"nzMinHeight","nzMinHeight",c],nzMinWidth:[2,"nzMinWidth","nzMinWidth",c],nzGridColumnCount:[2,"nzGridColumnCount","nzGridColumnCount",c],nzMaxColumn:[2,"nzMaxColumn","nzMaxColumn",c],nzMinColumn:[2,"nzMinColumn","nzMinColumn",c],nzLockAspectRatio:[2,"nzLockAspectRatio","nzLockAspectRatio",E],nzPreview:[2,"nzPreview","nzPreview",E],nzDisabled:[2,"nzDisabled","nzDisabled",E]},outputs:{nzResize:"nzResize",nzResizeEnd:"nzResizeEnd",nzResizeStart:"nzResizeStart"},exportAs:["nzResizable"],features:[J([L])]})}return i})(),B=class{direction;mouseEvent;constructor(u,e){this.direction=u,this.mouseEvent=e}},te=Q({passive:!0}),oe=(()=>{class i{nzResizableService=a(L);renderer=a(y);el=a(D).nativeElement;destroyRef=a(w);nzDirection="bottomRight";nzCursorType="window";nzMouseDown=new b;ngOnInit(){this.nzResizableService.mouseEnteredOutsideAngular$.pipe(d(this.destroyRef)).subscribe(e=>{e?this.renderer.addClass(this.el,"nz-resizable-handle-box-hover"):this.renderer.removeClass(this.el,"nz-resizable-handle-box-hover")}),$(v(this.el,"mousedown",te),v(this.el,"touchstart",te)).pipe(d(this.destroyRef)).subscribe(e=>{this.nzResizableService.handleMouseDownOutsideAngular$.next(new B(this.nzDirection,e))})}onPointerDown(e){e.target.setPointerCapture(e.pointerId)}onPointerUp(e){e.target.releasePointerCapture(e.pointerId)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["nz-resize-handle"],["","nz-resize-handle",""]],hostAttrs:[1,"nz-resizable-handle"],hostVars:20,hostBindings:function(t,n){t&1&&Z("pointerdown",function(s){return n.onPointerDown(s)})("pointerup",function(s){return n.onPointerUp(s)}),t&2&&O("nz-resizable-handle-top",n.nzDirection==="top")("nz-resizable-handle-right",n.nzDirection==="right")("nz-resizable-handle-bottom",n.nzDirection==="bottom")("nz-resizable-handle-left",n.nzDirection==="left")("nz-resizable-handle-topRight",n.nzDirection==="topRight")("nz-resizable-handle-bottomRight",n.nzDirection==="bottomRight")("nz-resizable-handle-bottomLeft",n.nzDirection==="bottomLeft")("nz-resizable-handle-topLeft",n.nzDirection==="topLeft")("nz-resizable-handle-cursor-type-grid",n.nzCursorType==="grid")("nz-resizable-handle-cursor-type-window",n.nzCursorType==="window")},inputs:{nzDirection:"nzDirection",nzCursorType:"nzCursorType"},outputs:{nzMouseDown:"nzMouseDown"},exportAs:["nzResizeHandle"],ngContentSelectors:ie,decls:1,vars:0,template:function(t,n){t&1&&(V(),q(0))},encapsulation:2,changeDetection:0})}return i})(),re=["bottomRight","topRight","bottomLeft","topLeft","bottom","right","top","left"];function ne(i){return i.map(u=>typeof u=="string"?{direction:u,cursorType:"window"}:u)}var Ee=(()=>{class i{nzDirections=re;resizeHandleOptions=ne(this.nzDirections);ngOnChanges(e){let{nzDirections:t}=e;t&&(this.resizeHandleOptions=ne(t.currentValue))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=H({type:i,selectors:[["nz-resize-handles"]],inputs:{nzDirections:"nzDirections"},exportAs:["nzResizeHandles"],features:[I],decls:2,vars:0,consts:[[3,"nzDirection","nzCursorType"]],template:function(t,n){t&1&&F(0,se,1,2,"nz-resize-handle",0,_),t&2&&X(n.resizeHandleOptions)},dependencies:[oe],encapsulation:2,changeDetection:0})}return i})(),Ce=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=G({type:i});static \u0275inj=W({})}return i})();export{ee as a,Re as b,oe as c,Ee as d,Ce as e};
