"use strict";(self.webpackChunkng_zorro_antd_doc=self.webpackChunkng_zorro_antd_doc||[]).push([[9892],{9892:(oe,A,r)=>{r.d(A,{KC:()=>$,wX:()=>ie});var k=r(7800),w=r(7048),t=r(4496),v=r(2700),T=r(3252),D=r(6928),G=r(5657),I=r(800),O=r(7368),L=r(4704),B=r(9212),U=r(3616),Y=r(6684),x=r(608),z=r(9684),h=r(1368),R=r(8352),b=r(5120),F=r(7348),P=r(9100),K=r(5792),W=r(28),y=r(1316),f=r(5739),j=r(372),J=r(1900);const H=["file"],Q=["nz-upload-btn",""],N=["*"];function q(i,a){}const E=i=>({$implicit:i});function X(i,a){if(1&i&&(t.I0R(0,"div",18),t.yuY(1,q,0,0,"ng-template",19),t.C$Y()),2&i){const e=t.GaO(2).$implicit,n=t.Gew(5);t.eAK("ant-upload-list-item-file",!e.isUploading),t.yG2(),t.E7m("ngTemplateOutlet",n)("ngTemplateOutletContext",t.S45(4,E,e))}}function Z(i,a){if(1&i&&t.wR5(0,"img",22),2&i){const e=t.GaO(3).$implicit;t.E7m("src",e.thumbUrl||e.url,t.K6U),t.e48("alt",e.name)}}function V(i,a){if(1&i){const e=t.KQA();t.I0R(0,"a",20),t.qCj("click",function(o){t.usT(e);const s=t.GaO(2).$implicit,l=t.GaO();return t.CGJ(l.handlePreview(s,o))}),t.yuY(1,Z,1,2,"img",21),t.C$Y()}if(2&i){t.GaO();const e=t.Gew(5),n=t.GaO().$implicit;t.eAK("ant-upload-list-item-file",!n.isImageUrl),t.E7m("href",n.url||n.thumbUrl,t.K6U),t.yG2(),t.E7m("ngIf",n.isImageUrl)("ngIfElse",e)}}function tt(i,a){}function et(i,a){if(1&i&&(t.I0R(0,"div",23),t.yuY(1,tt,0,0,"ng-template",19),t.C$Y()),2&i){const e=t.GaO(2).$implicit,n=t.Gew(5);t.yG2(),t.E7m("ngTemplateOutlet",n)("ngTemplateOutletContext",t.S45(2,E,e))}}function nt(i,a){}function it(i,a){if(1&i&&t.yuY(0,nt,0,0,"ng-template",19),2&i){const e=t.GaO(2).$implicit,n=t.Gew(5);t.E7m("ngTemplateOutlet",n)("ngTemplateOutletContext",t.S45(2,E,e))}}function ot(i,a){if(1&i&&(t.SAx(0,13),t.yuY(1,X,2,6,"div",14)(2,V,2,5,"a",15)(3,et,2,4,"div",16),t.k70(),t.yuY(4,it,1,4,"ng-template",null,17,t.gJz)),2&i){const e=t.GaO().$implicit;t.E7m("ngSwitch",e.iconType),t.yG2(),t.E7m("ngSwitchCase","uploading"),t.yG2(),t.E7m("ngSwitchCase","thumbnail")}}function st(i,a){1&i&&(t.SAx(0),t.wR5(1,"span",29),t.k70())}function at(i,a){if(1&i&&(t.SAx(0),t.yuY(1,st,2,0,"ng-container",24),t.k70()),2&i){const e=t.GaO(2).$implicit,n=t.Gew(4);t.yG2(),t.E7m("ngIf",e.isUploading)("ngIfElse",n)}}function lt(i,a){if(1&i&&(t.SAx(0),t.OEk(1),t.k70()),2&i){const e=t.GaO(5);t.yG2(),t.oRS(" ",e.locale.uploading," ")}}function rt(i,a){if(1&i&&(t.SAx(0),t.yuY(1,lt,2,1,"ng-container",24),t.k70()),2&i){const e=t.GaO(2).$implicit,n=t.Gew(4);t.yG2(),t.E7m("ngIf",e.isUploading)("ngIfElse",n)}}function pt(i,a){if(1&i&&t.wR5(0,"span",30),2&i){const e=t.GaO(2).$implicit;t.E7m("nzType",e.isUploading?"loading":"paper-clip")}}function _t(i,a){if(1&i&&(t.SAx(0)(1,13),t.yuY(2,at,2,2,"ng-container",27)(3,rt,2,2,"ng-container",27)(4,pt,1,1,"span",28),t.k70()()),2&i){const e=t.GaO(3);t.yG2(),t.E7m("ngSwitch",e.listType),t.yG2(),t.E7m("ngSwitchCase","picture"),t.yG2(),t.E7m("ngSwitchCase","picture-card")}}function ct(i,a){}function dt(i,a){if(1&i&&t.wR5(0,"span",31),2&i){const e=t.GaO().$implicit;t.E7m("nzType",e.isImageUrl?"picture":"file")}}function mt(i,a){if(1&i&&t.yuY(0,_t,5,3,"ng-container",24)(1,ct,0,0,"ng-template",19,25,t.gJz)(3,dt,1,1,"ng-template",null,26,t.gJz),2&i){const e=a.$implicit,n=t.Gew(2),o=t.GaO(2);t.E7m("ngIf",!o.iconRender)("ngIfElse",n),t.yG2(),t.E7m("ngTemplateOutlet",o.iconRender)("ngTemplateOutletContext",t.S45(4,E,e))}}function ut(i,a){if(1&i){const e=t.KQA();t.I0R(0,"button",33),t.qCj("click",function(o){t.usT(e);const s=t.GaO(2).$implicit,l=t.GaO();return t.CGJ(l.handleRemove(s,o))}),t.wR5(1,"span",34),t.C$Y()}if(2&i){const e=t.GaO(3);t.e48("title",e.locale.removeFile)}}function ht(i,a){if(1&i&&t.yuY(0,ut,2,1,"button",32),2&i){const e=t.GaO(2);t.E7m("ngIf",e.icons.showRemoveIcon)}}function gt(i,a){if(1&i){const e=t.KQA();t.I0R(0,"button",33),t.qCj("click",function(){t.usT(e);const o=t.GaO(2).$implicit,s=t.GaO();return t.CGJ(s.handleDownload(o))}),t.wR5(1,"span",35),t.C$Y()}if(2&i){const e=t.GaO(3);t.e48("title",e.locale.downloadFile)}}function ft(i,a){if(1&i&&t.yuY(0,gt,2,1,"button",32),2&i){const e=t.GaO().$implicit;t.E7m("ngIf",e.showDownload)}}function zt(i,a){}function yt(i,a){}function Ct(i,a){if(1&i&&(t.I0R(0,"span"),t.yuY(1,zt,0,0,"ng-template",10)(2,yt,0,0,"ng-template",10),t.C$Y()),2&i){t.GaO(2);const e=t.Gew(9),n=t.Gew(7),o=t.GaO();t.uQ9("ant-upload-list-item-card-actions ","picture"===o.listType?"picture":"",""),t.yG2(),t.E7m("ngTemplateOutlet",e),t.yG2(),t.E7m("ngTemplateOutlet",n)}}function Tt(i,a){if(1&i&&t.yuY(0,Ct,3,5,"span",36),2&i){const e=t.GaO(2);t.E7m("ngIf","picture-card"!==e.listType)}}function vt(i,a){if(1&i){const e=t.KQA();t.I0R(0,"a",39),t.qCj("click",function(o){t.usT(e);const s=t.GaO(2).$implicit,l=t.GaO();return t.CGJ(l.handlePreview(s,o))}),t.OEk(1),t.C$Y()}if(2&i){const e=t.GaO(2).$implicit;t.E7m("href",e.url,t.K6U),t.e48("title",e.name)("download",e.linkProps&&e.linkProps.download),t.yG2(),t.oRS(" ",e.name," ")}}function Ut(i,a){if(1&i){const e=t.KQA();t.I0R(0,"span",40),t.qCj("click",function(o){t.usT(e);const s=t.GaO(2).$implicit,l=t.GaO();return t.CGJ(l.handlePreview(s,o))}),t.OEk(1),t.C$Y()}if(2&i){const e=t.GaO(2).$implicit;t.e48("title",e.name),t.yG2(),t.oRS(" ",e.name," ")}}function wt(i,a){}function Ot(i,a){if(1&i&&t.yuY(0,vt,2,4,"a",37)(1,Ut,2,2,"span",38)(2,wt,0,0,"ng-template",10),2&i){const e=t.GaO().$implicit,n=t.Gew(11);t.E7m("ngIf",e.url),t.yG2(),t.E7m("ngIf",!e.url),t.yG2(),t.E7m("ngTemplateOutlet",n)}}function Et(i,a){}function It(i,a){}const Lt=()=>({opacity:.5,"pointer-events":"none"});function Gt(i,a){if(1&i){const e=t.KQA();t.I0R(0,"a",44),t.qCj("click",function(o){t.usT(e);const s=t.GaO(2).$implicit,l=t.GaO();return t.CGJ(l.handlePreview(s,o))}),t.wR5(1,"span",45),t.C$Y()}if(2&i){const e=t.GaO(2).$implicit,n=t.GaO();t.E7m("href",e.url||e.thumbUrl,t.K6U)("ngStyle",e.url||e.thumbUrl?null:t.q4q(3,Lt)),t.e48("title",n.locale.previewFile)}}function xt(i,a){}function Dt(i,a){if(1&i&&(t.SAx(0),t.yuY(1,xt,0,0,"ng-template",10),t.k70()),2&i){t.GaO(2);const e=t.Gew(9);t.yG2(),t.E7m("ngTemplateOutlet",e)}}function Rt(i,a){}function bt(i,a){if(1&i&&(t.I0R(0,"span",41),t.yuY(1,Gt,2,4,"a",42)(2,Dt,2,1,"ng-container",43)(3,Rt,0,0,"ng-template",10),t.C$Y()),2&i){const e=t.GaO().$implicit,n=t.Gew(7),o=t.GaO();t.yG2(),t.E7m("ngIf",o.icons.showPreviewIcon),t.yG2(),t.E7m("ngIf","done"===e.status),t.yG2(),t.E7m("ngTemplateOutlet",n)}}function Ft(i,a){if(1&i&&(t.I0R(0,"div",46),t.wR5(1,"nz-progress",47),t.C$Y()),2&i){const e=t.GaO().$implicit;t.yG2(),t.E7m("nzPercent",e.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function Pt(i,a){if(1&i&&(t.I0R(0,"div")(1,"div",1),t.yuY(2,ot,6,3,"ng-template",null,2,t.gJz)(4,mt,5,6,"ng-template",null,3,t.gJz)(6,ht,1,1,"ng-template",null,4,t.gJz)(8,ft,1,1,"ng-template",null,5,t.gJz)(10,Tt,1,1,"ng-template",null,6,t.gJz)(12,Ot,3,3,"ng-template",null,7,t.gJz),t.I0R(14,"div",8)(15,"span",9),t.yuY(16,Et,0,0,"ng-template",10)(17,It,0,0,"ng-template",10),t.C$Y()(),t.yuY(18,bt,4,3,"span",11)(19,Ft,2,3,"div",12),t.C$Y()()),2&i){const e=a.$implicit,n=t.Gew(3),o=t.Gew(13),s=t.GaO();t.uQ9("ant-upload-list-",s.listType,"-container"),t.yG2(),t.qim("ant-upload-list-item ant-upload-list-item-",e.status," ant-upload-list-item-list-type-",s.listType,""),t.E7m("@itemState",void 0)("nzTooltipTitle","error"===e.status?e.message:null),t.e48("data-key",e.key),t.yG2(15),t.E7m("ngTemplateOutlet",n),t.yG2(),t.E7m("ngTemplateOutlet",o),t.yG2(),t.E7m("ngIf","picture-card"===s.listType&&!e.isUploading),t.yG2(),t.E7m("ngIf",e.isUploading)}}const Nt=["uploadComp"],St=["listComp"],Mt=()=>[];function $t(i,a){if(1&i&&t.wR5(0,"nz-upload-list",8,9),2&i){const e=t.GaO(2);t.m4B("display",e.nzShowUploadList?"":"none"),t.E7m("locale",e.locale)("listType",e.nzListType)("items",e.nzFileList||t.q4q(13,Mt))("icons",e.nzShowUploadList)("iconRender",e.nzIconRender)("previewFile",e.nzPreviewFile)("previewIsImage",e.nzPreviewIsImage)("onPreview",e.nzPreview)("onRemove",e.onRemove)("onDownload",e.nzDownload)("dir",e.dir)}}function At(i,a){1&i&&t.C_f(0)}function kt(i,a){if(1&i&&(t.SAx(0),t.yuY(1,At,1,0,"ng-container",10),t.k70()),2&i){const e=t.GaO(2);t.yG2(),t.E7m("ngTemplateOutlet",e.nzFileListRender)("ngTemplateOutletContext",t.S45(2,E,e.nzFileList))}}function Bt(i,a){if(1&i&&t.yuY(0,$t,2,14,"nz-upload-list",6)(1,kt,2,4,"ng-container",7),2&i){const e=t.GaO();t.E7m("ngIf",e.locale&&!e.nzFileListRender),t.yG2(),t.E7m("ngIf",e.nzFileListRender)}}function Yt(i,a){1&i&&t._Xx(0)}function Kt(i,a){}function Wt(i,a){if(1&i&&(t.I0R(0,"div",11)(1,"div",12,13),t.yuY(3,Kt,0,0,"ng-template",14),t.C$Y()()),2&i){const e=t.GaO(),n=t.Gew(3);t.m4B("display",e.nzShowButton?"":"none"),t.E7m("ngClass",e.classList),t.yG2(),t.E7m("options",e._btnOptions),t.yG2(2),t.E7m("ngTemplateOutlet",n)}}function jt(i,a){}function Jt(i,a){}function Ht(i,a){if(1&i){const e=t.KQA();t.SAx(0),t.I0R(1,"div",15),t.qCj("drop",function(o){t.usT(e);const s=t.GaO();return t.CGJ(s.fileDrop(o))})("dragover",function(o){t.usT(e);const s=t.GaO();return t.CGJ(s.fileDrop(o))})("dragleave",function(o){t.usT(e);const s=t.GaO();return t.CGJ(s.fileDrop(o))}),t.I0R(2,"div",16,13)(4,"div",17),t.yuY(5,jt,0,0,"ng-template",14),t.C$Y()()(),t.yuY(6,Jt,0,0,"ng-template",14),t.k70()}if(2&i){const e=t.GaO(),n=t.Gew(3),o=t.Gew(1);t.yG2(),t.E7m("ngClass",e.classList),t.yG2(),t.E7m("options",e._btnOptions),t.yG2(3),t.E7m("ngTemplateOutlet",n),t.yG2(),t.E7m("ngTemplateOutlet",o)}}function Qt(i,a){}function qt(i,a){}function Xt(i,a){if(1&i&&(t.SAx(0),t.yuY(1,Qt,0,0,"ng-template",14)(2,qt,0,0,"ng-template",14),t.k70()),2&i){t.GaO(2);const e=t.Gew(1),n=t.Gew(5);t.yG2(),t.E7m("ngTemplateOutlet",e),t.yG2(),t.E7m("ngTemplateOutlet",n)}}function Zt(i,a){if(1&i&&t.yuY(0,Xt,3,2,"ng-container",3),2&i){const e=t.GaO(),n=t.Gew(10);t.E7m("ngIf","picture-card"===e.nzListType)("ngIfElse",n)}}function Vt(i,a){}function te(i,a){}function ee(i,a){if(1&i&&t.yuY(0,Vt,0,0,"ng-template",14)(1,te,0,0,"ng-template",14),2&i){t.GaO();const e=t.Gew(5),n=t.Gew(1);t.E7m("ngTemplateOutlet",e),t.yG2(),t.E7m("ngTemplateOutlet",n)}}let ne=(()=>{class i{onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(e){if(this.options.disabled||"dragover"===e.type)e.preventDefault();else{if(this.options.directory)this.traverseFileTree(e.dataTransfer.items);else{const n=Array.prototype.slice.call(e.dataTransfer.files).filter(o=>this.attrAccept(o,this.options.accept));n.length&&this.uploadFiles(n)}e.preventDefault()}}onChange(e){if(this.options.disabled)return;const n=e.target;this.uploadFiles(n.files),n.value=""}traverseFileTree(e){const n=(o,s)=>{o.isFile?o.file(l=>{this.attrAccept(l,this.options.accept)&&this.uploadFiles([l])}):o.isDirectory&&o.createReader().readEntries(p=>{for(const c of p)n(c,`${s}${o.name}/`)})};for(const o of e)n(o.webkitGetAsEntry(),"")}attrAccept(e,n){if(e&&n){const o=Array.isArray(n)?n:n.split(","),s=`${e.name}`,l=`${e.type}`,p=l.replace(/\/.*$/,"");return o.some(c=>{const d=c.trim();return"."===d.charAt(0)?-1!==s.toLowerCase().indexOf(d.toLowerCase(),s.toLowerCase().length-d.toLowerCase().length):/\/\*$/.test(d)?p===d.replace(/\/.*$/,""):l===d})}return!0}attachUid(e){return e.uid||(e.uid=Math.random().toString(36).substring(2)),e}uploadFiles(e){let n=(0,v.of)(Array.prototype.slice.call(e));this.options.filters&&this.options.filters.forEach(o=>{n=n.pipe((0,O.G)(s=>{const l=o.fn(s);return l instanceof T._?l:(0,v.of)(l)}))}),n.subscribe(o=>{o.forEach(s=>{this.attachUid(s),this.upload(s,o)})},o=>{(0,x.mo)("Unhandled upload filter error",o)})}upload(e,n){if(!this.options.beforeUpload)return this.post(e);const o=this.options.beforeUpload(e,n);if(o instanceof T._)o.subscribe(s=>{const l=Object.prototype.toString.call(s);"[object File]"===l||"[object Blob]"===l?(this.attachUid(s),this.post(s)):"boolean"==typeof s&&!1!==s&&this.post(e)},s=>{(0,x.mo)("Unhandled upload beforeUpload error",s)});else if(!1!==o)return this.post(e)}post(e){if(this.destroy)return;let o,n=(0,v.of)(e);const s=this.options,{uid:l}=e,{action:p,data:c,headers:d,transformFile:m}=s,g={action:"string"==typeof p?p:"",name:s.name,headers:d,file:e,postFile:e,data:c,withCredentials:s.withCredentials,onProgress:s.onProgress?_=>{s.onProgress(_,e)}:void 0,onSuccess:(_,u)=>{this.clean(l),s.onSuccess(_,e,u)},onError:_=>{this.clean(l),s.onError(_,e)}};if("function"==typeof p){const _=p(e);_ instanceof T._?n=n.pipe((0,O.G)(()=>_),(0,L.k)(u=>(g.action=u,e))):g.action=_}if("function"==typeof m){const _=m(e);n=n.pipe((0,O.G)(()=>_ instanceof T._?_:(0,v.of)(_)),(0,B.y)(u=>o=u))}if("function"==typeof c){const _=c(e);_ instanceof T._?n=n.pipe((0,O.G)(()=>_),(0,L.k)(u=>(g.data=u,o??e))):g.data=_}if("function"==typeof d){const _=d(e);_ instanceof T._?n=n.pipe((0,O.G)(()=>_),(0,L.k)(u=>(g.headers=u,o??e))):g.headers=_}n.subscribe(_=>{g.postFile=_;const u=(s.customRequest||this.xhr).call(this,g);u instanceof D.wH||(0,x.mo)("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[l]=u,s.onStart(e)})}xhr(e){const n=new FormData;e.data&&Object.keys(e.data).map(s=>{n.append(s,e.data[s])}),n.append(e.name,e.postFile),e.headers||(e.headers={}),null!==e.headers["X-Requested-With"]?e.headers["X-Requested-With"]="XMLHttpRequest":delete e.headers["X-Requested-With"];const o=new w.i("POST",e.action,n,{reportProgress:!0,withCredentials:e.withCredentials,headers:new w.UD(e.headers)});return this.http.request(o).subscribe(s=>{s.type===w.yc.UploadProgress?(s.total>0&&(s.percent=s.loaded/s.total*100),e.onProgress(s,e.file)):s instanceof w.WA&&e.onSuccess(s.body,e.file,s)},s=>{this.abort(e.file),e.onError(s,e.file)})}clean(e){const n=this.reqs[e];n instanceof D.wH&&n.unsubscribe(),delete this.reqs[e]}abort(e){e?this.clean(e&&e.uid):Object.keys(this.reqs).forEach(n=>this.clean(n))}constructor(e,n,o){if(this.ngZone=e,this.http=n,this.elementRef=o,this.reqs={},this.destroy=!1,this.destroy$=new G.E,!n)throw new Error("Not found 'HttpClient', You can import 'HttpClientModule' in your root module.")}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,I.w)(this.elementRef.nativeElement,"click").pipe((0,U.a)(this.destroy$)).subscribe(()=>this.onClick()),(0,I.w)(this.elementRef.nativeElement,"keydown").pipe((0,U.a)(this.destroy$)).subscribe(e=>{this.options.disabled||("Enter"===e.key||e.keyCode===k.wJ)&&this.onClick()})})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(t.WW2),t.GI1(w.KK,8),t.GI1(t.GMv))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["","nz-upload-btn",""]],viewQuery:function(n,o){if(1&n&&t.CC$(H,7),2&n){let s;t.wto(s=t.Gqi())&&(o.file=s.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(n,o){1&n&&t.qCj("drop",function(l){return o.onFileDrop(l)})("dragover",function(l){return o.onFileDrop(l)}),2&n&&(t.e48("tabindex","0")("role","button"),t.eAK("ant-upload-disabled",o.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],standalone:!0,features:[t.UHJ],attrs:Q,ngContentSelectors:N,decls:3,vars:4,consts:[["type","file",2,"display","none",3,"multiple","change"],["file",""]],template:function(n,o){1&n&&(t.kPM(),t.I0R(0,"input",0,1),t.qCj("change",function(l){return o.onChange(l)}),t.C$Y(),t._Xx(2)),2&n&&(t.E7m("multiple",o.options.multiple),t.e48("accept",o.options.accept)("directory",o.options.directory?"directory":null)("webkitdirectory",o.options.directory?"webkitdirectory":null))},encapsulation:2})}return i})();const S=i=>!!i&&0===i.indexOf("image/"),C=200;let M=(()=>{class i{get showPic(){return"picture"===this.listType||"picture-card"===this.listType}set items(e){this.list=e}genErr(e){return e.response&&"string"==typeof e.response?e.response:e.error&&e.error.statusText||this.locale.uploadError}extname(e){const n=e.split("/"),s=n[n.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(s)||[""])[0]}isImageUrl(e){if(S(e.type))return!0;const n=e.thumbUrl||e.url||"";if(!n)return!1;const o=this.extname(n);return!(!/^data:image\//.test(n)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(o))||!/^data:/.test(n)&&!o}getIconType(e){return this.showPic?e.isUploading||!e.thumbUrl&&!e.url?"uploading":"thumbnail":""}previewImage(e){if(!S(e.type)||!this.platform.isBrowser)return(0,v.of)("");const n=this.doc.createElement("canvas");n.width=C,n.height=C,n.style.cssText="position: fixed; left: 0; top: 0; width: 200px; height: 200px; z-index: 9999; display: none;",this.doc.body.appendChild(n);const o=n.getContext("2d"),s=new Image,l=URL.createObjectURL(e);return s.src=l,(0,I.w)(s,"load").pipe((0,L.k)(()=>{const{width:p,height:c}=s;let d=C,m=C,g=0,_=0;p<c?(m=c*(C/p),_=-(m-d)/2):(d=p*(C/c),g=-(d-m)/2);try{o.drawImage(s,g,_,d,m)}catch{}const u=n.toDataURL();return this.doc.body.removeChild(n),URL.revokeObjectURL(l),u}))}genThumb(){if(!this.platform.isBrowser)return;const e=window;!this.showPic||typeof document>"u"||typeof e>"u"||!e.FileReader||!e.File||this.list.filter(n=>n.originFileObj instanceof File&&void 0===n.thumbUrl).forEach(n=>{n.thumbUrl="";const o=(this.previewFile?this.previewFile(n):this.previewImage(n.originFileObj)).pipe((0,U.a)(this.destroy$));this.ngZone.runOutsideAngular(()=>{o.subscribe(s=>{this.ngZone.run(()=>{n.thumbUrl=s,this.detectChanges()})})})})}showDownload(e){return!(!this.icons.showDownloadIcon||"done"!==e.status)}fixData(){this.list.forEach(e=>{e.isUploading="uploading"===e.status,e.message=this.genErr(e),e.linkProps="string"==typeof e.linkProps?JSON.parse(e.linkProps):e.linkProps,e.isImageUrl=this.previewIsImage?this.previewIsImage(e):this.isImageUrl(e),e.iconType=this.getIconType(e),e.showDownload=this.showDownload(e)})}handlePreview(e,n){if(this.onPreview)return n.preventDefault(),this.onPreview(e)}handleRemove(e,n){n.preventDefault(),this.onRemove&&this.onRemove(e)}handleDownload(e){"function"==typeof this.onDownload?this.onDownload(e):e.url&&window.open(e.url)}constructor(e,n,o,s){this.cdr=e,this.doc=n,this.ngZone=o,this.platform=s,this.list=[],this.locale={},this.iconRender=null,this.dir="ltr",this.destroy$=new G.E}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(t.kD9),t.GI1(h.Ud),t.GI1(t.WW2),t.GI1(K.WU))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(n,o){2&n&&t.eAK("ant-upload-list-rtl","rtl"===o.dir)("ant-upload-list-text","text"===o.listType)("ant-upload-list-picture","picture"===o.listType)("ant-upload-list-picture-card","picture-card"===o.listType)},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],standalone:!0,features:[t.SYr,t.UHJ],decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],["nz-tooltip","",3,"nzTooltipTitle"],["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],["class","ant-upload-list-item-actions",4,"ngIf"],["class","ant-upload-list-item-progress",4,"ngIf"],[3,"ngSwitch"],["class","ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file",4,"ngSwitchCase"],["class","ant-upload-list-item-thumbnail","target","_blank","rel","noopener noreferrer",3,"ant-upload-list-item-file","href","click",4,"ngSwitchCase"],["class","ant-upload-text-icon",4,"ngSwitchDefault"],["noImageThumbTpl",""],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"href","click"],["class","ant-upload-list-item-image",3,"src",4,"ngIf","ngIfElse"],[1,"ant-upload-list-item-image",3,"src"],[1,"ant-upload-text-icon"],[4,"ngIf","ngIfElse"],["customIconRender",""],["iconNodeFileIcon",""],[4,"ngSwitchCase"],["nz-icon","",3,"nzType",4,"ngSwitchDefault"],["nz-icon","","nzType","loading"],["nz-icon","",3,"nzType"],["nz-icon","","nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small","class","ant-upload-list-item-card-actions-btn",3,"click",4,"ngIf"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nz-icon","","nzType","delete"],["nz-icon","","nzType","download"],[3,"class",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","ant-upload-list-item-name",3,"href","click",4,"ngIf"],["class","ant-upload-list-item-name",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href","click"],[1,"ant-upload-list-item-name",3,"click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click",4,"ngIf"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href","ngStyle","click"],["nz-icon","","nzType","eye"],[1,"ant-upload-list-item-progress"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(n,o){1&n&&t.yuY(0,Pt,20,14,"div",0),2&n&&t.E7m("ngForOf",o.list)},dependencies:[h.ay,P.wZ,P.qG,h.Ko,h.XV,h.u_,h.UZ,h.Wm,b.Wy,b.If,R.EV,R.Ez,W.k,h.Qt,F.s,F.y],encapsulation:2,data:{animation:[(0,z.gV)("itemState",[(0,z.aK)(":enter",[(0,z.wb)({height:"0",width:"0",opacity:0}),(0,z.Cs)(150,(0,z.wb)({height:"*",width:"*",opacity:1}))]),(0,z.aK)(":leave",[(0,z.Cs)(150,(0,z.wb)({height:"0",width:"0",opacity:0}))])])]},changeDetection:0})}return i})(),$=(()=>{class i{set nzShowUploadList(e){this._showUploadList="boolean"==typeof e?(0,f.QR)(e):e}get nzShowUploadList(){return this._showUploadList}zipOptions(){"boolean"==typeof this.nzShowUploadList&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});const e=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&-1===e.findIndex(n=>"limit"===n.name)&&e.push({name:"limit",fn:n=>n.slice(-this.nzLimit)}),this.nzSize>0&&-1===e.findIndex(n=>"size"===n.name)&&e.push({name:"size",fn:n=>n.filter(o=>o.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&-1===e.findIndex(n=>"type"===n.name)){const n=this.nzFileType.split(",");e.push({name:"type",fn:o=>o.filter(s=>~n.indexOf(s.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:e,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}constructor(e,n,o,s,l){this.ngZone=e,this.document=n,this.cdr=o,this.i18n=s,this.directionality=l,this.destroy$=new G.E,this.dir="ltr",this.nzType="select",this.nzLimit=0,this.nzSize=0,this.nzDirectory=!1,this.nzOpenFileDialogOnClick=!0,this.nzFilter=[],this.nzFileList=[],this.nzDisabled=!1,this.nzListType="text",this.nzMultiple=!1,this.nzName="file",this._showUploadList=!0,this.nzShowButton=!0,this.nzWithCredentials=!1,this.nzIconRender=null,this.nzFileListRender=null,this.nzChange=new t._w7,this.nzFileListChange=new t._w7,this.onStart=p=>{this.nzFileList||(this.nzFileList=[]);const c=this.fileToObject(p);c.status="uploading",this.nzFileList=this.nzFileList.concat(c),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:c,fileList:this.nzFileList,type:"start"}),this.detectChangesList()},this.onProgress=(p,c)=>{const m=this.getFileItem(c,this.nzFileList);m.percent=p.percent,this.nzChange.emit({event:p,file:{...m},fileList:this.nzFileList,type:"progress"}),this.detectChangesList()},this.onSuccess=(p,c)=>{const d=this.nzFileList,m=this.getFileItem(c,d);m.status="done",m.response=p,this.nzChange.emit({file:{...m},fileList:d,type:"success"}),this.detectChangesList()},this.onError=(p,c)=>{const d=this.nzFileList,m=this.getFileItem(c,d);m.error=p,m.status="error",this.nzChange.emit({file:{...m},fileList:d,type:"error"}),this.detectChangesList()},this.onRemove=p=>{this.uploadComp.abort(p),p.status="removed";const c="function"==typeof this.nzRemove?this.nzRemove(p):null==this.nzRemove||this.nzRemove;(c instanceof T._?c:(0,v.of)(c)).pipe((0,Y.I)(d=>d)).subscribe(()=>{this.nzFileList=this.removeFileItem(p,this.nzFileList),this.nzChange.emit({file:p,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})},this.prefixCls="ant-upload",this.classList=[]}fileToObject(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e}}getFileItem(e,n){return n.filter(o=>o.uid===e.uid)[0]}removeFileItem(e,n){return n.filter(o=>o.uid!==e.uid)}fileDrop(e){e.type!==this.dragState&&(this.dragState=e.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}setClassMap(){let e=[];"drag"===this.nzType?(this.nzFileList.some(n=>"uploading"===n.status)&&e.push(`${this.prefixCls}-drag-uploading`),"dragover"===this.dragState&&e.push(`${this.prefixCls}-drag-hover`)):e=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...e,this.nzDisabled&&`${this.prefixCls}-disabled`||"","rtl"===this.dir&&`${this.prefixCls}-rtl`||""].filter(n=>!!n),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,U.a)(this.destroy$)).subscribe(e=>{this.dir=e,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe((0,U.a)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>(0,I.w)(this.document.body,"drop").pipe((0,U.a)(this.destroy$)).subscribe(e=>{e.preventDefault(),e.stopPropagation()}))}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(n){return new(n||i)(t.GI1(t.WW2),t.GI1(h.Ud),t.GI1(t.kD9),t.GI1(j.Sc),t.GI1(J.yG,8))};static#e=this.\u0275cmp=t.In1({type:i,selectors:[["nz-upload"]],viewQuery:function(n,o){if(1&n&&(t.CC$(Nt,5),t.CC$(St,5)),2&n){let s;t.wto(s=t.Gqi())&&(o.uploadComp=s.first),t.wto(s=t.Gqi())&&(o.listComp=s.first)}},hostVars:2,hostBindings:function(n,o){2&n&&t.eAK("ant-upload-picture-card-wrapper","picture-card"===o.nzListType)},inputs:{nzType:"nzType",nzLimit:"nzLimit",nzSize:"nzSize",nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:"nzDirectory",nzOpenFileDialogOnClick:"nzOpenFileDialogOnClick",nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:"nzDisabled",nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:"nzMultiple",nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:"nzShowButton",nzWithCredentials:"nzWithCredentials",nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],standalone:!0,features:[t.SYr,t.UHJ],ngContentSelectors:N,decls:11,vars:2,consts:[["list",""],["con",""],["btn",""],[4,"ngIf","ngIfElse"],["select",""],["pic",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir",4,"ngIf"],[4,"ngIf"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],["listComp",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["nz-upload-btn","",3,"options"],["uploadComp",""],[3,"ngTemplateOutlet"],[3,"ngClass","drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(n,o){if(1&n&&(t.kPM(),t.yuY(0,Bt,2,2,"ng-template",null,0,t.gJz)(2,Yt,1,0,"ng-template",null,1,t.gJz)(4,Wt,4,5,"ng-template",null,2,t.gJz)(6,Ht,7,4,"ng-container",3)(7,Zt,1,2,"ng-template",null,4,t.gJz)(9,ee,2,2,"ng-template",null,5,t.gJz)),2&n){const s=t.Gew(8);t.yG2(6),t.E7m("ngIf","drag"===o.nzType)("ngIfElse",s)}},dependencies:[M,h.u_,h.XV,h.QF,ne],encapsulation:2,changeDetection:0})}return(0,y.UN)([(0,f.Et)()],i.prototype,"nzLimit",void 0),(0,y.UN)([(0,f.Et)()],i.prototype,"nzSize",void 0),(0,y.UN)([(0,f.U7)()],i.prototype,"nzDirectory",void 0),(0,y.UN)([(0,f.U7)()],i.prototype,"nzOpenFileDialogOnClick",void 0),(0,y.UN)([(0,f.U7)()],i.prototype,"nzDisabled",void 0),(0,y.UN)([(0,f.U7)()],i.prototype,"nzMultiple",void 0),(0,y.UN)([(0,f.U7)()],i.prototype,"nzShowButton",void 0),(0,y.UN)([(0,f.U7)()],i.prototype,"nzWithCredentials",void 0),i})(),ie=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.a4G({type:i});static#n=this.\u0275inj=t.s3X({imports:[$,M]})}return i})()}}]);