import{a as et,b as tt}from"./chunk-AD5Q64SP.js";import{$a as Ne,Ab as I,Bb as Pe,Bf as Ge,Cb as k,Db as G,Ed as je,Fb as J,Fe as Ce,Ga as Q,Gc as Ve,Ha as ve,Ic as Ae,Jc as Be,Kc as qe,L as E,Lb as Ee,Lc as He,Ma as u,Mb as ke,N as ze,Nb as M,Pb as Me,Qa as L,Qb as $e,Ra as Fe,Sa as Le,Se as We,Tb as se,Tc as ue,Ub as $,Ue as Qe,V as xe,Va as m,Wc as fe,Xa as _,Y as C,Za as Ue,_a as be,a as ee,aa as y,ab as s,b as D,ba as w,bb as h,bc as b,cb as g,db as F,dc as pe,eb as Re,ee as H,ef as Xe,fa as ne,fb as De,ga as W,ha as ie,hc as ce,he,hf as Ze,ia as ye,if as Ye,ja as we,jb as Ie,k as S,kb as U,kd as V,lb as Oe,m as B,mb as N,na as oe,nb as Se,nc as de,ob as a,pa as Te,pb as ae,pc as P,qb as le,qc as me,sb as re,tb as X,th as Je,ua as q,ub as Z,uc as _e,vh as Ke,w as te,ya as p,yb as f,yd as K,zb as Y}from"./chunk-HVHL7L73.js";import{a as ge}from"./chunk-DAQOROHW.js";var rt=["file"],st=["nz-upload-btn",""],at=["*"],j=n=>({$implicit:n}),pt=()=>({opacity:.5,"pointer-events":"none"});function ct(n,l){}function dt(n,l){if(n&1&&(h(0,"div",15),u(1,ct,0,0,"ng-template",16),g()),n&2){let e=a(2).$implicit,t=f(5);I("ant-upload-list-item-file",!e.isUploading),p(),s("ngTemplateOutlet",t)("ngTemplateOutletContext",$(4,j,e))}}function mt(n,l){if(n&1&&F(0,"img",18),n&2){let e=a(3).$implicit;s("src",e.thumbUrl||e.url,q),L("alt",e.name)}}function _t(n,l){}function ut(n,l){if(n&1&&u(0,_t,0,0,"ng-template",16),n&2){let e=a(3).$implicit,t=f(5);s("ngTemplateOutlet",t)("ngTemplateOutletContext",$(2,j,e))}}function ft(n,l){if(n&1){let e=U();h(0,"a",17),N("click",function(i){y(e);let o=a(2).$implicit,r=a();return w(r.handlePreview(o,i))}),m(1,mt,1,2,"img",18)(2,ut,1,4,null,16),g()}if(n&2){let e=a(2).$implicit;I("ant-upload-list-item-file",!e.isImageUrl),s("href",e.url||e.thumbUrl,q),p(),_(e.isImageUrl?1:2)}}function ht(n,l){}function Ct(n,l){if(n&1&&(h(0,"div",14),u(1,ht,0,0,"ng-template",16),g()),n&2){let e=a(2).$implicit,t=f(5);p(),s("ngTemplateOutlet",t)("ngTemplateOutletContext",$(2,j,e))}}function gt(n,l){if(n&1&&m(0,dt,2,6,"div",12)(1,ft,3,4,"a",13)(2,Ct,2,4,"div",14),n&2){let e,t=a().$implicit;_((e=t.iconType)==="uploading"?0:e==="thumbnail"?1:2)}}function zt(n,l){n&1&&F(0,"nz-icon",20)}function xt(n,l){if(n&1&&F(0,"nz-icon",21),n&2){let e=a(3).$implicit;s("nzType",e.isImageUrl?"picture":"file")}}function yt(n,l){if(n&1&&m(0,zt,1,0,"nz-icon",20)(1,xt,1,1,"nz-icon",21),n&2){let e=a(2).$implicit;_(e.isUploading?0:1)}}function wt(n,l){if(n&1&&G(0),n&2){let e=a(5);J(" ",e.locale.uploading," ")}}function Tt(n,l){if(n&1&&F(0,"nz-icon",21),n&2){let e=a(3).$implicit;s("nzType",e.isImageUrl?"picture":"file")}}function vt(n,l){if(n&1&&m(0,wt,1,1)(1,Tt,1,1,"nz-icon",21),n&2){let e=a(2).$implicit;_(e.isUploading?0:1)}}function Ft(n,l){if(n&1&&F(0,"nz-icon",19),n&2){let e=a(2).$implicit;s("nzType",e.isUploading?"loading":"paper-clip")}}function Lt(n,l){if(n&1&&m(0,yt,2,1)(1,vt,2,1)(2,Ft,1,1,"nz-icon",19),n&2){let e;a(3);let t=M(0);_((e=t)==="picture"?0:e==="picture-card"?1:2)}}function Ut(n,l){}function bt(n,l){if(n&1&&u(0,Ut,0,0,"ng-template",16),n&2){let e=a().$implicit,t=a(2);s("ngTemplateOutlet",t.iconRender)("ngTemplateOutletContext",$(2,j,e))}}function Nt(n,l){if(n&1&&m(0,Lt,3,1)(1,bt,1,4,null,16),n&2){let e=a(2);_(e.iconRender?1:0)}}function Rt(n,l){if(n&1){let e=U();h(0,"button",23),N("click",function(i){y(e);let o=a(2).$implicit,r=a();return w(r.handleRemove(o,i))}),F(1,"nz-icon",24),g()}if(n&2){let e=a(3);L("title",e.locale.removeFile)}}function Dt(n,l){if(n&1&&m(0,Rt,2,1,"button",22),n&2){let e=a(2);_(e.icons.showRemoveIcon?0:-1)}}function It(n,l){if(n&1){let e=U();h(0,"button",23),N("click",function(){y(e);let i=a(2).$implicit,o=a();return w(o.handleDownload(i))}),F(1,"nz-icon",25),g()}if(n&2){let e=a(3);L("title",e.locale.downloadFile)}}function Ot(n,l){if(n&1&&m(0,It,2,1,"button",22),n&2){let e=a().$implicit;_(e.showDownload?0:-1)}}function St(n,l){}function Pt(n,l){}function Et(n,l){if(n&1&&(h(0,"span",27),u(1,St,0,0,"ng-template",10)(2,Pt,0,0,"ng-template",10),g()),n&2){a(2);let e=f(7),t=f(9);a();let i=M(0);I("picture",i==="picture"),p(),s("ngTemplateOutlet",t),p(),s("ngTemplateOutlet",e)}}function kt(n,l){if(n&1&&m(0,Et,3,4,"span",26),n&2){a(2);let e=M(0);_(e!=="picture-card"?0:-1)}}function Mt(n,l){if(n&1){let e=U();h(0,"a",30),N("click",function(i){y(e);let o=a(2).$implicit,r=a();return w(r.handlePreview(o,i))}),G(1),g()}if(n&2){let e=a(2).$implicit;s("href",e.url,q),L("title",e.name)("download",e.linkProps&&e.linkProps.download),p(),J(" ",e.name," ")}}function $t(n,l){if(n&1){let e=U();h(0,"span",31),N("click",function(i){y(e);let o=a(2).$implicit,r=a();return w(r.handlePreview(o,i))}),G(1),g()}if(n&2){let e=a(2).$implicit;L("title",e.name),p(),J(" ",e.name," ")}}function Vt(n,l){}function At(n,l){if(n&1&&(m(0,Mt,2,4,"a",28)(1,$t,2,2,"span",29),u(2,Vt,0,0,"ng-template",10)),n&2){let e=a().$implicit,t=f(11);_(e.url?0:1),p(2),s("ngTemplateOutlet",t)}}function Bt(n,l){}function qt(n,l){}function Ht(n,l){if(n&1){let e=U();h(0,"a",34),N("click",function(i){y(e);let o=a(3).$implicit,r=a();return w(r.handlePreview(o,i))}),F(1,"nz-icon",35),g()}if(n&2){let e=a(3).$implicit,t=a();Pe(e.url||e.thumbUrl?null:se(4,pt)),s("href",e.url||e.thumbUrl,q),L("title",t.locale.previewFile)}}function jt(n,l){}function Wt(n,l){if(n&1&&u(0,jt,0,0,"ng-template",10),n&2){a(3);let e=f(9);s("ngTemplateOutlet",e)}}function Qt(n,l){}function Xt(n,l){if(n&1&&(h(0,"span",32),m(1,Ht,2,5,"a",33),m(2,Wt,1,1,null,10),u(3,Qt,0,0,"ng-template",10),g()),n&2){let e=a(2).$implicit,t=f(7),i=a();p(),_(i.icons.showPreviewIcon?1:-1),p(),_(e.status==="done"?2:-1),p(),s("ngTemplateOutlet",t)}}function Zt(n,l){if(n&1&&m(0,Xt,4,3,"span",32),n&2){a(2);let e=M(0);_(e==="picture-card"?0:-1)}}function Yt(n,l){if(n&1&&(h(0,"div",11),F(1,"nz-progress",36),g()),n&2){let e=a().$implicit;p(),s("nzPercent",e.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function Gt(n,l){if(n&1){let e=U();h(0,"div")(1,"div",7),Le(function(){y(e);let i=a();return w(i.itemAnimationLeave())}),Fe(function(){y(e);let i=a();return w(i.itemAnimationEnter())}),u(2,gt,3,1,"ng-template",null,0,b)(4,Nt,2,1,"ng-template",null,1,b)(6,Dt,1,1,"ng-template",null,2,b)(8,Ot,1,1,"ng-template",null,3,b)(10,kt,1,1,"ng-template",null,4,b)(12,At,3,2,"ng-template",null,5,b),h(14,"div",8)(15,"span",9),u(16,Bt,0,0,"ng-template",10)(17,qt,0,0,"ng-template",10),g()(),m(18,Zt,1,1)(19,Yt,2,3,"div",11),g()()}if(n&2){let e=l.$implicit,t=f(3),i=f(13);a();let o=M(0);k(Me("ant-upload-list-",o,"-container")),p(),k($e("ant-upload-list-item ant-upload-list-item-",e.status," ant-upload-list-item-list-type-",o)),s("nzTooltipTitle",e.status==="error"?e.message:null),L("data-key",e.key),p(15),s("ngTemplateOutlet",t),p(),s("ngTemplateOutlet",i),p(),_(e.isUploading?19:18)}}var Jt=["uploadComp"],Kt=["listComp"],en=()=>[];function tn(n,l){if(n&1&&F(0,"nz-upload-list",6,3),n&2){let e=a(2);Y("display",e.nzShowUploadList?"":"none"),s("locale",e.locale)("listType",e.nzListType)("items",e.nzFileList||se(12,en))("icons",e.nzShowUploadList)("iconRender",e.nzIconRender)("previewFile",e.nzPreviewFile)("previewIsImage",e.nzPreviewIsImage)("onPreview",e.nzPreview)("onRemove",e.onRemove)("onDownload",e.nzDownload)}}function nn(n,l){n&1&&Ie(0)}function on(n,l){if(n&1&&u(0,nn,1,0,"ng-container",7),n&2){let e=a(2);s("ngTemplateOutlet",e.nzFileListRender)("ngTemplateOutletContext",$(2,j,e.nzFileList))}}function an(n,l){if(n&1&&(m(0,tn,2,13,"nz-upload-list",5),m(1,on,1,4,"ng-container")),n&2){let e=a();_(e.locale&&!e.nzFileListRender?0:-1),p(),_(e.nzFileListRender?1:-1)}}function ln(n,l){n&1&&le(0)}function rn(n,l){}function sn(n,l){if(n&1&&(h(0,"div")(1,"div",8,4),u(3,rn,0,0,"ng-template",9),g()()),n&2){let e=a(),t=f(3);k(e.classList()),Y("display",e.nzShowButton?"":"none"),I("ant-upload-rtl",e.dir()==="rtl"),p(),s("options",e._btnOptions),p(2),s("ngTemplateOutlet",t)}}function pn(n,l){}function cn(n,l){}function dn(n,l){if(n&1){let e=U();h(0,"div",10),N("drop",function(i){y(e);let o=a();return w(o.fileDrop(i))})("dragover",function(i){y(e);let o=a();return w(o.fileDrop(i))})("dragleave",function(i){y(e);let o=a();return w(o.fileDrop(i))}),h(1,"div",11,4)(3,"div",12),u(4,pn,0,0,"ng-template",9),g()()(),u(5,cn,0,0,"ng-template",9)}if(n&2){let e=a(),t=f(1),i=f(3);k(e.classList()),I("ant-upload-rtl",e.dir()==="rtl"),p(),s("options",e._btnOptions),p(3),s("ngTemplateOutlet",i),p(),s("ngTemplateOutlet",t)}}function mn(n,l){}function _n(n,l){}function un(n,l){if(n&1&&u(0,mn,0,0,"ng-template",9)(1,_n,0,0,"ng-template",9),n&2){a(2);let e=f(1),t=f(5);s("ngTemplateOutlet",e),p(),s("ngTemplateOutlet",t)}}function fn(n,l){}function hn(n,l){}function Cn(n,l){if(n&1&&u(0,fn,0,0,"ng-template",9)(1,hn,0,0,"ng-template",9),n&2){a(2);let e=f(1),t=f(5);s("ngTemplateOutlet",t),p(),s("ngTemplateOutlet",e)}}function gn(n,l){if(n&1&&m(0,un,2,2)(1,Cn,2,2),n&2){let e=a();_(e.nzListType==="picture-card"?0:1)}}var zn=(()=>{class n{reqs={};destroyed=!1;file;options;onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(e){if(this.options.disabled||e.type==="dragover"){e.preventDefault();return}if(this.options.directory)this.traverseFileTree(e.dataTransfer.items);else{let t=Array.prototype.slice.call(e.dataTransfer.files).filter(i=>this.attrAccept(i,this.options.accept));t.length&&this.uploadFiles(t)}e.preventDefault()}onChange(e){if(this.options.disabled)return;let t=e.target;this.uploadFiles(t.files),t.value=""}traverseFileTree(e){let t=(i,o)=>{i.isFile?i.file(r=>{this.attrAccept(r,this.options.accept)&&this.uploadFiles([r])}):i.isDirectory&&i.createReader().readEntries(d=>{for(let z of d)t(z,`${o}${i.name}/`)})};for(let i of e)t(i.webkitGetAsEntry(),"")}attrAccept(e,t){if(e&&t){let i=Array.isArray(t)?t:t.split(","),o=`${e.name}`,r=`${e.type}`,d=r.replace(/\/.*$/,"");return i.some(z=>{let x=z.trim();return x.charAt(0)==="."?o.toLowerCase().indexOf(x.toLowerCase(),o.toLowerCase().length-x.toLowerCase().length)!==-1:/\/\*$/.test(x)?d===x.replace(/\/.*$/,""):r===x})}return!0}attachUid(e){return e.uid||(e.uid=Math.random().toString(36).substring(2)),e}uploadFiles(e){let t=S(Array.prototype.slice.call(e));this.options.filters&&this.options.filters.forEach(i=>{t=t.pipe(E(o=>{let r=i.fn(o);return r instanceof D?r:S(r)}))}),t.subscribe({next:i=>{i.forEach(o=>{this.attachUid(o),this.upload(o,i)})},error:i=>{K("Unhandled upload filter error",i)}})}upload(e,t){if(!this.options.beforeUpload)return this.post(e);let i=this.options.beforeUpload(e,t),o=d=>{let z=Object.prototype.toString.call(d);typeof d!="boolean"&&(z==="[object File]"||z==="[object Blob]")?(d.uid=e.uid,this.post(e,d)):d&&this.post(e)},r=d=>{K("Unhandled upload beforeUpload error",d)};if(i instanceof D)i.subscribe({next:o,error:r});else if(i instanceof Promise)i.then(o).catch(r);else if(i)return this.post(e)}post(e,t){if(this.destroyed)return;let i=S(t||e),o,r=this.options,{uid:d}=e,{action:z,data:x,headers:R,transformFile:A}=r,v={action:typeof z=="string"?z:"",name:r.name,headers:R,file:e,postFile:e,data:x,withCredentials:r.withCredentials,onProgress:r.onProgress?c=>{r.onProgress(c,e)}:void 0,onSuccess:(c,T)=>{this.clean(d),r.onSuccess(c,e,T)},onError:c=>{this.clean(d),r.onError(c,e)}};if(typeof z=="function"){let c=z(e);c instanceof D?i=i.pipe(E(()=>c),B(T=>(v.action=T,e))):v.action=c}if(typeof A=="function"){let c=A(e);i=i.pipe(E(()=>c instanceof D?c:S(c)),ze(T=>o=T))}if(typeof x=="function"){let c=x(e);c instanceof D?i=i.pipe(te(()=>!t),E(()=>c),B(T=>(v.data=T,o??e))):v.data=c}if(typeof R=="function"){let c=R(e);c instanceof D?i=i.pipe(E(()=>c),B(T=>(v.headers=T,o??e))):v.headers=c}i.subscribe(c=>{v.postFile=c;let T=(r.customRequest||this.xhr).call(this,v);T instanceof ee||K("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[d]=T,r.onStart(e)})}xhr(e){let t=new FormData;e.data&&Object.keys(e.data).map(o=>{t.append(o,e.data[o])}),t.append(e.name,e.postFile),e.headers||(e.headers={}),e.headers["X-Requested-With"]!==null?e.headers["X-Requested-With"]="XMLHttpRequest":delete e.headers["X-Requested-With"];let i=new Ae("POST",e.action,t,{reportProgress:!0,withCredentials:e.withCredentials,headers:new Ve(e.headers)});return this.http.request(i).subscribe({next:o=>{o.type===Be.UploadProgress?(o.total>0&&(o.percent=o.loaded/o.total*100),e.onProgress(o,e.file)):o instanceof qe&&e.onSuccess(o.body,e.file,o)},error:o=>{this.abort(e.file),e.onError(o,e.file)}})}clean(e){let t=this.reqs[e];t instanceof ee&&t.unsubscribe(),delete this.reqs[e]}abort(e){e?this.clean(e&&e.uid):Object.keys(this.reqs).forEach(t=>this.clean(t))}http=C(He,{optional:!0});elementRef=C(Te);destroyRef=C(W);constructor(){if(!this.http)throw new Error("Not found 'HttpClient', You can configure 'HttpClient' with 'provideHttpClient()' in your root module.");this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.abort()})}ngOnInit(){H(this.elementRef.nativeElement,"click").pipe(V(this.destroyRef)).subscribe(()=>this.onClick()),H(this.elementRef.nativeElement,"keydown").pipe(V(this.destroyRef)).subscribe(e=>{this.options.disabled||(e.key==="Enter"||e.keyCode===13)&&this.onClick()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Q({type:n,selectors:[["","nz-upload-btn",""]],viewQuery:function(t,i){if(t&1&&re(rt,7),t&2){let o;X(o=Z())&&(i.file=o.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(t,i){t&1&&N("drop",function(r){return i.onFileDrop(r)})("dragover",function(r){return i.onFileDrop(r)}),t&2&&(L("tabindex","0")("role","button"),I("ant-upload-disabled",i.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],attrs:st,ngContentSelectors:at,decls:3,vars:6,consts:[["file",""],["type","file",3,"change","multiple"]],template:function(t,i){if(t&1){let o=U();ae(),Re(0,"input",1,0),Se("change",function(d){return y(o),w(i.onChange(d))}),De(),le(2)}t&2&&(Y("display","none"),Oe("multiple",i.options.multiple),L("accept",i.options.accept)("directory",i.options.directory?"directory":null)("webkitdirectory",i.options.directory?"webkitdirectory":null))},encapsulation:2})}return n})(),nt=n=>!!n&&n.indexOf("image/")===0,it="ant-upload-list",O=200,lt=(()=>{class n{list=[];listType=ce("text");locale={};set items(e){this.list=e}icons;onPreview;onRemove;onDownload;previewFile;previewIsImage;iconRender=null;document=C(ne);destroyRef=C(W);ngZone=C(ye);cdr=C(de);platform=C(fe);dir=C(ue).valueSignal;class=pe(()=>{let e=[it,this.generateClass(this.listType())];return this.dir()==="rtl"&&e.push(this.generateClass("rtl")),e});showPic=pe(()=>this.listType()==="picture"||this.listType()==="picture-card");itemAnimationEnter=Ce(()=>`ant-upload-${this.showPic()?"animate-inline":"animate"}-enter`);itemAnimationLeave=Ce(()=>`ant-upload-${this.showPic()?"animate-inline":"animate"}-leave`);genErr(e){return e.response&&typeof e.response=="string"?e.response:e.error&&e.error.statusText||this.locale.uploadError}extname(e){let t=e.split("/"),o=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(o)||[""])[0]}isImageUrl(e){if(nt(e.type))return!0;let t=e.thumbUrl||e.url||"";if(!t)return!1;let i=this.extname(t);return/^data:image\//.test(t)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(i)?!0:/^data:/.test(t)?!1:!i}getIconType(e){return this.showPic()?e.isUploading||!e.thumbUrl&&!e.url?"uploading":"thumbnail":""}previewImage(e){if(!nt(e.type)||!this.platform.isBrowser)return S("");let t=this.document.createElement("canvas");t.width=O,t.height=O,t.style.cssText=`position: fixed; left: 0; top: 0; width: ${O}px; height: ${O}px; z-index: 9999; display: none;`,this.document.body.appendChild(t);let i=t.getContext("2d"),o=new Image,r=URL.createObjectURL(e);return o.src=r,H(o,"load").pipe(B(()=>{let{width:d,height:z}=o,x=O,R=O,A=0,v=0;d<z?(R=z*(O/d),v=-(R-x)/2):(x=d*(O/z),A=-(x-R)/2);try{i.drawImage(o,A,v,x,R)}catch{}let c=t.toDataURL();return this.document.body.removeChild(t),URL.revokeObjectURL(r),c}))}genThumb(){if(!this.platform.isBrowser)return;let e=window;!this.showPic()||typeof document>"u"||typeof e>"u"||!e.FileReader||!e.File||this.list.filter(t=>t.originFileObj instanceof File&&t.thumbUrl===void 0).forEach(t=>{t.thumbUrl="";let i=(this.previewFile?this.previewFile(t):this.previewImage(t.originFileObj)).pipe(V(this.destroyRef));this.ngZone.runOutsideAngular(()=>{i.subscribe(o=>{this.ngZone.run(()=>{t.thumbUrl=o,this.detectChanges()})})})})}showDownload(e){return!!(this.icons.showDownloadIcon&&e.status==="done")}fixData(){this.list.forEach(e=>{e.isUploading=e.status==="uploading",e.message=this.genErr(e),e.linkProps=typeof e.linkProps=="string"?JSON.parse(e.linkProps):e.linkProps,e.isImageUrl=this.previewIsImage?this.previewIsImage(e):this.isImageUrl(e),e.iconType=this.getIconType(e),e.showDownload=this.showDownload(e)})}handlePreview(e,t){if(this.onPreview)return t.preventDefault(),this.onPreview(e)}handleRemove(e,t){t.preventDefault(),this.onRemove&&this.onRemove(e)}handleDownload(e){typeof this.onDownload=="function"?this.onDownload(e):e.url&&window.open(e.url)}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}generateClass(e){return he(it,e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Q({type:n,selectors:[["nz-upload-list"]],hostVars:2,hostBindings:function(t,i){t&2&&k(i.class())},inputs:{listType:[1,"listType"],locale:"locale",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender"},exportAs:["nzUploadList"],features:[oe],decls:3,vars:1,consts:[["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[3,"class"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],[1,"ant-upload-list-item-progress"],[1,"ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file","href"],[1,"ant-upload-text-icon"],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"click","href"],[1,"ant-upload-list-item-image",3,"src"],[3,"nzType"],["nzType","loading"],["nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nzType","delete"],["nzType","download"],[1,"ant-upload-list-item-card-actions",3,"picture"],[1,"ant-upload-list-item-card-actions"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href"],[1,"ant-upload-list-item-name"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"click","href"],[1,"ant-upload-list-item-name",3,"click"],[1,"ant-upload-list-item-actions"],["target","_blank","rel","noopener noreferrer",3,"href","style"],["target","_blank","rel","noopener noreferrer",3,"click","href"],["nzType","eye"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(t,i){t&1&&(Ee(0),be(1,Gt,20,12,"div",6,Ue)),t&2&&(ke(i.listType()),p(),Ne(i.list))},dependencies:[Ke,Je,_e,Qe,We,Ye,Ze,Xe,tt,et],encapsulation:2,changeDetection:0})}return n})(),ot="ant-upload",xn=(()=>{class n{static ngAcceptInputType_nzShowUploadList;cdr=C(de);i18n=C(Ge);destroyRef=C(W);document=C(ne);platform=C(fe);dir=C(ue).valueSignal;uploadComp;listComp;locale;nzType="select";nzLimit=0;nzSize=0;nzFileType;nzAccept;nzAction;nzDirectory=!1;nzOpenFileDialogOnClick=!0;nzBeforeUpload;nzCustomRequest;nzData;nzFilter=[];nzFileList=[];nzDisabled=!1;nzHeaders;nzListType="text";nzMultiple=!1;nzName="file";_showUploadList=!0;set nzShowUploadList(e){this._showUploadList=typeof e=="boolean"?je(e):e}get nzShowUploadList(){return this._showUploadList}nzShowButton=!0;nzWithCredentials=!1;nzRemove;nzPreview;nzPreviewFile;nzPreviewIsImage;nzTransformFile;nzDownload;nzIconRender=null;nzFileListRender=null;nzMaxCount=ce();nzChange=new ie;nzFileListChange=new ie;_btnOptions;zipOptions(){typeof this.nzShowUploadList=="boolean"&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});let e=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&e.findIndex(t=>t.name==="limit")===-1&&e.push({name:"limit",fn:t=>t.slice(-this.nzLimit)}),this.nzSize>0&&e.findIndex(t=>t.name==="size")===-1&&e.push({name:"size",fn:t=>t.filter(i=>i.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&e.findIndex(t=>t.name==="type")===-1){let t=this.nzFileType.split(",");e.push({name:"type",fn:i=>i.filter(o=>~t.indexOf(o.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:e,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}fileToObject(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e}}getFileItem(e,t){return t.filter(i=>i.uid===e.uid)[0]}removeFileItem(e,t){return t.filter(i=>i.uid!==e.uid)}onStart=e=>{let t=this.nzMaxCount();this.nzFileList||(this.nzFileList=[]);let i=this.fileToObject(e);i.status="uploading",t===1?this.nzFileList=[i]:(!t||t<=0||this.nzFileList.length<t)&&(this.nzFileList=[...this.nzFileList,i]),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:i,fileList:this.nzFileList,type:"start"}),this.detectChangesList()};onProgress=(e,t)=>{let i=this.nzFileList,o=this.getFileItem(t,i);o&&(o.percent=e.percent,this.nzChange.emit({event:e,file:o,fileList:this.nzFileList,type:"progress"}),this.detectChangesList())};onSuccess=(e,t)=>{let i=this.nzFileList,o=this.getFileItem(t,i);o&&(o.status="done",o.response=e,this.nzChange.emit({file:o,fileList:i,type:"success"}),this.detectChangesList())};onError=(e,t)=>{let i=this.nzFileList,o=this.getFileItem(t,i);o&&(o.error=e,o.status="error",this.nzChange.emit({file:ge({},o),fileList:i,type:"error"}),this.detectChangesList())};dragState;fileDrop(e){e.type!==this.dragState&&(this.dragState=e.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}onRemove=e=>{this.uploadComp.abort(e),e.status="removed";let t=typeof this.nzRemove=="function"?this.nzRemove(e):this.nzRemove==null?!0:this.nzRemove;(t instanceof D?t:S(t)).pipe(te(i=>i)).subscribe(()=>{this.nzFileList=this.removeFileItem(e,this.nzFileList),this.nzChange.emit({file:e,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})};classList=we([]);setClassMap(){let e=[];this.nzType==="drag"?(this.nzFileList.some(t=>t.status==="uploading")&&e.push(this.generateClass("drag-uploading")),this.dragState==="dragover"&&e.push(this.generateClass("drag-hover"))):e=[this.generateClass(`select-${this.nzListType}`)],this.nzDisabled&&e.push(this.generateClass("disabled")),this.classList.set([ot,this.generateClass(this.nzType),...e])}ngOnInit(){this.i18n.localeChange.pipe(V(this.destroyRef)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.platform.FIREFOX&&H(this.document.body,"drop").pipe(V(this.destroyRef)).subscribe(e=>{e.preventDefault(),e.stopPropagation()})}ngOnChanges(){this.zipOptions().setClassMap()}generateClass(e){return he(ot,e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Q({type:n,selectors:[["nz-upload"]],viewQuery:function(t,i){if(t&1&&re(Jt,5)(Kt,5),t&2){let o;X(o=Z())&&(i.uploadComp=o.first),X(o=Z())&&(i.listComp=o.first)}},hostVars:2,hostBindings:function(t,i){t&2&&I("ant-upload-picture-card-wrapper",i.nzListType==="picture-card")},inputs:{nzType:"nzType",nzLimit:[2,"nzLimit","nzLimit",me],nzSize:[2,"nzSize","nzSize",me],nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:[2,"nzDirectory","nzDirectory",P],nzOpenFileDialogOnClick:[2,"nzOpenFileDialogOnClick","nzOpenFileDialogOnClick",P],nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:[2,"nzDisabled","nzDisabled",P],nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:[2,"nzMultiple","nzMultiple",P],nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:[2,"nzShowButton","nzShowButton",P],nzWithCredentials:[2,"nzWithCredentials","nzWithCredentials",P],nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender",nzMaxCount:[1,"nzMaxCount"]},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[oe],ngContentSelectors:at,decls:8,vars:1,consts:[["list",""],["con",""],["btn",""],["listComp",""],["uploadComp",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-upload-btn","",3,"options"],[3,"ngTemplateOutlet"],[3,"drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(t,i){t&1&&(ae(),u(0,an,2,2,"ng-template",null,0,b)(2,ln,1,0,"ng-template",null,1,b)(4,sn,4,8,"ng-template",null,2,b),m(6,dn,6,7)(7,gn,2,1)),t&2&&(p(6),_(i.nzType==="drag"?6:7))},dependencies:[lt,_e,zn],encapsulation:2,changeDetection:0})}return n})(),Gn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=ve({type:n});static \u0275inj=xe({imports:[xn,lt]})}return n})();export{xn as a,Gn as b};
