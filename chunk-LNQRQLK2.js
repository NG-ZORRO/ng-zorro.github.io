import{b as He,c as I,d as Pe,e as Fe}from"./chunk-QUF2FYQQ.js";import{a as Ae,b as Ke}from"./chunk-LX5AX5AI.js";import{Ca as re,Ea as oe,Eb as Q,Fa as Me,Gb as Le,Hb as Ve,La as ye,Pa as R,Qa as Oe,hc as Be,ia as E,sb as Ie,ua as Ee,va as j}from"./chunk-U67ZLHSB.js";import{Aa as C,Ac as De,Ba as S,Bc as X,Cc as ee,Gc as ne,Ib as v,Jb as Ce,Ka as h,Kd as ie,La as ge,Mb as Se,Ob as y,Pa as ue,Pb as m,Sc as xe,Uc as te,Vb as Y,Vc as U,Wb as z,Xb as G,Yb as u,Yc as Ne,Zb as F,aa as b,ad as be,bd as we,cc as _e,dc as D,ec as Te,f as H,ga as he,gc as W,ha as ze,hc as J,hd as B,ia as pe,ic as x,jc as N,kc as _,l as P,lc as A,ld as a,m as M,mc as K,md as ve,na as L,nb as me,oc as $,rc as V,tb as g,tc as l,ub as k,xa as O,zb as fe,zc as ke}from"./chunk-6WFMSBDD.js";function en(i,c){if(i&1&&_(0,"span"),i&2){let e=c.$index,t=l();u("ant-tree-indent-unit",!t.nzSelectMode)("ant-select-tree-indent-unit",t.nzSelectMode)("ant-select-tree-indent-unit-start",t.nzSelectMode&&t.nzIsStart[e])("ant-tree-indent-unit-start",!t.nzSelectMode&&t.nzIsStart[e])("ant-select-tree-indent-unit-end",t.nzSelectMode&&t.nzIsEnd[e])("ant-tree-indent-unit-end",!t.nzSelectMode&&t.nzIsEnd[e])}}var $e=["builtin",""],ae=(i,c)=>({$implicit:i,origin:c});function nn(i,c){if(i&1&&(A(0),_(1,"nz-icon",2),K()),i&2){let e=l(3);g(),u("ant-select-tree-switcher-icon",e.nzSelectMode)("ant-tree-switcher-icon",!e.nzSelectMode)}}function tn(i,c){if(i&1&&m(0,nn,2,4,"ng-container",1),i&2){let e=l(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",U(2,ae,e.context,e.context.origin))}}function rn(i,c){i&1&&_(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function on(i,c){if(i&1&&m(0,tn,1,5,"ng-container")(1,rn,1,1,"nz-icon",0),i&2){let e=l();D(e.isLoading?1:0)}}function an(i,c){if(i&1&&_(0,"nz-icon",3),i&2){let e=l(4);z("nzType",e.isSwitcherOpen?"minus-square":"plus-square")}}function sn(i,c){i&1&&_(0,"nz-icon",4)}function dn(i,c){if(i&1&&(A(0),m(1,an,1,1,"nz-icon",3)(2,sn,1,0,"nz-icon",4),K()),i&2){let e=l(3);g(),D(e.isShowLineIcon?1:2)}}function cn(i,c){if(i&1&&m(0,dn,3,1,"ng-container",1),i&2){let e=l(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",U(2,ae,e.context,e.context.origin))}}function ln(i,c){i&1&&_(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function hn(i,c){if(i&1&&m(0,cn,1,5,"ng-container")(1,ln,1,1,"nz-icon",0),i&2){let e=l();D(e.isLoading?1:0)}}function zn(i,c){}function pn(i,c){if(i&1&&(x(0,"span")(1,"span"),_(2,"nz-icon",4),N()()),i&2){let e=l(2);u("ant-tree-icon__open",e.isSwitcherOpen)("ant-tree-icon__close",e.isSwitcherClose)("ant-tree-icon_loading",e.isLoading)("ant-select-tree-iconEle",e.selectMode)("ant-tree-iconEle",!e.selectMode),g(),u("ant-select-tree-iconEle",e.selectMode)("ant-select-tree-icon__customize",e.selectMode)("ant-tree-iconEle",!e.selectMode)("ant-tree-icon__customize",!e.selectMode),g(),z("nzType",e.icon)}}function gn(i,c){if(i&1&&(m(0,pn,3,19,"span",2),_(1,"span",3),Ne(2,"nzHighlight")),i&2){let e=l();D(e.icon&&e.showIcon?0:-1),g(),z("innerHTML",be(2,2,e.title,e.matchedValue,"i","font-highlight"),me)}}function un(i,c){if(i&1&&_(0,"nz-tree-drop-indicator",1),i&2){let e=l();z("dropPosition",e.dragPosition)("level",e.context.level)}}function mn(i,c){if(i&1){let e=$();x(0,"nz-tree-node-switcher",4),V("click",function(n){C(e);let d=l();return S(d.clickExpand(n))}),N()}if(i&2){let e=l();z("nzShowExpand",e.nzShowExpand)("nzShowLine",e.nzShowLine)("nzExpandedIcon",e.nzExpandedIcon)("nzSelectMode",e.nzSelectMode)("context",e.nzTreeNode)("isLeaf",e.isLeaf)("isExpanded",e.isExpanded)("isLoading",e.isLoading)}}function fn(i,c){if(i&1){let e=$();x(0,"nz-tree-node-checkbox",5),V("click",function(n){C(e);let d=l();return S(d.clickCheckbox(n))}),N()}if(i&2){let e=l();z("nzSelectMode",e.nzSelectMode)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisabled",e.isDisabled)("isDisableCheckbox",e.isDisableCheckbox)}}var Cn=["nzTreeTemplate"],Ue=i=>({$implicit:i});function Sn(i,c){}function _n(i,c){if(i&1&&(A(0),m(1,Sn,0,0,"ng-template",9),K()),i&2){let e=c.$implicit;l(2);let t=ne(9);g(),z("ngTemplateOutlet",t)("ngTemplateOutletContext",te(2,Ue,e))}}function Tn(i,c){if(i&1&&(x(0,"cdk-virtual-scroll-viewport",7),m(1,_n,2,4,"ng-container",8),N()),i&2){let e=l();G("height",e.nzVirtualHeight),u("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("itemSize",e.nzVirtualItemSize)("minBufferPx",e.nzVirtualMinBufferPx)("maxBufferPx",e.nzVirtualMaxBufferPx),g(),z("cdkVirtualForOf",e.nzFlattenNodes)("cdkVirtualForTrackBy",e.trackByFlattenNode)}}function kn(i,c){}function Dn(i,c){if(i&1&&m(0,kn,0,0,"ng-template",9),i&2){let e=c.$implicit;l(2);let t=ne(9);z("ngTemplateOutlet",t)("ngTemplateOutletContext",te(2,Ue,e))}}function xn(i,c){if(i&1&&(x(0,"div",10),W(1,Dn,1,4,null,9,_e().trackByFlattenNode,!0),N()),i&2){let e=l();u("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("@.disabled",e.beforeInit||!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("@treeCollapseMotion",e.nzFlattenNodes.length),g(),J(e.nzFlattenNodes)}}function Nn(i,c){if(i&1){let e=$();x(0,"nz-tree-node",11),V("nzExpandChange",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzClick",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzDblClick",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzContextMenu",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzCheckboxChange",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragStart",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragEnter",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragOver",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragLeave",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragEnd",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDrop",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))}),N()}if(i&2){let e=c.$implicit,t=l();z("icon",e.icon)("title",e.title)("isLoading",e.isLoading)("isSelected",e.isSelected)("isDisabled",e.isDisabled)("isMatched",e.isMatched)("isExpanded",e.isExpanded)("isLeaf",e.isLeaf)("isStart",e.isStart)("isEnd",e.isEnd)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisableCheckbox",e.isDisableCheckbox)("isSelectable",e.isSelectable)("canHide",e.canHide)("nzTreeNode",e)("nzSelectMode",t.nzSelectMode)("nzShowLine",t.nzShowLine)("nzExpandedIcon",t.nzExpandedIcon)("nzDraggable",t.nzDraggable)("nzCheckable",t.nzCheckable)("nzShowExpand",t.nzShowExpand)("nzAsyncData",t.nzAsyncData)("nzSearchValue",t.nzSearchValue)("nzHideUnMatched",t.nzHideUnMatched)("nzBeforeDrop",t.nzBeforeDrop)("nzShowIcon",t.nzShowIcon)("nzTreeTemplate",t.nzTreeTemplate||t.nzTreeTemplateChild)}}var bn=(()=>{class i{cdr;dropPosition;level=1;direction="ltr";style={};constructor(e){this.cdr=e}ngOnChanges(e){this.renderIndicator(this.dropPosition,this.direction)}renderIndicator(e,t="ltr"){let d=t==="ltr"?"left":"right",f=t==="ltr"?"right":"left",w={[d]:"4px",[f]:"0px"};switch(e){case-1:w.top="-3px";break;case 1:w.bottom="-3px";break;case 0:w.bottom="-3px",w[d]="28px";break;default:w.display="none";break}this.style=w,this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)(k(B))};static \u0275cmp=v({type:i,selectors:[["nz-tree-drop-indicator"]],hostVars:4,hostBindings:function(t,n){t&2&&(F(n.style),u("ant-tree-drop-indicator",!0))},inputs:{dropPosition:"dropPosition",level:[2,"level","level",ve],direction:"direction"},exportAs:["NzTreeDropIndicator"],features:[y,O],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0})}return i})(),wn=(()=>{class i{nzTreeLevel=0;nzIsStart=[];nzIsEnd=[];nzSelectMode=!1;listOfUnit=[];ngOnChanges(e){let{nzTreeLevel:t}=e;t&&(this.listOfUnit=[...new Array(t.currentValue||0)])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nz-tree-indent"]],hostVars:5,hostBindings:function(t,n){t&2&&(Y("aria-hidden",!0),u("ant-tree-indent",!n.nzSelectMode)("ant-select-tree-indent",n.nzSelectMode))},inputs:{nzTreeLevel:"nzTreeLevel",nzIsStart:"nzIsStart",nzIsEnd:"nzIsEnd",nzSelectMode:"nzSelectMode"},exportAs:["nzTreeIndent"],features:[O],decls:2,vars:0,consts:[[3,"ant-tree-indent-unit","ant-select-tree-indent-unit","ant-select-tree-indent-unit-start","ant-tree-indent-unit-start","ant-select-tree-indent-unit-end","ant-tree-indent-unit-end"]],template:function(t,n){t&1&&W(0,en,1,12,"span",0,Te),t&2&&J(n.listOfUnit)},encapsulation:2,changeDetection:0})}return i})(),vn=(()=>{class i{nzSelectMode=!1;isChecked;isHalfChecked;isDisabled;isDisableCheckbox;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nz-tree-node-checkbox","builtin",""]],hostVars:16,hostBindings:function(t,n){t&2&&u("ant-select-tree-checkbox",n.nzSelectMode)("ant-select-tree-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-checkbox-disabled",n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))("ant-tree-checkbox",!n.nzSelectMode)("ant-tree-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-checkbox-disabled",!n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))},inputs:{nzSelectMode:"nzSelectMode",isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisabled:[2,"isDisabled","isDisabled",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a]},features:[y],attrs:$e,decls:1,vars:4,template:function(t,n){t&1&&_(0,"span"),t&2&&u("ant-tree-checkbox-inner",!n.nzSelectMode)("ant-select-tree-checkbox-inner",n.nzSelectMode)},encapsulation:2,changeDetection:0})}return i})(),je=(()=>{class i{nzShowExpand;nzShowLine;nzExpandedIcon;nzSelectMode=!1;context;isLeaf;isLoading;isExpanded;get isShowLineIcon(){return!this.isLeaf&&!!this.nzShowLine}get isShowSwitchIcon(){return!this.isLeaf&&!this.nzShowLine}get isSwitcherOpen(){return!!this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nz-tree-node-switcher"]],hostVars:16,hostBindings:function(t,n){t&2&&u("ant-select-tree-switcher",n.nzSelectMode)("ant-select-tree-switcher-noop",n.nzSelectMode&&n.isLeaf)("ant-select-tree-switcher_open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-switcher_close",n.nzSelectMode&&n.isSwitcherClose)("ant-tree-switcher",!n.nzSelectMode)("ant-tree-switcher-noop",!n.nzSelectMode&&n.isLeaf)("ant-tree-switcher_open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-switcher_close",!n.nzSelectMode&&n.isSwitcherClose)},inputs:{nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzExpandedIcon:"nzExpandedIcon",nzSelectMode:"nzSelectMode",context:"context",isLeaf:[2,"isLeaf","isLeaf",a],isLoading:[2,"isLoading","isLoading",a],isExpanded:[2,"isExpanded","isExpanded",a]},features:[y],decls:2,vars:2,consts:[["nzType","loading",1,"ant-tree-switcher-loading-icon",3,"nzSpin"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nzType","caret-down"],[1,"ant-tree-switcher-line-icon",3,"nzType"],["nzType","file",1,"ant-tree-switcher-line-icon"]],template:function(t,n){t&1&&m(0,on,2,1)(1,hn,2,1),t&2&&(D(n.isShowSwitchIcon?0:-1),g(),D(n.nzShowLine?1:-1))},dependencies:[oe,re,Ve,Le],encapsulation:2,changeDetection:0})}return i})(),Re=(()=>{class i{cdr;searchValue;treeTemplate=null;draggable;showIcon;selectMode=!1;context;icon;title;isLoading;isSelected;isDisabled;isMatched;isExpanded;isLeaf;showIndicator=!0;dragPosition;get canDraggable(){return this.draggable&&!this.isDisabled?!0:null}get matchedValue(){return this.isMatched?this.searchValue:""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}constructor(e){this.cdr=e}ngOnChanges(e){let{showIndicator:t,dragPosition:n}=e;(t||n)&&this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)(k(B))};static \u0275cmp=v({type:i,selectors:[["nz-tree-node-title"]],hostVars:21,hostBindings:function(t,n){t&2&&(Y("title",n.title)("draggable",n.canDraggable)("aria-grabbed",n.canDraggable),u("draggable",n.canDraggable)("ant-select-tree-node-content-wrapper",n.selectMode)("ant-select-tree-node-content-wrapper-open",n.selectMode&&n.isSwitcherOpen)("ant-select-tree-node-content-wrapper-close",n.selectMode&&n.isSwitcherClose)("ant-select-tree-node-selected",n.selectMode&&n.isSelected)("ant-tree-node-content-wrapper",!n.selectMode)("ant-tree-node-content-wrapper-open",!n.selectMode&&n.isSwitcherOpen)("ant-tree-node-content-wrapper-close",!n.selectMode&&n.isSwitcherClose)("ant-tree-node-selected",!n.selectMode&&n.isSelected))},inputs:{searchValue:"searchValue",treeTemplate:"treeTemplate",draggable:[2,"draggable","draggable",a],showIcon:[2,"showIcon","showIcon",a],selectMode:"selectMode",context:"context",icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],showIndicator:"showIndicator",dragPosition:"dragPosition"},features:[y,O],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropPosition","level"],[3,"ant-tree-icon__open","ant-tree-icon__close","ant-tree-icon_loading","ant-select-tree-iconEle","ant-tree-iconEle"],[1,"ant-tree-title",3,"innerHTML"],[3,"nzType"]],template:function(t,n){t&1&&m(0,zn,0,0,"ng-template",0)(1,gn,3,7)(2,un,1,2,"nz-tree-drop-indicator",1),t&2&&(z("ngTemplateOutlet",n.treeTemplate)("ngTemplateOutletContext",U(4,ae,n.context,n.context.origin)),g(),D(n.treeTemplate?-1:1),g(),D(n.showIndicator?2:-1))},dependencies:[ie,oe,re,Ke,Ae,bn],encapsulation:2,changeDetection:0})}return i})(),Qe=(()=>{class i{nzTreeService;ngZone;renderer;elementRef;cdr;icon="";title="";isLoading=!1;isSelected=!1;isDisabled=!1;isMatched=!1;isExpanded;isLeaf;isChecked;isHalfChecked;isDisableCheckbox;isSelectable;canHide;isStart=[];isEnd=[];nzTreeNode;nzShowLine;nzShowExpand;nzCheckable;nzAsyncData;nzHideUnMatched=!1;nzNoAnimation=!1;nzSelectMode=!1;nzShowIcon=!1;nzExpandedIcon;nzTreeTemplate=null;nzBeforeDrop;nzSearchValue="";nzDraggable=!1;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;destroy$=new H;dragPos=2;dragPosClass={0:"drag-over",1:"drag-over-gap-bottom","-1":"drag-over-gap-top"};draggingKey=null;showIndicator=!1;get displayStyle(){return this.nzSearchValue&&this.nzHideUnMatched&&!this.isMatched&&!this.isExpanded&&this.canHide?"none":""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}clickExpand(e){e.preventDefault(),!this.isLoading&&!this.isLeaf&&(this.nzAsyncData&&this.nzTreeNode.children.length===0&&!this.isExpanded&&(this.nzTreeNode.isLoading=!0),this.nzTreeNode.setExpanded(!this.isExpanded)),this.nzTreeService.setExpandedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("expand",this.nzTreeNode,e);this.nzExpandChange.emit(t)}clickSelect(e){e.preventDefault(),this.isSelectable&&!this.isDisabled&&(this.nzTreeNode.isSelected=!this.nzTreeNode.isSelected),this.nzTreeService.setSelectedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("click",this.nzTreeNode,e);this.nzClick.emit(t)}dblClick(e){e.preventDefault();let t=this.nzTreeService.formatEvent("dblclick",this.nzTreeNode,e);this.nzDblClick.emit(t)}contextMenu(e){e.preventDefault();let t=this.nzTreeService.formatEvent("contextmenu",this.nzTreeNode,e);this.nzContextMenu.emit(t)}clickCheckbox(e){if(e.preventDefault(),this.isDisabled||this.isDisableCheckbox)return;this.nzTreeNode.isChecked=!this.nzTreeNode.isChecked,this.nzTreeNode.isHalfChecked=!1,this.nzTreeService.setCheckedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("check",this.nzTreeNode,e);this.nzCheckboxChange.emit(t)}clearDragClass(){["drag-over-gap-top","drag-over-gap-bottom","drag-over","drop-target"].forEach(t=>{this.renderer.removeClass(this.elementRef.nativeElement,t)})}handleDragStart(e){try{e.dataTransfer.setData("text/plain",this.nzTreeNode.key)}catch{}this.nzTreeService.setSelectedNode(this.nzTreeNode),this.draggingKey=this.nzTreeNode.key;let t=this.nzTreeService.formatEvent("dragstart",this.nzTreeNode,e);this.nzOnDragStart.emit(t)}handleDragEnter(e){e.preventDefault(),this.showIndicator=this.nzTreeNode.key!==this.nzTreeService.getSelectedNode()?.key,this.renderIndicator(2),this.ngZone.run(()=>{let t=this.nzTreeService.formatEvent("dragenter",this.nzTreeNode,e);this.nzOnDragEnter.emit(t)})}handleDragOver(e){e.preventDefault();let t=this.nzTreeService.calcDropPosition(e);this.dragPos!==t&&(this.clearDragClass(),this.renderIndicator(t),this.dragPos===0&&this.isLeaf||(this.renderer.addClass(this.elementRef.nativeElement,this.dragPosClass[this.dragPos]),this.renderer.addClass(this.elementRef.nativeElement,"drop-target")));let n=this.nzTreeService.formatEvent("dragover",this.nzTreeNode,e);this.nzOnDragOver.emit(n)}handleDragLeave(e){e.preventDefault(),this.renderIndicator(2),this.clearDragClass();let t=this.nzTreeService.formatEvent("dragleave",this.nzTreeNode,e);this.nzOnDragLeave.emit(t)}handleDragDrop(e){e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.showIndicator=!1,this.clearDragClass();let t=this.nzTreeService.getSelectedNode();if(!t||t&&t.key===this.nzTreeNode.key||this.dragPos===0&&this.isLeaf)return;let n=this.nzTreeService.formatEvent("drop",this.nzTreeNode,e),d=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzBeforeDrop?this.nzBeforeDrop({dragNode:this.nzTreeService.getSelectedNode(),node:this.nzTreeNode,pos:this.dragPos}).subscribe(f=>{f&&this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n),this.nzOnDragEnd.emit(d)}):this.nzTreeNode&&(this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n))})}handleDragEnd(e){e.preventDefault(),this.ngZone.run(()=>{if(this.nzBeforeDrop)this.draggingKey=null,this.markForCheck();else{this.draggingKey=null;let t=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzOnDragEnd.emit(t)}})}handDragEvent(){if(this.nzDraggable){let e=this.elementRef.nativeElement;this.destroy$=new H,E(e,"dragstart").pipe(b(this.destroy$)).subscribe(t=>this.handleDragStart(t)),E(e,"dragenter").pipe(b(this.destroy$)).subscribe(t=>this.handleDragEnter(t)),E(e,"dragover").pipe(b(this.destroy$)).subscribe(t=>this.handleDragOver(t)),E(e,"dragleave").pipe(b(this.destroy$)).subscribe(t=>this.handleDragLeave(t)),E(e,"drop").pipe(b(this.destroy$)).subscribe(t=>this.handleDragDrop(t)),E(e,"dragend").pipe(b(this.destroy$)).subscribe(t=>this.handleDragEnd(t))}else this.destroy$.next(!0),this.destroy$.complete()}markForCheck(){this.cdr.markForCheck()}noAnimation=L(Q,{host:!0,optional:!0});constructor(e,t,n,d,f){this.nzTreeService=e,this.ngZone=t,this.renderer=n,this.elementRef=d,this.cdr=f}ngOnInit(){this.nzTreeNode.component=this,E(this.elementRef.nativeElement,"mousedown").pipe(b(this.destroy$)).subscribe(e=>{this.nzSelectMode&&e.preventDefault()})}ngOnChanges(e){let{nzDraggable:t}=e;t&&this.handDragEvent()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}renderIndicator(e){this.ngZone.run(()=>{this.showIndicator=e!==2,!(this.nzTreeNode.key===this.nzTreeService.getSelectedNode()?.key||e===0&&this.isLeaf)&&(this.dragPos=e,this.cdr.markForCheck())})}static \u0275fac=function(t){return new(t||i)(k(I),k(ge),k(fe),k(ue),k(B))};static \u0275cmp=v({type:i,selectors:[["nz-tree-node","builtin",""]],hostVars:36,hostBindings:function(t,n){t&2&&(G("display",n.displayStyle),u("ant-select-tree-treenode",n.nzSelectMode)("ant-select-tree-treenode-disabled",n.nzSelectMode&&n.isDisabled)("ant-select-tree-treenode-switcher-open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-treenode-switcher-close",n.nzSelectMode&&n.isSwitcherClose)("ant-select-tree-treenode-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-treenode-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-treenode-selected",n.nzSelectMode&&n.isSelected)("ant-select-tree-treenode-loading",n.nzSelectMode&&n.isLoading)("ant-tree-treenode",!n.nzSelectMode)("ant-tree-treenode-disabled",!n.nzSelectMode&&n.isDisabled)("ant-tree-treenode-switcher-open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-treenode-switcher-close",!n.nzSelectMode&&n.isSwitcherClose)("ant-tree-treenode-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-treenode-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-treenode-selected",!n.nzSelectMode&&n.isSelected)("ant-tree-treenode-loading",!n.nzSelectMode&&n.isLoading)("dragging",n.draggingKey===n.nzTreeNode.key))},inputs:{icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a],isSelectable:[2,"isSelectable","isSelectable",a],canHide:[2,"canHide","canHide",a],isStart:"isStart",isEnd:"isEnd",nzTreeNode:"nzTreeNode",nzShowLine:[2,"nzShowLine","nzShowLine",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzExpandedIcon:"nzExpandedIcon",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzSearchValue:"nzSearchValue",nzDraggable:[2,"nzDraggable","nzDraggable",a]},outputs:{nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTreeBuiltinNode"],features:[y,O],attrs:$e,decls:4,vars:22,consts:[[3,"nzTreeLevel","nzSelectMode","nzIsStart","nzIsEnd"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"],[3,"dblclick","click","contextmenu","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","searchValue","treeTemplate","draggable","showIcon","selectMode","context","showIndicator","dragPosition"],[3,"click","nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"click","nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"]],template:function(t,n){t&1&&(_(0,"nz-tree-indent",0),m(1,mn,1,8,"nz-tree-node-switcher",1)(2,fn,1,5,"nz-tree-node-checkbox",2),x(3,"nz-tree-node-title",3),V("dblclick",function(f){return n.dblClick(f)})("click",function(f){return n.clickSelect(f)})("contextmenu",function(f){return n.contextMenu(f)}),N()),t&2&&(z("nzTreeLevel",n.nzTreeNode.level)("nzSelectMode",n.nzSelectMode)("nzIsStart",n.isStart)("nzIsEnd",n.isEnd),g(),D(n.nzShowExpand?1:-1),g(),D(n.nzCheckable?2:-1),g(),z("icon",n.icon)("title",n.title)("isLoading",n.isLoading)("isSelected",n.isSelected)("isDisabled",n.isDisabled)("isMatched",n.isMatched)("isExpanded",n.isExpanded)("isLeaf",n.isLeaf)("searchValue",n.nzSearchValue)("treeTemplate",n.nzTreeTemplate)("draggable",n.nzDraggable)("showIcon",n.nzShowIcon)("selectMode",n.nzSelectMode)("context",n.nzTreeNode)("showIndicator",n.showIndicator)("dragPosition",n.dragPos))},dependencies:[wn,je,vn,Re],encapsulation:2,changeDetection:0})}return i})(),Ze=(()=>{class i extends I{constructor(){super()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ze({token:i,factory:i.\u0275fac})}return i})();function En(){let i=L(Pe,{skipSelf:!0,optional:!0}),c=L(Ze);return i??c}var Mn="tree",yn=(()=>{let i=Fe,c,e=[],t=[],n,d=[],f=[],w,se=[],de=[];return class Z extends i{static{let o=typeof Symbol=="function"&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;c=[j()],n=[j()],w=[j()],P(null,null,c,{kind:"field",name:"nzShowIcon",static:!1,private:!1,access:{has:r=>"nzShowIcon"in r,get:r=>r.nzShowIcon,set:(r,s)=>{r.nzShowIcon=s}},metadata:o},e,t),P(null,null,n,{kind:"field",name:"nzHideUnMatched",static:!1,private:!1,access:{has:r=>"nzHideUnMatched"in r,get:r=>r.nzHideUnMatched,set:(r,s)=>{r.nzHideUnMatched=s}},metadata:o},d,f),P(null,null,w,{kind:"field",name:"nzBlockNode",static:!1,private:!1,access:{has:r=>"nzBlockNode"in r,get:r=>r.nzBlockNode,set:(r,s)=>{r.nzBlockNode=s}},metadata:o},se,de),o&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o})}nzConfigService;cdr;directionality;_nzModuleName=Mn;nzShowIcon=M(this,e,!1);nzHideUnMatched=(M(this,t),M(this,d,!1));nzBlockNode=(M(this,f),M(this,se,!1));nzExpandAll=(M(this,de),!1);nzSelectMode=!1;nzCheckStrictly=!1;nzShowExpand=!0;nzShowLine=!1;nzCheckable=!1;nzAsyncData=!1;nzDraggable=!1;nzMultiple=!1;nzExpandedIcon;nzVirtualItemSize=28;nzVirtualMaxBufferPx=500;nzVirtualMinBufferPx=28;nzVirtualHeight=null;nzTreeTemplate;nzBeforeDrop;nzData=[];nzExpandedKeys=[];nzSelectedKeys=[];nzCheckedKeys=[];nzSearchValue="";nzSearchFunc;nzTreeTemplateChild;cdkVirtualScrollViewport;nzFlattenNodes=[];beforeInit=!0;dir="ltr";nzExpandedKeysChange=new h;nzSelectedKeysChange=new h;nzCheckedKeysChange=new h;nzSearchValueChange=new h;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;HIDDEN_STYLE={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0};HIDDEN_NODE_STYLE={position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"};destroy$=new H;onChange=()=>null;onTouched=()=>null;writeValue(o){this.handleNzData(o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}renderTreeProperties(o){let r=!1,s=!1,{nzData:T,nzExpandedKeys:p,nzSelectedKeys:qe,nzCheckedKeys:Ye,nzCheckStrictly:ce,nzExpandAll:le,nzMultiple:Ge,nzSearchValue:q}=o;le&&(r=!0,s=this.nzExpandAll),Ge&&(this.nzTreeService.isMultiple=this.nzMultiple),ce&&(this.nzTreeService.isCheckStrictly=this.nzCheckStrictly),T&&this.handleNzData(this.nzData),Ye&&this.handleCheckedKeys(this.nzCheckedKeys),ce&&this.handleCheckedKeys(null),(p||le)&&(r=!0,this.handleExpandedKeys(s||this.nzExpandedKeys)),qe&&this.handleSelectedKeys(this.nzSelectedKeys,this.nzMultiple),q&&(q.firstChange&&!this.nzSearchValue||(r=!1,this.handleSearchValue(q.currentValue,this.nzSearchFunc),this.nzSearchValueChange.emit(this.nzTreeService.formatEvent("search",null,null))));let We=this.getExpandedNodeList().map(Xe=>Xe.key),Je=r?s||this.nzExpandedKeys:We;this.handleFlattenNodes(this.nzTreeService.rootNodes,Je)}trackByFlattenNode(o,r){return r.key}handleNzData(o){if(Array.isArray(o)){let r=this.coerceTreeNodes(o);this.nzTreeService.initTree(r)}}handleFlattenNodes(o,r=[]){this.nzTreeService.flattenTreeData(o,r)}handleCheckedKeys(o){this.nzTreeService.conductCheck(o,this.nzCheckStrictly)}handleExpandedKeys(o=[]){this.nzTreeService.conductExpandedKeys(o)}handleSelectedKeys(o,r){this.nzTreeService.conductSelectedKeys(o,r)}handleSearchValue(o,r){let s=He(this.nzTreeService.rootNodes,!0).map(p=>p.data),T=p=>r?r(p.origin):!!o&&p.title.toLowerCase().includes(o.toLowerCase());s.forEach(p=>{p.isMatched=T(p),p.canHide=!p.isMatched,p.isMatched?this.nzTreeService.expandNodeAllParentBySearch(p):(p.setExpanded(!1),this.nzTreeService.setExpandedNodeList(p)),this.nzTreeService.setMatchedNodeList(p)})}eventTriggerChanged(o){let r=o.node;switch(o.eventName){case"expand":this.renderTree(),this.nzExpandChange.emit(o);break;case"click":this.nzClick.emit(o);break;case"dblclick":this.nzDblClick.emit(o);break;case"contextmenu":this.nzContextMenu.emit(o);break;case"check":{this.nzTreeService.setCheckedNodeList(r),this.nzCheckStrictly||this.nzTreeService.conduct(r);let s=this.nzTreeService.formatEvent("check",r,o.event);this.nzCheckboxChange.emit(s);let T=this.nzTreeService.getCheckedNodeKeys();this.nzCheckedKeysChange.emit(T);break}case"dragstart":r.isExpanded&&(r.setExpanded(!r.isExpanded),this.renderTree()),this.nzOnDragStart.emit(o);break;case"dragenter":{let s=this.nzTreeService.getSelectedNode();s&&s.key!==r.key&&!r.isExpanded&&!r.isLeaf&&(r.setExpanded(!0),this.renderTree()),this.nzOnDragEnter.emit(o);break}case"dragover":this.nzOnDragOver.emit(o);break;case"dragleave":this.nzOnDragLeave.emit(o);break;case"dragend":this.nzOnDragEnd.emit(o);break;case"drop":this.renderTree(),this.nzOnDrop.emit(o);break}}renderTree(){this.handleFlattenNodes(this.nzTreeService.rootNodes,this.getExpandedNodeList().map(o=>o.key)),this.cdr.markForCheck()}noAnimation=L(Q,{host:!0,optional:!0});constructor(o,r,s,T){super(o),this.nzConfigService=r,this.cdr=s,this.directionality=T}ngOnInit(){this.nzTreeService.flattenNodes$.pipe(b(this.destroy$)).subscribe(o=>{this.nzFlattenNodes=this.nzVirtualHeight&&this.nzHideUnMatched&&this.nzSearchValue?.length>0?o.filter(r=>!r.canHide):o,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(b(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()})}ngOnChanges(o){this.renderTreeProperties(o)}ngAfterViewInit(){this.beforeInit=!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(r){return new(r||Z)(k(I),k(Ee),k(B),k(Me))};static \u0275cmp=v({type:Z,selectors:[["nz-tree"]],contentQueries:function(r,s,T){if(r&1&&ke(T,Cn,7),r&2){let p;X(p=ee())&&(s.nzTreeTemplateChild=p.first)}},viewQuery:function(r,s){if(r&1&&De(R,5,R),r&2){let T;X(T=ee())&&(s.cdkVirtualScrollViewport=T.first)}},hostVars:20,hostBindings:function(r,s){r&2&&u("ant-select-tree",s.nzSelectMode)("ant-select-tree-show-line",s.nzSelectMode&&s.nzShowLine)("ant-select-tree-icon-hide",s.nzSelectMode&&!s.nzShowIcon)("ant-select-tree-block-node",s.nzSelectMode&&s.nzBlockNode)("ant-tree",!s.nzSelectMode)("ant-tree-rtl",s.dir==="rtl")("ant-tree-show-line",!s.nzSelectMode&&s.nzShowLine)("ant-tree-icon-hide",!s.nzSelectMode&&!s.nzShowIcon)("ant-tree-block-node",!s.nzSelectMode&&s.nzBlockNode)("draggable-tree",s.nzDraggable)},inputs:{nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzBlockNode:[2,"nzBlockNode","nzBlockNode",a],nzExpandAll:[2,"nzExpandAll","nzExpandAll",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzCheckStrictly:[2,"nzCheckStrictly","nzCheckStrictly",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzDraggable:[2,"nzDraggable","nzDraggable",a],nzMultiple:[2,"nzMultiple","nzMultiple",a],nzExpandedIcon:"nzExpandedIcon",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualHeight:"nzVirtualHeight",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzData:"nzData",nzExpandedKeys:"nzExpandedKeys",nzSelectedKeys:"nzSelectedKeys",nzCheckedKeys:"nzCheckedKeys",nzSearchValue:"nzSearchValue",nzSearchFunc:"nzSearchFunc"},outputs:{nzExpandedKeysChange:"nzExpandedKeysChange",nzSelectedKeysChange:"nzSelectedKeysChange",nzCheckedKeysChange:"nzCheckedKeysChange",nzSearchValueChange:"nzSearchValueChange",nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTree"],features:[xe([Ze,{provide:I,useFactory:En},{provide:Be,useExisting:he(()=>Z),multi:!0}]),y,Se,O],decls:10,vars:7,consts:[["nodeTemplate",""],[1,"ant-tree-treenode"],[1,"ant-tree-indent"],[1,"ant-tree-indent-unit"],[1,"ant-tree-list",2,"position","relative"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","itemSize","minBufferPx","maxBufferPx","height"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","nzNoAnimation"],[3,"itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoAnimation"],["builtin","",3,"nzExpandChange","nzClick","nzDblClick","nzContextMenu","nzCheckboxChange","nzOnDragStart","nzOnDragEnter","nzOnDragOver","nzOnDragLeave","nzOnDragEnd","nzOnDrop","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","isStart","isEnd","isChecked","isHalfChecked","isDisableCheckbox","isSelectable","canHide","nzTreeNode","nzSelectMode","nzShowLine","nzExpandedIcon","nzDraggable","nzCheckable","nzShowExpand","nzAsyncData","nzSearchValue","nzHideUnMatched","nzBeforeDrop","nzShowIcon","nzTreeTemplate"]],template:function(r,s){r&1&&(x(0,"div"),_(1,"input"),N(),x(2,"div",1)(3,"div",2),_(4,"div",3),N()(),x(5,"div",4),m(6,Tn,2,11,"cdk-virtual-scroll-viewport",5)(7,xn,3,7,"div",6),N(),m(8,Nn,1,28,"ng-template",null,0,we)),r&2&&(g(),F(s.HIDDEN_STYLE),g(),F(s.HIDDEN_NODE_STYLE),g(3),u("ant-select-tree-list",s.nzSelectMode),g(),D(s.nzVirtualHeight?6:7))},dependencies:[R,ye,Oe,ie,Q,Qe],encapsulation:2,data:{animation:[Ie]},changeDetection:0})}})(),ct=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ce({type:i});static \u0275inj=pe({imports:[yn,Qe,je,Re]})}return i})();export{yn as a,ct as b};
