import{a as j,c as Tt,e as wt}from"./chunk-7URNEJKM.js";import{a as kt}from"./chunk-YQEAGFAU.js";import{d as Nt,e as xt,f as Ot,g as Se}from"./chunk-CXIZFHTU.js";import{b as bt,c as yt}from"./chunk-IVBQBDLM.js";import{D as Xe,E as et,Ha as tt,Ia as it,Ja as Q,Pb as se,Qb as ot,Ta as nt,Uc as ft,Xa as x,Zb as rt,ca as fe,d as Ye,da as ie,dc as ge,ea as W,eb as st,fb as ne,fc as ct,gc as lt,hc as _e,ic as dt,j as Je,kb as at,lc as ht,ob as Ce,oc as ut,pc as pt,qb as ze,qd as Ct,rd as zt,sd as gt,td as _t,ud as St,wc as mt,wd as vt}from"./chunk-EFVLYP4I.js";import{$b as M,Ab as Fe,Ac as ee,Ad as te,Bb as Ie,Bc as A,C as xe,Ca as De,Cb as K,Cc as Qe,Dc as ue,Fb as I,Gb as $e,Ja as Ve,Ka as Ae,Ma as le,O as Oe,P as Te,Pb as he,Rb as S,Tb as v,Tc as qe,Vb as Y,Wb as J,Wc as Ze,Xb as X,Y as we,Yb as g,Z as G,Zb as N,Zc as pe,_b as k,ad as Ue,bd as Ge,ca as ke,dc as Be,eb as Ee,ec as He,f as Z,fa as Me,g as oe,ga as re,gc as F,ha as Le,hd as Ke,kb as f,l as U,la as z,m as R,mc as D,o as ye,ob as Pe,pc as l,qc as We,rc as je,s as Ne,sa as T,ta as w,tc as $,uc as B,vc as H,vd as me,wb as de,xb as Re,ya as ce,zd as V}from"./chunk-YILN3MZX.js";import{g as ae}from"./chunk-H4BOUERG.js";var jt=["nz-cascader-option",""],Qt=(n,h)=>({$implicit:n,index:h});function qt(n,h){if(n&1){let e=F();N(0,"span",4),D("click",function(a){T(e);let r=l();return w(r.onCheckboxClick(a))}),M(1,"span",5),k()}if(n&2){let e=l();A("ant-cascader-checkbox-checked",e.checked)("ant-cascader-checkbox-indeterminate",e.halfChecked)("ant-cascader-checkbox-disabled",e.disabled)}}function Zt(n,h){}function Ut(n,h){if(n&1&&K(0,Zt,0,0,"ng-template",1),n&2){let e=l();g("ngTemplateOutlet",e.optionTemplate)("ngTemplateOutletContext",Ze(2,Qt,e.node.origin,e.columnIndex))}}function Gt(n,h){if(n&1&&(M(0,"div",2),pe(1,"nzHighlight")),n&2){let e=l();g("innerHTML",Ge(1,1,e.node.title,e.highlightText,"g","ant-cascader-menu-item-keyword"),Ee)}}function Kt(n,h){n&1&&M(0,"nz-icon",6)}function Yt(n,h){if(n&1&&(Be(0),M(1,"nz-icon",8),He()),n&2){let e=l(3);f(),g("nzType",e.expandIcon)}}function Jt(n,h){if(n&1&&K(0,Yt,2,1,"ng-container",7),n&2){let e=l(2);g("nzStringTemplateOutlet",e.expandIcon)}}function Xt(n,h){if(n&1&&(N(0,"div",3),S(1,Kt,1,0,"nz-icon",6)(2,Jt,1,1,"ng-container"),k()),n&2){let e=l();f(),v(e.node.isLoading?1:2)}}var ei=["selectContainer"],ti=["menu"],ii=["*"];function ni(n,h){if(n&1){let e=F();N(0,"nz-select-item",10),D("delete",function(){let a=T(e).$implicit,r=l(3);return w(r.removeSelected(a))}),k()}if(n&2){let e=h.$implicit,o=l(3);g("disabled",o.nzDisabled)("label",o.nzDisplayWith(o.getAncestorOptionList(e)))}}function si(n,h){if(n&1&&M(0,"nz-select-item",9),n&2){let e=l(3);g("label","+ "+(e.selectedNodes.length-e.nzMaxTagCount)+" ...")}}function ai(n,h){if(n&1&&(J(0,ni,1,2,"nz-select-item",8,Y),pe(2,"slice"),S(3,si,1,1,"nz-select-item",9)),n&2){let e=l(2);X(Ue(2,1,e.selectedNodes,0,e.nzMaxTagCount)),f(3),v(e.selectedNodes.length>e.nzMaxTagCount?3:-1)}}function oi(n,h){if(n&1&&M(0,"nz-select-placeholder",11),n&2){let e=l(2);ee("display",e.inputValue||e.isComposing?"none":"block"),g("placeholder",e.nzPlaceHolder||(e.locale==null?null:e.locale.placeholder))}}function ri(n,h){if(n&1&&M(0,"nz-select-item",6),n&2){let e=l(2);g("disabled",e.nzDisabled)("label",e.labelRenderText)("contentTemplateOutlet",e.isLabelRenderTemplate?e.nzLabelRender:null)("contentTemplateOutletContext",e.labelRenderContext)}}function ci(n,h){if(n&1&&M(0,"nz-icon",16),n&2){let e=l(3);A("ant-cascader-picker-arrow-expand",e.menuVisible),g("nzType",e.nzSuffixIcon)}}function li(n,h){n&1&&M(0,"nz-icon",14)}function di(n,h){if(n&1&&M(0,"nz-form-item-feedback-icon",15),n&2){let e=l(3);g("status",e.status)}}function hi(n,h){if(n&1&&(N(0,"span",12),S(1,ci,1,3,"nz-icon",13)(2,li,1,0,"nz-icon",14),S(3,di,1,1,"nz-form-item-feedback-icon",15),k()),n&2){let e=l(2);A("ant-select-arrow-loading",e.isLoading),f(),v(e.isLoading?2:1),f(2),v(e.hasFeedback&&e.status?3:-1)}}function ui(n,h){if(n&1){let e=F();N(0,"nz-select-clear",17),D("clear",function(a){T(e);let r=l(2);return w(r.clearSelection(a))}),k()}}function pi(n,h){if(n&1){let e=F();N(0,"div",3,0),S(2,ai,4,5),N(3,"nz-select-search",4),D("isComposingChange",function(a){T(e);let r=l();return w(r.isComposingChange(a))})("valueChange",function(a){T(e);let r=l();return w(r.inputValue=a)}),k(),S(4,oi,1,3,"nz-select-placeholder",5),S(5,ri,1,4,"nz-select-item",6),k(),S(6,hi,4,4,"span",7),S(7,ui,1,0,"nz-select-clear")}if(n&2){let e=l();f(2),v(e.nzMultiple?2:-1),f(),g("showInput",!!e.nzShowSearch)("value",e.inputValue)("mirrorSync",e.nzMultiple)("disabled",e.nzDisabled)("autofocus",e.nzAutoFocus)("focusTrigger",e.menuVisible),f(),v(e.showPlaceholder?4:-1),f(),v(e.showLabelRender?5:-1),f(),v(e.nzShowArrow?6:-1),f(),v(e.clearIconVisible?7:-1)}}function mi(n,h){if(n&1&&(N(0,"ul",21)(1,"li",22),M(2,"nz-embed-empty",23),k()()),n&2){let e=l(2);ee("width",e.dropdownWidthStyle)("height",e.dropdownHeightStyle),f(2),g("nzComponentName","cascader")("specificContent",e.nzNotFoundContent)}}function fi(n,h){if(n&1){let e=F();N(0,"li",27),D("mouseenter",function(a){let r=T(e).$implicit,c=l().$index,u=l(3);return w(u.onOptionMouseEnter(r,c,a))})("mouseleave",function(a){let r=T(e).$implicit,c=l().$index,u=l(3);return w(u.onOptionMouseLeave(r,c,a))})("click",function(a){let r=T(e).$implicit,c=l().$index,u=l(3);return w(u.onOptionClick(r,c,a))})("check",function(){let a=T(e).$implicit,r=l().$index,c=l(3);return w(c.onOptionCheck(a,r))}),k()}if(n&2){let e=h.$implicit,o=l().$index,a=l(3);g("expandIcon",a.nzExpandIcon)("columnIndex",o)("nzLabelProperty",a.nzLabelProperty)("optionTemplate",a.nzOptionRender)("activated",a.isOptionActivated(e,o))("highlightText",a.inSearchingMode?a.inputValue:"")("node",e)("dir",a.dir)("checkable",a.nzMultiple)}}function Ci(n,h){if(n&1&&(N(0,"ul",25),J(1,fi,1,9,"li",26,Y),k()),n&2){let e=h.$implicit,o=l(3);ue(o.nzColumnClassName),ee("height",o.dropdownHeightStyle),f(),X(e)}}function zi(n,h){if(n&1&&J(0,Ci,3,4,"ul",24,Y),n&2){let e=l(2);X(e.cascaderService.columns)}}function gi(n,h){if(n&1){let e=F();N(0,"div",18),D("mouseenter",function(){T(e);let a=l();return w(a.onTriggerMouseEnter())})("mouseleave",function(a){T(e);let r=l();return w(r.onTriggerMouseLeave(a))}),N(1,"div",19,1),S(3,mi,3,6,"ul",20)(4,zi,2,0),k()()}if(n&2){let e=l();A("ant-select-dropdown-placement-bottomLeft",e.dropdownPosition==="bottomLeft")("ant-select-dropdown-placement-bottomRight",e.dropdownPosition==="bottomRight")("ant-select-dropdown-placement-topLeft",e.dropdownPosition==="topLeft")("ant-select-dropdown-placement-topRight",e.dropdownPosition==="topRight")("ant-cascader-dropdown-rtl",e.dir==="rtl"),g("@slideMotion","enter")("@.disabled",!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation),f(),Qe(e.nzMenuStyle),ue(e.nzMenuClassName),A("ant-cascader-rtl",e.dir==="rtl")("ant-cascader-menus-hidden",!e.menuVisible)("ant-cascader-menu-empty",e.shouldShowEmpty),f(2),v(e.shouldShowEmpty?3:4)}}function Vt(n){return typeof n!="boolean"}function _i(n){return n.isLeaf||!n.children||!n.children.length}function Si(n){return!!n.children&&!!n.children.length&&!n.isLeaf}var At=(()=>{class n{cdr=z(me);optionTemplate=null;node;activated=!1;highlightText;nzLabelProperty="label";columnIndex;expandIcon="";dir="ltr";checkable=!1;check=new I;nativeElement=z(le).nativeElement;ngOnInit(){this.expandIcon===""&&this.dir==="rtl"?this.expandIcon="left":this.expandIcon===""&&(this.expandIcon="right")}get checked(){return this.node.isChecked}get halfChecked(){return this.node.isHalfChecked}get disabled(){return this.node.isDisabled||this.node.isDisableCheckbox}markForCheck(){this.cdr.markForCheck()}onCheckboxClick(e){e.preventDefault(),e.stopPropagation(),this.checkable&&this.check.emit()}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=de({type:n,selectors:[["","nz-cascader-option",""]],hostAttrs:[1,"ant-cascader-menu-item","ant-cascader-menu-item-expanded"],hostVars:7,hostBindings:function(o,a){o&2&&(he("title",a.node.title),A("ant-cascader-menu-item-active",a.activated)("ant-cascader-menu-item-expand",!a.node.isLeaf)("ant-cascader-menu-item-disabled",a.node.isDisabled))},inputs:{optionTemplate:"optionTemplate",node:"node",activated:"activated",highlightText:"highlightText",nzLabelProperty:"nzLabelProperty",columnIndex:[2,"columnIndex","columnIndex",te],expandIcon:"expandIcon",dir:"dir",checkable:[2,"checkable","checkable",V]},outputs:{check:"check"},exportAs:["nzCascaderOption"],attrs:jt,decls:4,vars:3,consts:[[1,"ant-cascader-checkbox",3,"ant-cascader-checkbox-checked","ant-cascader-checkbox-indeterminate","ant-cascader-checkbox-disabled"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-cascader-menu-item-content",3,"innerHTML"],[1,"ant-cascader-menu-item-expand-icon"],[1,"ant-cascader-checkbox",3,"click"],[1,"ant-cascader-checkbox-inner"],["nzType","loading"],[4,"nzStringTemplateOutlet"],[3,"nzType"]],template:function(o,a){o&1&&(S(0,qt,2,6,"span",0),S(1,Ut,1,5,null,1)(2,Gt,2,6,"div",2),S(3,Xt,3,1,"div",3)),o&2&&(v(a.checkable?0:-1),f(),v(a.optionTemplate?1:2),f(2),v(!a.node.isLeaf||a.node.children!=null&&a.node.children.length||a.node.isLoading?3:-1))},dependencies:[Ye,ze,Ce,lt,ct,kt],encapsulation:2,changeDetection:0})}return n})(),Et=(()=>{class n extends Tt{fieldNames={label:"label",value:"value"};treeNodePostProcessor=e=>{e.key=this.getOptionValue(e),e.title=this.getOptionLabel(e)};getOptionValue(e){return e.origin[this.fieldNames.value||"value"]}getOptionLabel(e){return e.origin[this.fieldNames.label||"label"]}get children(){return this.rootNodes}set children(e){this.rootNodes=e.map(o=>o instanceof j?o:new j(o,null))}toOptions(e){return e.map(o=>o.origin)}getAncestorNodeList(e){return e?e.parentNode?[...this.getAncestorNodeList(e.parentNode),e]:[e]:[]}conductCheckPaths(e,o){this.checkedNodeList=[],this.halfCheckedNodeList=[];let a=[],r=c=>{c.forEach(u=>{if(e===null)u.isChecked=!!u.origin.checked;else{let p=this.getAncestorNodeList(u).map(L=>this.getOptionValue(L));e.some(L=>ie(p,L))?(u.isChecked=!0,u.isHalfChecked=!1,a.push(p)):(u.isChecked=!1,u.isHalfChecked=!1)}u.children.length>0&&r(u.children)})};r(this.rootNodes),this.refreshCheckState(o),this.handleMissingNodeList(e,a)}conductSelectedPaths(e){this.selectedNodeList.forEach(r=>r.isSelected=!1),this.selectedNodeList=[];let o=[],a=r=>r.every(c=>{let u=this.getAncestorNodeList(c).map(p=>this.getOptionValue(p));return e.some(p=>ie(u,p))?(c.isSelected=!0,this.setSelectedNodeList(c),o.push(u),!1):(c.isSelected=!1,c.children.length>0?a(c.children):!0)});a(this.rootNodes),this.handleMissingNodeList(e,o)}handleMissingNodeList(e,o){this.getMissingNodeList(e,o).forEach(r=>{this.setSelectedNodeList(r)})}getMissingNodeList(e,o){return e?e.filter(a=>!o.some(r=>ie(a,r))).map(a=>this.createMissingNode(a)).filter(W):[]}createMissingNode(e){if(!e?.length)return null;let o=r=>({[this.fieldNames.value||"value"]:r,[this.fieldNames.label||"label"]:r}),a=new j(o(e[0]),null,this);for(let r=1;r<e.length;r++){let c=new j(o(e[r]));a.addChildren([c]),a=c}return this.isMultiple?(a.isChecked=!0,a.isHalfChecked=!1):a.isSelected=!0,a}static \u0275fac=(()=>{let e;return function(a){return(e||(e=Ae(n)))(a||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Pt=(()=>{class n{destroyRef=z(ce);activatedNodes=[];columns=[];inSearchingMode=!1;values=[];$loading=new oe(!1);$redraw=new Z;$nodeSelected=new Z;$quitSearching=new Z;columnSnapshot=[[]];cascaderComponent;searchOptionPathMap=new Map;constructor(){this.destroyRef.onDestroy(()=>{this.$redraw.complete(),this.$quitSearching.complete(),this.$nodeSelected.complete(),this.$loading.complete(),this.searchOptionPathMap.clear()})}get nzOptions(){return this.cascaderComponent.treeService.toOptions(this.columns[0]||[])}withComponent(e){this.cascaderComponent=e}setNodeActivated(e,o,a=!1,r=!1,c=!0){e.isDisabled||(this.activatedNodes[o]=e,this.trackAncestorActivatedNodes(o),this.dropBehindActivatedNodes(o),Si(e)?this.setColumnData(e.children,o+1):!e.isLeaf&&c?this.loadChildren(e,o):e.isLeaf&&this.dropBehindColumns(o),a&&e.isSelectable&&this.setNodeSelected(e,o,r),this.$redraw.next())}setNodeSelected(e,o,a=!1){let r=this.cascaderComponent.nzChangeOn,c=(u,p)=>typeof r=="function"?r(u,p):!1;(a||e.isLeaf||this.cascaderComponent.nzChangeOnSelect||c(e.origin,o))&&(e.isSelected=!0,this.cascaderComponent.treeService.setSelectedNodeList(e,a),this.cascaderComponent.updateSelectedNodes(),this.$redraw.next(),this.$nodeSelected.next(e))}setNodeDeactivatedSinceColumn(e){this.dropBehindActivatedNodes(e-1),this.dropBehindColumns(e),this.$redraw.next()}setSearchOptionSelected(e,o=!1){this.setNodeSelected(e,e.level,o),setTimeout(()=>{this.$quitSearching.next(),this.$redraw.next()},200)}clearSearchOptions(){for(let e of this.searchOptionPathMap.keys())e.isDisabled=e.origin.disabled||!1,e.title=this.getOptionLabel(e.origin);this.searchOptionPathMap.clear()}prepareSearchOptions(e){let o=[],a=[],r=(C,t)=>t.some(i=>{let s=this.getOptionLabel(i);return!!s&&s.indexOf(C)!==-1}),c=this.cascaderComponent.nzShowSearch,u=Vt(c)&&c.filter?c.filter:r,p=Vt(c)&&c.sorter?c.sorter:null,L=(C,t=!1)=>{a.push(C);let i=this.cascaderComponent.treeService.toOptions(a);u(e,i)&&(this.searchOptionPathMap.set(C,i),C.isDisabled=t||C.isDisabled,C.title=i.map(s=>this.getOptionLabel(s)).join(" / "),o.push(C)),a.pop()},b=(C,t=!1)=>{let i=t||C.isDisabled;a.push(C),C.children.forEach(s=>{s.isLeaf||b(s,i),(s.isLeaf||!s.children||!s.children.length)&&L(s,i)}),a.pop()};if(!this.columnSnapshot.length){this.columns=[[]];return}this.columnSnapshot[0].forEach(C=>_i(C)?L(C):b(C)),p&&o.sort((C,t)=>p(this.searchOptionPathMap.get(C),this.searchOptionPathMap.get(t),e)),this.columns=[o],this.$redraw.next()}setSearchingMode(e){this.inSearchingMode=e,e?(this.clearSearchOptions(),this.columnSnapshot=[...this.columns],this.activatedNodes=[]):(this.clearSearchOptions(),this.activatedNodes=[],setTimeout(()=>{if(this.columns=[...this.columnSnapshot],this.cascaderComponent.selectedNodes.length){let o=this.cascaderComponent.selectedNodes[0],a=o.level;this.activatedNodes[a]=o,this.trackAncestorActivatedNodes(a),this.trackAncestorColumnData(a)}this.$redraw.next()})),this.$redraw.next()}clear(){this.values=[],this.activatedNodes=[],this.dropBehindColumns(0),this.$redraw.next(),this.$nodeSelected.next(null)}getOptionLabel(e){return e[this.cascaderComponent.nzLabelProperty||"label"]}getOptionValue(e){return e[this.cascaderComponent.nzValueProperty||"value"]}setColumnData(e,o){this.columns[o]=e,this.dropBehindColumns(o)}trackAncestorColumnData(e){if(this.activatedNodes[e]){this.dropBehindColumns(e);for(let a=0;a<e;a++)this.columns[a+1]=this.activatedNodes[a].children}}trackAncestorActivatedNodes(e){for(let o=e-1;o>=0;o--)this.activatedNodes[o]||(this.activatedNodes[o]=this.activatedNodes[o+1].parentNode)}dropBehindActivatedNodes(e){this.activatedNodes=this.activatedNodes.splice(0,e+1)}dropBehindColumns(e){e<this.columns.length-1&&(this.columns=this.columns.slice(0,e+1))}loadChildren(e,o,a){let r=o<0||!W(e),c=e?.origin||{},u=this.cascaderComponent.nzLoadData;u&&(this.$loading.next(r),e&&(e.isLoading=!0),tt(u(c,o)).pipe(Te(()=>{e&&(e.isLoading=!1),this.$loading.next(!1),this.$redraw.next()})).subscribe({next:()=>{if(c.children){if(r){let p=this.cascaderComponent.coerceTreeNodes(c.children);this.cascaderComponent.treeService.initTree(p),this.setColumnData(p,0)}else{let p=c.children.map(L=>new j(L,e));e.children=p,this.setColumnData(p,o+1)}a?.(c.children)}},error:()=>{e&&(e.isLeaf=!0)}}))}isLoaded(e){return!!this.columns[e]&&this.columns[e].length>0}static \u0275fac=function(o){return new(o||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Rt="cascader",Ft=n=>n.join(" / "),vi=(()=>{var b;let n=wt,h,e=[],o=[],a,r=[],c=[],u,p=[],L=[];return b=class extends n{ngZone=z($e);cdr=z(me);i18nService=z(nt);elementRef=z(le);renderer=z(Pe);directionality=z(Xe);destroyRef=z(ce);_nzModuleName=Rt;selectContainer;set input(t){this.input$.next(t?.inputElement)}get input(){return this.input$.getValue()}input$=new oe(void 0);menu;overlay;cascaderItems;nzOptions=[];nzOptionRender=null;nzShowInput=!0;nzShowArrow=!0;nzAllowClear=!0;nzAutoFocus=!1;nzChangeOnSelect=!1;nzDisabled=!1;nzColumnClassName;nzExpandTrigger="click";nzValueProperty="value";nzLabelProperty="label";nzLabelRender=null;nzVariant=R(this,e,"outlined");nzNotFoundContent=R(this,o);nzSize=R(this,r,"default");nzBackdrop=(R(this,c),R(this,p,!1));nzShowSearch=(R(this,L),!1);nzPlaceHolder="";nzMenuClassName;nzMenuStyle=null;nzMouseLeaveDelay=150;nzMouseEnterDelay=150;nzStatus="";nzMultiple=!1;nzMaxTagCount=1/0;nzPlacement="bottomLeft";nzTriggerAction=["click"];nzChangeOn;nzLoadData;nzDisplayWith=t=>Ft(t.map(i=>this.cascaderService.getOptionLabel(i)));nzSuffixIcon="down";nzExpandIcon="";get treeService(){return this.nzTreeService}nzVisibleChange=new I;nzSelectionChange=new I;nzRemoved=new I;nzClear=new I;prefixCls="ant-select";statusCls={};status="";hasFeedback=!1;shouldShowEmpty=!1;el=this.elementRef.nativeElement;menuVisible=!1;isLoading=!1;labelRenderText;labelRenderContext={};onChange=Function.prototype;onTouched=Function.prototype;positions=[...dt];dropdownWidthStyle;dropdownHeightStyle="";dropdownPosition="bottomLeft";isFocused=!1;locale;dir="ltr";isComposing=!1;get overlayOrigin(){return this.elementRef}finalSize=Ke(()=>this.compactSize?this.compactSize():this.size());size=De(this.nzSize);compactSize=z(_t,{optional:!0});inputString="";isOpening=!1;delayMenuTimer;delaySelectTimer;isNzDisableFirstChange=!0;selectedNodes=[];get inSearchingMode(){return this.cascaderService.inSearchingMode}set inputValue(t){this.inputString=t,this.toggleSearchingMode(!!t)}get inputValue(){return this.inputString}get hasInput(){return!!this.inputValue}get hasValue(){return this.cascaderService.values&&this.cascaderService.values.length>0}get showLabelRender(){return!this.hasInput&&!this.nzMultiple&&!!this.selectedNodes.length}get showPlaceholder(){return!(this.hasInput||this.hasValue)}get clearIconVisible(){return this.nzAllowClear&&!this.nzDisabled&&(this.hasValue||this.hasInput)}get isLabelRenderTemplate(){return!!this.nzLabelRender}noAnimation=z(ge,{host:!0,optional:!0});nzFormStatusService=z(Ct,{optional:!0});nzFormNoStatusService=z(zt,{optional:!0});cascaderService=z(Pt);constructor(){super(z(Et)),this.cascaderService.withComponent(this),this.renderer.addClass(this.elementRef.nativeElement,"ant-select"),this.renderer.addClass(this.elementRef.nativeElement,"ant-cascader"),this.destroyRef.onDestroy(()=>{this.clearDelayMenuTimer(),this.clearDelaySelectTimer()}),st(Rt,()=>{this.size.set(this.nzSize),this.cdr.markForCheck()})}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(Oe((i,s)=>i.status===s.status&&i.hasFeedback===s.hasFeedback),ke(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:ye(!1)),Ne(([{status:i,hasFeedback:s},d])=>({status:d?"":i,hasFeedback:s})),x(this.destroyRef)).subscribe(({status:i,hasFeedback:s})=>{this.setStatusStyles(i,s)});let t=this.cascaderService;t.$redraw.pipe(x(this.destroyRef)).subscribe(()=>{this.checkChildren(),this.setDisplayLabel(),this.cdr.detectChanges(),this.reposition(),this.setDropdownStyles()}),t.$loading.pipe(x(this.destroyRef)).subscribe(i=>{this.isLoading=i}),t.$nodeSelected.pipe(x(this.destroyRef)).subscribe(i=>{i?(!this.nzMultiple&&(i.isLeaf||this.nzChangeOnSelect&&this.nzExpandTrigger==="hover")&&this.delaySetMenuVisible(!1),this.nzSelectionChange.emit(this.getAncestorOptionList(i)),this.cdr.markForCheck()):(this.emitValue([]),this.nzSelectionChange.emit([]))}),t.$quitSearching.pipe(x(this.destroyRef)).subscribe(()=>{this.inputValue="",this.dropdownWidthStyle=""}),this.i18nService.localeChange.pipe(we(),x(this.destroyRef)).subscribe(()=>{this.setLocale()}),this.size.set(this.nzSize),this.dir=this.directionality.value,this.directionality.change.pipe(x(this.destroyRef)).subscribe(()=>{this.dir=this.directionality.value,t.$redraw.next()}),this.setupSelectionChangeListener(),this.setupChangeListener(),this.setupKeydownListener(),this.setupFocusListener()}ngOnChanges(t){let{nzStatus:i,nzSize:s,nzPlacement:d,nzOptions:y}=t;if(y&&this.updateOptions(),i&&this.setStatusStyles(this.nzStatus,this.hasFeedback),s&&this.size.set(s.currentValue),d){let{currentValue:m}=d;this.dropdownPosition=m;let O=["bottomLeft","topLeft","bottomRight","topRight"];m&&O.includes(m)?this.positions=[_e[m]]:this.positions=O.map(E=>_e[E])}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}writeValue(t){W(t)?(this.nzMultiple?this.cascaderService.values=fe(t):this.cascaderService.values=[fe(t)],this.clearSelectedNodes(),this.updateSelectedNodes(!0,!1)):(this.cascaderService.values=[],this.clearSelectedNodes(),this.selectedNodes=[],this.cascaderService.$redraw.next())}setupSelectionChangeListener(){xe(this.nzSelectionChange,this.nzRemoved,this.nzClear).pipe(x(this.destroyRef)).subscribe(()=>{this.updateSelectedNodes(),this.emitValue(this.cascaderService.values),this.cascaderService.$redraw.next()})}delaySetMenuVisible(t,i=100,s=!1){this.clearDelayMenuTimer(),i?(t&&s&&(this.isOpening=!0),this.delayMenuTimer=setTimeout(()=>{this.setMenuVisible(t),this.cdr.detectChanges(),this.clearDelayMenuTimer(),t&&setTimeout(()=>{this.isOpening=!1},100)},i)):this.setMenuVisible(t)}setMenuVisible(t){this.nzDisabled||this.menuVisible===t||(t?(this.cascaderService.$redraw.next(),this.updateSelectedNodes(!!this.nzLoadData),this.scrollToActivatedOptions()):this.inputValue="",this.menuVisible=t,this.nzVisibleChange.emit(t),this.cdr.detectChanges())}clearDelayMenuTimer(){this.delayMenuTimer&&(clearTimeout(this.delayMenuTimer),this.delayMenuTimer=void 0)}clearSelection(t){t&&(t.preventDefault(),t.stopPropagation()),this.clearSelectedNodes(),this.labelRenderText="",this.labelRenderContext={},this.inputValue="",this.setMenuVisible(!1),this.cascaderService.clear(),this.nzClear.emit()}clearSelectedNodes(){this.selectedNodes.forEach(t=>{this.removeSelected(t,!1)})}emitValue(t){this.nzMultiple?this.onChange(t):this.onChange(t?.length?t[0]:[])}getSubmitValue(){return this.nzMultiple?this.cascaderService.values:this.cascaderService.values?.length?this.cascaderService.values[0]:[]}focus(){this.isFocused||((this.input?.nativeElement||this.el).focus(),this.isFocused=!0)}blur(){this.isFocused&&((this.input?.nativeElement||this.el).blur(),this.isFocused=!1)}handleInputBlur(){this.menuVisible?this.focus():this.blur()}handleInputFocus(){this.focus()}isComposingChange(t){this.isComposing=t}onTriggerClick(){this.nzDisabled||(this.nzShowSearch&&this.focus(),this.isActionTrigger("click")&&this.delaySetMenuVisible(!this.menuVisible,100),this.onTouched())}onTriggerMouseEnter(){this.nzDisabled||!this.isActionTrigger("hover")||this.delaySetMenuVisible(!0,this.nzMouseEnterDelay,!0)}onTriggerMouseLeave(t){if(this.nzDisabled||!this.menuVisible||this.isOpening||!this.isActionTrigger("hover")){t.preventDefault();return}let i=t.relatedTarget,s=this.el,d=this.menu&&this.menu.nativeElement;s.contains(i)||d&&d.contains(i)||this.delaySetMenuVisible(!1,this.nzMouseLeaveDelay)}onOptionMouseEnter(t,i,s){s.preventDefault(),this.nzExpandTrigger==="hover"&&(t.isLeaf?this.cascaderService.setNodeDeactivatedSinceColumn(i):this.delaySetOptionActivated(t,i,!1))}onOptionMouseLeave(t,i,s){s.preventDefault(),this.nzExpandTrigger==="hover"&&!t.isLeaf&&this.clearDelaySelectTimer()}getAncestorOptionList(t){let i=this.treeService.getAncestorNodeList(t);return this.treeService.toOptions(i)}updateSelectedNodes(t=!1,i=!0){let s=this.cascaderService.values,d=this.nzMultiple,y=m=>{this.selectedNodes=[...this.nzMultiple?this.getCheckedNodeList():this.getSelectedNodeList()].sort((O,E)=>{let P=s.indexOf(O.key),_=s.indexOf(E.key);return P!==-1&&_!==-1?P-_:P!==-1?-1:_!==-1?1:0}),m&&(this.cascaderService.values=this.selectedNodes.map(O=>this.getAncestorOptionList(O).map(E=>this.cascaderService.getOptionValue(E)))),this.cascaderService.$redraw.next()};if(t){let m=s[0],O=m?.length?m.length-1:0;this.treeService.fieldNames={value:this.nzValueProperty,label:this.nzLabelProperty},this.treeService.isMultiple=d,this.treeService.isCheckStrictly=!1;let E=()=>{d?this.treeService.conductCheckPaths(s,this.treeService.isCheckStrictly):this.treeService.conductSelectedPaths(s)},P=(_=0)=>{let ve=()=>{let q=m?.[_];if(!W(q)){this.cascaderService.$redraw.next();return}let be=this.cascaderService.columns[_].find(It=>this.cascaderService.getOptionValue(It.origin)===q)||null;W(be)&&(this.cascaderService.setNodeActivated(be,_,!1,d,!1),_<O&&P(_+1)),E(),y(!1)};if(this.cascaderService.isLoaded(_)||!this.nzLoadData)ve();else{let q=this.cascaderService.activatedNodes[_-1];this.cascaderService.loadChildren(q,_-1,ve)}};if(this.nzLoadData)P();else{let _=this.coerceTreeNodes(this.nzOptions||[]);this.treeService.initTree(_),this.cascaderService.setColumnData(_,0),P()}}y(i)}onOptionClick(t,i,s){s&&s.preventDefault(),!(t&&t.isDisabled)&&(this.el.focus(),this.nzMultiple&&t.isLeaf?this.onOptionCheck(t,i,!0):this.inSearchingMode?this.cascaderService.setSearchOptionSelected(t,this.nzMultiple):this.cascaderService.setNodeActivated(t,i,!this.nzMultiple))}onOptionCheck(t,i,s=!1){!this.nzMultiple||t.isDisabled||t.isDisableCheckbox||(t.isChecked=!t.isChecked,t.isHalfChecked=!1,this.treeService.setCheckedNodeList(t),this.treeService.conduct(t,this.treeService.isCheckStrictly),this.inSearchingMode?this.cascaderService.setSearchOptionSelected(t,!0):s?this.cascaderService.setNodeActivated(t,i,!0,!0):this.cascaderService.setNodeSelected(t,i,!0))}removeSelected(t,i=!0){t.isSelected=!1,t.isChecked=!1,this.nzMultiple&&this.treeService.conduct(t,this.treeService.isCheckStrictly),this.treeService.setSelectedNodeList(t,this.nzMultiple),i&&this.nzRemoved.emit(t.origin)}onClickOutside(t){let i=at(t);this.el.contains(i)||this.closeMenu()}onPositionChange(t){let i=ht(t);this.dropdownPosition=i}updateOptions(){let t=this.coerceTreeNodes(this.nzOptions||[]);this.treeService.initTree(t),this.cascaderService.setColumnData(t,0),this.updateSelectedNodes(!0),this.inSearchingMode&&(this.cascaderService.setSearchingMode(this.inSearchingMode),this.cascaderService.prepareSearchOptions(this.inputValue))}isActionTrigger(t){return typeof this.nzTriggerAction=="string"?this.nzTriggerAction===t:this.nzTriggerAction.indexOf(t)!==-1}onEnter(){let t=Math.max(this.cascaderService.activatedNodes.length-1,0),i=this.cascaderService.activatedNodes[t];i&&!i.isDisabled&&(this.inSearchingMode?this.cascaderService.setSearchOptionSelected(i):this.cascaderService.setNodeActivated(i,t,!0))}moveUpOrDown(t){let i=Math.max(this.cascaderService.activatedNodes.length-1,0),s=this.cascaderService.activatedNodes[i],d=this.cascaderService.columns[i]||[],y=d.length,m=-1;for(s?m=d.indexOf(s):m=t?y:-1;m=t?m-1:m+1,!(m<0||m>=y);){let O=d[m];if(!(!O||O.isDisabled)){this.cascaderService.setNodeActivated(O,i);break}}}moveLeft(){let t=this.cascaderService.activatedNodes;t.length&&(t.pop(),this.cascaderService.setNodeDeactivatedSinceColumn(t.length))}moveRight(){let t=this.cascaderService.activatedNodes.length,i=this.cascaderService.columns[t];if(i&&i.length){let s=i.find(d=>!d.isDisabled);s&&this.cascaderService.setNodeActivated(s,t)}}clearDelaySelectTimer(){this.delaySelectTimer&&(clearTimeout(this.delaySelectTimer),this.delaySelectTimer=void 0)}delaySetOptionActivated(t,i,s){this.clearDelaySelectTimer(),this.delaySelectTimer=setTimeout(()=>{this.cascaderService.setNodeActivated(t,i,s,this.nzMultiple),this.delaySelectTimer=void 0},150)}toggleSearchingMode(t){this.inSearchingMode!==t&&this.cascaderService.setSearchingMode(t),this.inSearchingMode&&this.cascaderService.prepareSearchOptions(this.inputValue)}isOptionActivated(t,i){return this.cascaderService.activatedNodes[i]===t}setDisabledState(t){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||t,this.isNzDisableFirstChange=!1,this.nzDisabled&&this.closeMenu()}closeMenu(){this.blur(),this.clearDelayMenuTimer(),this.setMenuVisible(!1),!this.hasValue&&this.cascaderService.columns.length&&this.cascaderService.dropBehindColumns(0)}reposition(){this.overlay&&this.overlay.overlayRef&&this.menuVisible&&Promise.resolve().then(()=>{this.overlay.overlayRef.updatePosition(),this.cdr.markForCheck()})}checkChildren(){this.cascaderItems&&this.cascaderItems.forEach(t=>t.markForCheck())}setDisplayLabel(){if(this.nzMultiple)return;let t=this.selectedNodes.length?this.selectedNodes[0]:null,i=this.getAncestorOptionList(t),s=i.map(d=>this.cascaderService.getOptionLabel(d));this.isLabelRenderTemplate&&(this.labelRenderContext={labels:s,selectedOptions:i}),this.labelRenderText=Ft.call(this,s)}setDropdownStyles(){let t=this.cascaderService.columns[0];this.shouldShowEmpty=this.inSearchingMode&&(!t||!t.length)||!(this.nzOptions&&this.nzOptions.length)&&!this.nzLoadData,this.dropdownHeightStyle=this.shouldShowEmpty?"auto":"",this.input&&(this.dropdownWidthStyle=this.inSearchingMode||this.shouldShowEmpty?`${this.selectContainer.nativeElement.offsetWidth}px`:"")}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.cdr.markForCheck(),this.statusCls=it(this.prefixCls,t,i),Object.keys(this.statusCls).forEach(s=>{this.statusCls[s]?this.renderer.addClass(this.elementRef.nativeElement,s):this.renderer.removeClass(this.elementRef.nativeElement,s)})}setLocale(){this.locale=this.i18nService.getLocaleData("global"),this.cdr.markForCheck()}scrollToActivatedOptions(){this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this.cascaderItems.toArray().filter(t=>t.activated).forEach(t=>{t.nativeElement.scrollIntoView({block:"start",inline:"nearest"})})})})}setupChangeListener(){this.input$.pipe(G(t=>Q(t?.nativeElement,"change")),x(this.destroyRef)).subscribe(t=>t.stopPropagation())}setupFocusListener(){this.input$.pipe(G(t=>Q(t?.nativeElement,"focus")),x(this.destroyRef)).subscribe(()=>this.handleInputFocus()),this.input$.pipe(G(t=>Q(t?.nativeElement,"blur")),x(this.destroyRef)).subscribe(()=>this.handleInputBlur())}setupKeydownListener(){Q(this.el,"keydown").pipe(x(this.destroyRef)).subscribe(t=>{let i=t.keyCode;if(!(i!==40&&i!==38&&i!==37&&i!==39&&i!==13&&i!==8&&i!==27)){if(!this.menuVisible&&i!==8&&i!==27)return this.ngZone.run(()=>this.setMenuVisible(!0));this.inSearchingMode&&(i===8||i===37||i===39)||this.menuVisible&&(t.preventDefault(),this.ngZone.run(()=>{i===40?this.moveUpOrDown(!1):i===38?this.moveUpOrDown(!0):i===37?this.moveLeft():i===39?this.moveRight():i===13&&this.onEnter(),this.cdr.markForCheck()}))}})}},(()=>{let t=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;h=[ne()],a=[ne()],u=[ne()],U(null,null,h,{kind:"field",name:"nzVariant",static:!1,private:!1,access:{has:i=>"nzVariant"in i,get:i=>i.nzVariant,set:(i,s)=>{i.nzVariant=s}},metadata:t},e,o),U(null,null,a,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:i=>"nzSize"in i,get:i=>i.nzSize,set:(i,s)=>{i.nzSize=s}},metadata:t},r,c),U(null,null,u,{kind:"field",name:"nzBackdrop",static:!1,private:!1,access:{has:i=>"nzBackdrop"in i,get:i=>i.nzBackdrop,set:(i,s)=>{i.nzBackdrop=s}},metadata:t},p,L),t&&Object.defineProperty(b,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),ae(b,"\u0275fac",function(i){return new(i||b)}),ae(b,"\u0275cmp",de({type:b,selectors:[["nz-cascader"],["","nz-cascader",""]],viewQuery:function(i,s){if(i&1&&($(ei,5),$(Se,5),$(ti,5),$(se,5),$(At,5)),i&2){let d;B(d=H())&&(s.selectContainer=d.first),B(d=H())&&(s.input=d.first),B(d=H())&&(s.menu=d.first),B(d=H())&&(s.overlay=d.first),B(d=H())&&(s.cascaderItems=d)}},hostVars:31,hostBindings:function(i,s){i&1&&D("click",function(){return s.onTriggerClick()})("mouseenter",function(){return s.onTriggerMouseEnter()})("mouseleave",function(y){return s.onTriggerMouseLeave(y)}),i&2&&(he("tabIndex","0"),A("ant-select-in-form-item",!!s.nzFormStatusService)("ant-select-lg",s.finalSize()==="large")("ant-select-sm",s.finalSize()==="small")("ant-select-allow-clear",s.nzAllowClear)("ant-select-show-arrow",s.nzShowArrow)("ant-select-show-search",!!s.nzShowSearch)("ant-select-disabled",s.nzDisabled)("ant-select-borderless",s.nzVariant==="borderless")("ant-select-filled",s.nzVariant==="filled")("ant-select-underlined",s.nzVariant==="underlined")("ant-select-open",s.menuVisible)("ant-select-focused",s.isFocused)("ant-select-multiple",s.nzMultiple)("ant-select-single",!s.nzMultiple)("ant-select-rtl",s.dir==="rtl"))},inputs:{nzOptions:"nzOptions",nzOptionRender:"nzOptionRender",nzShowInput:[2,"nzShowInput","nzShowInput",V],nzShowArrow:[2,"nzShowArrow","nzShowArrow",V],nzAllowClear:[2,"nzAllowClear","nzAllowClear",V],nzAutoFocus:[2,"nzAutoFocus","nzAutoFocus",V],nzChangeOnSelect:[2,"nzChangeOnSelect","nzChangeOnSelect",V],nzDisabled:[2,"nzDisabled","nzDisabled",V],nzColumnClassName:"nzColumnClassName",nzExpandTrigger:"nzExpandTrigger",nzValueProperty:"nzValueProperty",nzLabelProperty:"nzLabelProperty",nzLabelRender:"nzLabelRender",nzVariant:"nzVariant",nzNotFoundContent:"nzNotFoundContent",nzSize:"nzSize",nzBackdrop:"nzBackdrop",nzShowSearch:"nzShowSearch",nzPlaceHolder:"nzPlaceHolder",nzMenuClassName:"nzMenuClassName",nzMenuStyle:"nzMenuStyle",nzMouseLeaveDelay:[2,"nzMouseLeaveDelay","nzMouseLeaveDelay",te],nzMouseEnterDelay:[2,"nzMouseEnterDelay","nzMouseEnterDelay",te],nzStatus:"nzStatus",nzMultiple:[2,"nzMultiple","nzMultiple",V],nzMaxTagCount:"nzMaxTagCount",nzPlacement:"nzPlacement",nzTriggerAction:"nzTriggerAction",nzChangeOn:"nzChangeOn",nzLoadData:"nzLoadData",nzDisplayWith:"nzDisplayWith",nzSuffixIcon:"nzSuffixIcon",nzExpandIcon:"nzExpandIcon"},outputs:{nzVisibleChange:"nzVisibleChange",nzSelectionChange:"nzSelectionChange",nzRemoved:"nzRemoved",nzClear:"nzClear"},exportAs:["nzCascader"],features:[qe([{provide:mt,useExisting:Me(()=>b),multi:!0},{provide:St,useValue:"select"},Pt,Et]),Ie([vt]),Fe,Ve],ngContentSelectors:ii,decls:3,vars:6,consts:[["selectContainer",""],["menu",""],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayTransformOriginOn","cdkConnectedOverlayOpen"],[1,"ant-select-selector"],[3,"isComposingChange","valueChange","showInput","value","mirrorSync","disabled","autofocus","focusTrigger"],[3,"placeholder","display"],[3,"disabled","label","contentTemplateOutlet","contentTemplateOutletContext"],[1,"ant-select-arrow",3,"ant-select-arrow-loading"],["deletable","",3,"disabled","label"],[3,"label"],["deletable","",3,"delete","disabled","label"],[3,"placeholder"],[1,"ant-select-arrow"],[3,"nzType","ant-cascader-picker-arrow-expand"],["nzType","loading"],[3,"status"],[3,"nzType"],[3,"clear"],[1,"ant-select-dropdown","ant-cascader-dropdown",3,"mouseenter","mouseleave","nzNoAnimation"],[1,"ant-cascader-menus"],[1,"ant-cascader-menu",3,"width","height"],[1,"ant-cascader-menu"],[1,"ant-cascader-menu-item","ant-cascader-menu-item-disabled"],[1,"ant-cascader-menu-item-content",3,"nzComponentName","specificContent"],["role","menuitemcheckbox",1,"ant-cascader-menu",3,"class","height"],["role","menuitemcheckbox",1,"ant-cascader-menu"],["nz-cascader-option","",3,"expandIcon","columnIndex","nzLabelProperty","optionTemplate","activated","highlightText","node","dir","checkable"],["nz-cascader-option","",3,"mouseenter","mouseleave","click","check","expandIcon","columnIndex","nzLabelProperty","optionTemplate","activated","highlightText","node","dir","checkable"]],template:function(i,s){i&1&&(We(),S(0,pi,8,11),je(1),K(2,gi,5,24,"ng-template",2),D("overlayOutsideClick",function(y){return s.onClickOutside(y)})("detach",function(){return s.closeMenu()})("positionChange",function(y){return s.onPositionChange(y)})),i&2&&(v(s.nzShowInput?0:-1),f(2),g("cdkConnectedOverlayHasBackdrop",s.nzBackdrop)("cdkConnectedOverlayOrigin",s.overlayOrigin)("cdkConnectedOverlayPositions",s.positions)("cdkConnectedOverlayTransformOriginOn",".ant-cascader-dropdown")("cdkConnectedOverlayOpen",s.menuVisible))},dependencies:[ot,se,et,ft,ze,Ce,yt,bt,gt,pt,ut,ge,Nt,xt,Ot,Se,At,Je],encapsulation:2,data:{animation:[rt]},changeDetection:0})),b})(),hn=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=Re({type:n});static \u0275inj=Le({imports:[vi]})}return n})();export{vi as a,hn as b};
