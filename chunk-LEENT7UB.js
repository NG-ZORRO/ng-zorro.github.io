import{b as Ke,c as B,d as Ue,e as $e}from"./chunk-JIUQD5CR.js";import{a as Re}from"./chunk-6OPGD6X7.js";import{D as Le,Dc as Pe,Eb as se,Gb as de,Na as M,Sa as Ie,T as $,Ua as R,d as ae,kb as Ve,sd as Fe,wb as j,wd as Q,xd as Ae,yb as Be,zb as He}from"./chunk-OIF5WC2R.js";import{$ as O,$c as re,Aa as G,Ab as Te,Ac as ne,Bc as te,Bd as V,Db as ke,Fb as v,Fc as ie,Fd as a,Gc as oe,Gd as Oe,Hc as f,Ib as h,Ic as K,Jb as De,La as L,Ma as Ce,Oa as me,Tb as W,Wb as xe,Xb as _,Zb as T,Zc as Ee,_b as Ne,ac as J,ad as U,bc as X,cc as z,dc as x,dd as ve,ec as N,fc as k,g as Y,ga as ge,ha as ue,hb as Se,hd as Me,ia as fe,ic as ee,id as ye,jc as P,kc as F,m as H,ma as u,mc as A,n as y,nb as g,rb as _e,sc as I,ta as C,ua as m,vc as c,yc as be,zb as E,zc as we}from"./chunk-PPIYYLX2.js";import{g as q}from"./chunk-H4BOUERG.js";function on(i,l){if(i&1&&ee(0,"span"),i&2){let e=l.$index,t=c();f("ant-tree-indent-unit",!t.nzSelectMode)("ant-select-tree-indent-unit",t.nzSelectMode)("ant-select-tree-indent-unit-start",t.nzSelectMode&&t.nzIsStart[e])("ant-tree-indent-unit-start",!t.nzSelectMode&&t.nzIsStart[e])("ant-select-tree-indent-unit-end",t.nzSelectMode&&t.nzIsEnd[e])("ant-tree-indent-unit-end",!t.nzSelectMode&&t.nzIsEnd[e])}}var je=["builtin",""],le=(i,l)=>({$implicit:i,origin:l});function rn(i,l){if(i&1&&(P(0),k(1,"nz-icon",2),F()),i&2){let e=c(3);g(),f("ant-select-tree-switcher-icon",e.nzSelectMode)("ant-tree-switcher-icon",!e.nzSelectMode)}}function an(i,l){if(i&1&&v(0,rn,2,4,"ng-container",1),i&2){let e=c(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",U(2,le,e.context,e.context.origin))}}function sn(i,l){i&1&&k(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function dn(i,l){if(i&1&&_(0,an,1,5,"ng-container")(1,sn,1,1,"nz-icon",0),i&2){let e=c();T(e.isLoading?1:0)}}function ln(i,l){if(i&1&&k(0,"nz-icon",3),i&2){let e=c(4);z("nzType",e.isSwitcherOpen?"minus-square":"plus-square")}}function cn(i,l){i&1&&k(0,"nz-icon",4)}function hn(i,l){if(i&1&&(P(0),_(1,ln,1,1,"nz-icon",3)(2,cn,1,0,"nz-icon",4),F()),i&2){let e=c(3);g(),T(e.isShowLineIcon?1:2)}}function zn(i,l){if(i&1&&v(0,hn,3,1,"ng-container",1),i&2){let e=c(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",U(2,le,e.context,e.context.origin))}}function pn(i,l){i&1&&k(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function gn(i,l){if(i&1&&_(0,zn,1,5,"ng-container")(1,pn,1,1,"nz-icon",0),i&2){let e=c();T(e.isLoading?1:0)}}function un(i,l){}function fn(i,l){if(i&1&&(x(0,"span")(1,"span"),k(2,"nz-icon",4),N()()),i&2){let e=c(2);f("ant-tree-icon__open",e.isSwitcherOpen)("ant-tree-icon__close",e.isSwitcherClose)("ant-tree-icon_loading",e.isLoading)("ant-select-tree-iconEle",e.selectMode)("ant-tree-iconEle",!e.selectMode),g(),f("ant-select-tree-iconEle",e.selectMode)("ant-select-tree-icon__customize",e.selectMode)("ant-tree-iconEle",!e.selectMode)("ant-tree-icon__customize",!e.selectMode),g(),z("nzType",e.icon)}}function Cn(i,l){if(i&1&&(_(0,fn,3,19,"span",2),k(1,"span",3),ve(2,"nzHighlight")),i&2){let e=c();T(e.icon&&e.showIcon?0:-1),g(),z("innerHTML",Me(2,2,e.title,e.matchedValue,"i","font-highlight"),Se)}}function mn(i,l){if(i&1&&k(0,"nz-tree-drop-indicator",1),i&2){let e=c();z("dropPosition",e.dragPosition)("level",e.context.level)}}function Sn(i,l){if(i&1){let e=A();x(0,"nz-tree-node-switcher",4),I("click",function(n){C(e);let d=c();return m(d.clickExpand(n))}),N()}if(i&2){let e=c();z("nzShowExpand",e.nzShowExpand)("nzShowLine",e.nzShowLine)("nzExpandedIcon",e.nzExpandedIcon)("nzSelectMode",e.nzSelectMode)("context",e.nzTreeNode)("isLeaf",e.isLeaf)("isExpanded",e.isExpanded)("isLoading",e.isLoading)}}function _n(i,l){if(i&1){let e=A();x(0,"nz-tree-node-checkbox",5),I("click",function(n){C(e);let d=c();return m(d.clickCheckbox(n))}),N()}if(i&2){let e=c();z("nzSelectMode",e.nzSelectMode)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisabled",e.isDisabled)("isDisableCheckbox",e.isDisableCheckbox)}}var Tn=["nzTreeTemplate"],Qe=i=>({$implicit:i});function kn(i,l){}function Dn(i,l){if(i&1&&(P(0),v(1,kn,0,0,"ng-template",9),F()),i&2){let e=l.$implicit;c(2);let t=ie(9);g(),z("ngTemplateOutlet",t)("ngTemplateOutletContext",re(2,Qe,e))}}function xn(i,l){if(i&1&&(x(0,"cdk-virtual-scroll-viewport",7),v(1,Dn,2,4,"ng-container",8),N()),i&2){let e=c();oe("height",e.nzVirtualHeight),f("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("itemSize",e.nzVirtualItemSize)("minBufferPx",e.nzVirtualMinBufferPx)("maxBufferPx",e.nzVirtualMaxBufferPx),g(),z("cdkVirtualForOf",e.nzFlattenNodes)("cdkVirtualForTrackBy",e.trackByFlattenNode)}}function Nn(i,l){}function bn(i,l){if(i&1&&v(0,Nn,0,0,"ng-template",9),i&2){let e=l.$implicit;c(2);let t=ie(9);z("ngTemplateOutlet",t)("ngTemplateOutletContext",re(2,Qe,e))}}function wn(i,l){if(i&1&&(x(0,"div",10),J(1,bn,1,4,null,9,xe().trackByFlattenNode,!0),N()),i&2){let e=c();f("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("@.disabled",e.beforeInit||!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("@treeCollapseMotion",e.nzFlattenNodes.length),g(),X(e.nzFlattenNodes)}}function En(i,l){if(i&1){let e=A();x(0,"nz-tree-node",11),I("nzExpandChange",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzClick",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzDblClick",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzContextMenu",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzCheckboxChange",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzOnDragStart",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzOnDragEnter",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzOnDragOver",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzOnDragLeave",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzOnDragEnd",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))})("nzOnDrop",function(n){C(e);let d=c();return m(d.eventTriggerChanged(n))}),N()}if(i&2){let e=l.$implicit,t=c();z("icon",e.icon)("title",e.title)("isLoading",e.isLoading)("isSelected",e.isSelected)("isDisabled",e.isDisabled)("isMatched",e.isMatched)("isExpanded",e.isExpanded)("isLeaf",e.isLeaf)("isStart",e.isStart)("isEnd",e.isEnd)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisableCheckbox",e.isDisableCheckbox)("isSelectable",e.isSelectable)("canHide",e.canHide)("nzTreeNode",e)("nzSelectMode",t.nzSelectMode)("nzShowLine",t.nzShowLine)("nzExpandedIcon",t.nzExpandedIcon)("nzDraggable",t.nzDraggable)("nzCheckable",t.nzCheckable)("nzShowExpand",t.nzShowExpand)("nzAsyncData",t.nzAsyncData)("nzSearchValue",t.nzSearchValue)("nzHideUnMatched",t.nzHideUnMatched)("nzBeforeDrop",t.nzBeforeDrop)("nzShowIcon",t.nzShowIcon)("nzTreeTemplate",t.nzTreeTemplate||t.nzTreeTemplateChild)}}var vn=(()=>{class i{dropPosition;level=1;direction="ltr";style={};cdr=u(V);ngOnChanges(){this.renderIndicator(this.dropPosition,this.direction)}renderIndicator(e,t="ltr"){let d=t==="ltr"?"left":"right",S=t==="ltr"?"right":"left",w={[d]:"4px",[S]:"0px"};switch(e){case-1:w.top="-3px";break;case 1:w.bottom="-3px";break;case 0:w.bottom="-3px",w[d]="28px";break;default:w.display="none";break}this.style=w,this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-drop-indicator"]],hostAttrs:[1,"ant-tree-drop-indicator"],hostVars:2,hostBindings:function(t,n){t&2&&K(n.style)},inputs:{dropPosition:"dropPosition",level:[2,"level","level",Oe],direction:"direction"},exportAs:["nzTreeDropIndicator"],features:[L],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0})}return i})(),Mn=(()=>{class i{nzTreeLevel=0;nzIsStart=[];nzIsEnd=[];nzSelectMode=!1;listOfUnit=[];ngOnChanges(e){let{nzTreeLevel:t}=e;t&&(this.listOfUnit=[...new Array(t.currentValue||0)])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-indent"]],hostVars:5,hostBindings:function(t,n){t&2&&(W("aria-hidden",!0),f("ant-tree-indent",!n.nzSelectMode)("ant-select-tree-indent",n.nzSelectMode))},inputs:{nzTreeLevel:"nzTreeLevel",nzIsStart:"nzIsStart",nzIsEnd:"nzIsEnd",nzSelectMode:"nzSelectMode"},exportAs:["nzTreeIndent"],features:[L],decls:2,vars:0,consts:[[3,"ant-tree-indent-unit","ant-select-tree-indent-unit","ant-select-tree-indent-unit-start","ant-tree-indent-unit-start","ant-select-tree-indent-unit-end","ant-tree-indent-unit-end"]],template:function(t,n){t&1&&J(0,on,1,12,"span",0,Ne),t&2&&X(n.listOfUnit)},encapsulation:2,changeDetection:0})}return i})(),yn=(()=>{class i{nzSelectMode=!1;isChecked;isHalfChecked;isDisabled;isDisableCheckbox;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node-checkbox","builtin",""]],hostVars:16,hostBindings:function(t,n){t&2&&f("ant-select-tree-checkbox",n.nzSelectMode)("ant-select-tree-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-checkbox-disabled",n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))("ant-tree-checkbox",!n.nzSelectMode)("ant-tree-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-checkbox-disabled",!n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))},inputs:{nzSelectMode:"nzSelectMode",isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisabled:[2,"isDisabled","isDisabled",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a]},attrs:je,decls:1,vars:4,template:function(t,n){t&1&&ee(0,"span"),t&2&&f("ant-tree-checkbox-inner",!n.nzSelectMode)("ant-select-tree-checkbox-inner",n.nzSelectMode)},encapsulation:2,changeDetection:0})}return i})(),Ze=(()=>{class i{nzShowExpand;nzShowLine;nzExpandedIcon;nzSelectMode=!1;context;isLeaf;isLoading;isExpanded;get isShowLineIcon(){return!this.isLeaf&&!!this.nzShowLine}get isShowSwitchIcon(){return!this.isLeaf&&!this.nzShowLine}get isSwitcherOpen(){return!!this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node-switcher"]],hostVars:16,hostBindings:function(t,n){t&2&&f("ant-select-tree-switcher",n.nzSelectMode)("ant-select-tree-switcher-noop",n.nzSelectMode&&n.isLeaf)("ant-select-tree-switcher_open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-switcher_close",n.nzSelectMode&&n.isSwitcherClose)("ant-tree-switcher",!n.nzSelectMode)("ant-tree-switcher-noop",!n.nzSelectMode&&n.isLeaf)("ant-tree-switcher_open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-switcher_close",!n.nzSelectMode&&n.isSwitcherClose)},inputs:{nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzExpandedIcon:"nzExpandedIcon",nzSelectMode:"nzSelectMode",context:"context",isLeaf:[2,"isLeaf","isLeaf",a],isLoading:[2,"isLoading","isLoading",a],isExpanded:[2,"isExpanded","isExpanded",a]},decls:2,vars:2,consts:[["nzType","loading",1,"ant-tree-switcher-loading-icon",3,"nzSpin"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nzType","caret-down"],[1,"ant-tree-switcher-line-icon",3,"nzType"],["nzType","file",1,"ant-tree-switcher-line-icon"]],template:function(t,n){t&1&&(_(0,dn,2,1),_(1,gn,2,1)),t&2&&(T(n.isShowSwitchIcon?0:-1),g(),T(n.nzShowLine?1:-1))},dependencies:[de,se,He,Be],encapsulation:2,changeDetection:0})}return i})(),qe=(()=>{class i{cdr=u(V);searchValue;treeTemplate=null;draggable;showIcon;selectMode=!1;context;icon;title;isLoading;isSelected;isDisabled;isMatched;isExpanded;isLeaf;showIndicator=!0;dragPosition;get canDraggable(){return this.draggable&&!this.isDisabled?!0:null}get matchedValue(){return this.isMatched?this.searchValue:""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}ngOnChanges(e){let{showIndicator:t,dragPosition:n}=e;(t||n)&&this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node-title"]],hostVars:21,hostBindings:function(t,n){t&2&&(W("title",n.title)("draggable",n.canDraggable)("aria-grabbed",n.canDraggable),f("draggable",n.canDraggable)("ant-select-tree-node-content-wrapper",n.selectMode)("ant-select-tree-node-content-wrapper-open",n.selectMode&&n.isSwitcherOpen)("ant-select-tree-node-content-wrapper-close",n.selectMode&&n.isSwitcherClose)("ant-select-tree-node-selected",n.selectMode&&n.isSelected)("ant-tree-node-content-wrapper",!n.selectMode)("ant-tree-node-content-wrapper-open",!n.selectMode&&n.isSwitcherOpen)("ant-tree-node-content-wrapper-close",!n.selectMode&&n.isSwitcherClose)("ant-tree-node-selected",!n.selectMode&&n.isSelected))},inputs:{searchValue:"searchValue",treeTemplate:"treeTemplate",draggable:[2,"draggable","draggable",a],showIcon:[2,"showIcon","showIcon",a],selectMode:"selectMode",context:"context",icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],showIndicator:"showIndicator",dragPosition:"dragPosition"},features:[L],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropPosition","level"],[3,"ant-tree-icon__open","ant-tree-icon__close","ant-tree-icon_loading","ant-select-tree-iconEle","ant-tree-iconEle"],[1,"ant-tree-title",3,"innerHTML"],[3,"nzType"]],template:function(t,n){t&1&&(v(0,un,0,0,"ng-template",0),_(1,Cn,3,7),_(2,mn,1,2,"nz-tree-drop-indicator",1)),t&2&&(z("ngTemplateOutlet",n.treeTemplate)("ngTemplateOutletContext",U(4,le,n.context,n.context.origin)),g(),T(n.treeTemplate?-1:1),g(),T(n.showIndicator?2:-1))},dependencies:[ae,de,se,vn,Re],encapsulation:2,changeDetection:0})}return i})(),Ye=(()=>{class i{noAnimation=u(j,{host:!0,optional:!0});nzTreeService=u(B);ngZone=u(De);renderer=u(_e);el=u(me).nativeElement;cdr=u(V);destroyRef=u(G);icon="";title="";isLoading=!1;isSelected=!1;isDisabled=!1;isMatched=!1;isExpanded;isLeaf;isChecked;isHalfChecked;isDisableCheckbox;isSelectable;canHide;isStart=[];isEnd=[];nzTreeNode;nzShowLine;nzShowExpand;nzCheckable;nzAsyncData;nzHideUnMatched=!1;nzNoAnimation=!1;nzSelectMode=!1;nzShowIcon=!1;nzExpandedIcon;nzTreeTemplate=null;nzBeforeDrop;nzSearchValue="";nzDraggable=!1;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;destroy$=new Y;dragPos=2;dragPosClass={0:"drag-over",1:"drag-over-gap-bottom","-1":"drag-over-gap-top"};draggingKey=null;showIndicator=!1;get displayStyle(){return this.nzSearchValue&&this.nzHideUnMatched&&!this.isMatched&&!this.isExpanded&&this.canHide?"none":""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}clickExpand(e){e.preventDefault(),!this.isLoading&&!this.isLeaf&&(this.nzAsyncData&&this.nzTreeNode.children.length===0&&!this.isExpanded&&(this.nzTreeNode.isLoading=!0),this.nzTreeNode.setExpanded(!this.isExpanded)),this.nzTreeService.setExpandedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("expand",this.nzTreeNode,e);this.nzExpandChange.emit(t)}clickSelect(e){e.preventDefault(),this.isSelectable&&!this.isDisabled&&(this.nzTreeNode.isSelected=!this.nzTreeNode.isSelected),this.nzTreeService.setSelectedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("click",this.nzTreeNode,e);this.nzClick.emit(t)}dblClick(e){e.preventDefault();let t=this.nzTreeService.formatEvent("dblclick",this.nzTreeNode,e);this.nzDblClick.emit(t)}contextMenu(e){e.preventDefault();let t=this.nzTreeService.formatEvent("contextmenu",this.nzTreeNode,e);this.nzContextMenu.emit(t)}clickCheckbox(e){if(e.preventDefault(),this.isDisabled||this.isDisableCheckbox)return;this.nzTreeNode.isChecked=!this.nzTreeNode.isChecked,this.nzTreeNode.isHalfChecked=!1,this.nzTreeService.setCheckedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("check",this.nzTreeNode,e);this.nzCheckboxChange.emit(t)}clearDragClass(){["drag-over-gap-top","drag-over-gap-bottom","drag-over","drop-target"].forEach(t=>{this.renderer.removeClass(this.el,t)})}handleDragStart(e){try{e.dataTransfer.setData("text/plain",this.nzTreeNode.key)}catch{}this.nzTreeService.setSelectedNode(this.nzTreeNode),this.draggingKey=this.nzTreeNode.key;let t=this.nzTreeService.formatEvent("dragstart",this.nzTreeNode,e);this.nzOnDragStart.emit(t)}handleDragEnter(e){e.preventDefault(),this.showIndicator=this.nzTreeNode.key!==this.nzTreeService.getSelectedNode()?.key,this.renderIndicator(2),this.ngZone.run(()=>{let t=this.nzTreeService.formatEvent("dragenter",this.nzTreeNode,e);this.nzOnDragEnter.emit(t)})}handleDragOver(e){e.preventDefault();let t=this.nzTreeService.calcDropPosition(e);this.dragPos!==t&&(this.clearDragClass(),this.renderIndicator(t),this.dragPos===0&&this.isLeaf||(this.renderer.addClass(this.el,this.dragPosClass[this.dragPos]),this.renderer.addClass(this.el,"drop-target")));let n=this.nzTreeService.formatEvent("dragover",this.nzTreeNode,e);this.nzOnDragOver.emit(n)}handleDragLeave(e){e.preventDefault(),this.renderIndicator(2),this.clearDragClass();let t=this.nzTreeService.formatEvent("dragleave",this.nzTreeNode,e);this.nzOnDragLeave.emit(t)}handleDragDrop(e){e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.showIndicator=!1,this.clearDragClass();let t=this.nzTreeService.getSelectedNode();if(!t||t&&t.key===this.nzTreeNode.key||this.dragPos===0&&this.isLeaf)return;let n=this.nzTreeService.formatEvent("drop",this.nzTreeNode,e),d=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzBeforeDrop?this.nzBeforeDrop({dragNode:this.nzTreeService.getSelectedNode(),node:this.nzTreeNode,pos:this.dragPos}).subscribe(S=>{S&&this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n),this.nzOnDragEnd.emit(d)}):this.nzTreeNode&&(this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n))})}handleDragEnd(e){e.preventDefault(),this.ngZone.run(()=>{if(this.nzBeforeDrop)this.draggingKey=null,this.markForCheck();else{this.draggingKey=null;let t=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzOnDragEnd.emit(t)}})}handDragEvent(){this.nzDraggable?(this.destroy$=new Y,M(this.el,"dragstart").pipe(O(this.destroy$)).subscribe(e=>this.handleDragStart(e)),M(this.el,"dragenter").pipe(O(this.destroy$)).subscribe(e=>this.handleDragEnter(e)),M(this.el,"dragover").pipe(O(this.destroy$)).subscribe(e=>this.handleDragOver(e)),M(this.el,"dragleave").pipe(O(this.destroy$)).subscribe(e=>this.handleDragLeave(e)),M(this.el,"drop").pipe(O(this.destroy$)).subscribe(e=>this.handleDragDrop(e)),M(this.el,"dragend").pipe(O(this.destroy$)).subscribe(e=>this.handleDragEnd(e))):(this.destroy$.next(),this.destroy$.complete())}markForCheck(){this.cdr.markForCheck()}constructor(){this.destroyRef.onDestroy(()=>{this.destroy$.next(),this.destroy$.complete()})}ngOnInit(){this.nzTreeNode.component=this,M(this.el,"mousedown").pipe($(this.destroyRef)).subscribe(e=>{this.nzSelectMode&&e.preventDefault()})}ngOnChanges(e){let{nzDraggable:t}=e;t&&this.handDragEvent()}renderIndicator(e){this.ngZone.run(()=>{this.showIndicator=e!==2,!(this.nzTreeNode.key===this.nzTreeService.getSelectedNode()?.key||e===0&&this.isLeaf)&&(this.dragPos=e,this.cdr.markForCheck())})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["nz-tree-node","builtin",""]],hostVars:36,hostBindings:function(t,n){t&2&&(oe("display",n.displayStyle),f("ant-select-tree-treenode",n.nzSelectMode)("ant-select-tree-treenode-disabled",n.nzSelectMode&&n.isDisabled)("ant-select-tree-treenode-switcher-open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-treenode-switcher-close",n.nzSelectMode&&n.isSwitcherClose)("ant-select-tree-treenode-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-treenode-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-treenode-selected",n.nzSelectMode&&n.isSelected)("ant-select-tree-treenode-loading",n.nzSelectMode&&n.isLoading)("ant-tree-treenode",!n.nzSelectMode)("ant-tree-treenode-disabled",!n.nzSelectMode&&n.isDisabled)("ant-tree-treenode-switcher-open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-treenode-switcher-close",!n.nzSelectMode&&n.isSwitcherClose)("ant-tree-treenode-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-treenode-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-treenode-selected",!n.nzSelectMode&&n.isSelected)("ant-tree-treenode-loading",!n.nzSelectMode&&n.isLoading)("dragging",n.draggingKey===n.nzTreeNode.key))},inputs:{icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a],isSelectable:[2,"isSelectable","isSelectable",a],canHide:[2,"canHide","canHide",a],isStart:"isStart",isEnd:"isEnd",nzTreeNode:"nzTreeNode",nzShowLine:[2,"nzShowLine","nzShowLine",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzExpandedIcon:"nzExpandedIcon",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzSearchValue:"nzSearchValue",nzDraggable:[2,"nzDraggable","nzDraggable",a]},outputs:{nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTreeBuiltinNode"],features:[L],attrs:je,decls:4,vars:22,consts:[[3,"nzTreeLevel","nzSelectMode","nzIsStart","nzIsEnd"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"],[3,"dblclick","click","contextmenu","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","searchValue","treeTemplate","draggable","showIcon","selectMode","context","showIndicator","dragPosition"],[3,"click","nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"click","nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"]],template:function(t,n){t&1&&(k(0,"nz-tree-indent",0),_(1,Sn,1,8,"nz-tree-node-switcher",1),_(2,_n,1,5,"nz-tree-node-checkbox",2),x(3,"nz-tree-node-title",3),I("dblclick",function(S){return n.dblClick(S)})("click",function(S){return n.clickSelect(S)})("contextmenu",function(S){return n.contextMenu(S)}),N()),t&2&&(z("nzTreeLevel",n.nzTreeNode.level)("nzSelectMode",n.nzSelectMode)("nzIsStart",n.isStart)("nzIsEnd",n.isEnd),g(),T(n.nzShowExpand?1:-1),g(),T(n.nzCheckable?2:-1),g(),z("icon",n.icon)("title",n.title)("isLoading",n.isLoading)("isSelected",n.isSelected)("isDisabled",n.isDisabled)("isMatched",n.isMatched)("isExpanded",n.isExpanded)("isLeaf",n.isLeaf)("searchValue",n.nzSearchValue)("treeTemplate",n.nzTreeTemplate)("draggable",n.nzDraggable)("showIcon",n.nzShowIcon)("selectMode",n.nzSelectMode)("context",n.nzTreeNode)("showIndicator",n.showIndicator)("dragPosition",n.dragPos))},dependencies:[Mn,Ze,yn,qe],encapsulation:2,changeDetection:0})}return i})(),Ge=(()=>{class i extends B{static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ce(i)))(n||i)}})();static \u0275prov=ue({token:i,factory:i.\u0275fac})}return i})();function On(){let i=u(Ue,{skipSelf:!0,optional:!0}),l=u(Ge);return i??l}var Ln="tree",In=(()=>{var D;let i=$e,l,e=[],t=[],n,d=[],S=[],w,ce=[],he=[];return D=class extends i{_nzModuleName=Ln;noAnimation=u(j,{host:!0,optional:!0});nzConfigService=u(Ie);cdr=u(V);directionality=u(Le);destroyRef=u(G);nzShowIcon=y(this,e,!1);nzHideUnMatched=(y(this,t),y(this,d,!1));nzBlockNode=(y(this,S),y(this,ce,!1));nzExpandAll=(y(this,he),!1);nzSelectMode=!1;nzCheckStrictly=!1;nzShowExpand=!0;nzShowLine=!1;nzCheckable=!1;nzAsyncData=!1;nzDraggable=!1;nzMultiple=!1;nzExpandedIcon;nzVirtualItemSize=28;nzVirtualMaxBufferPx=500;nzVirtualMinBufferPx=28;nzVirtualHeight=null;nzTreeTemplate;nzBeforeDrop;nzData=[];nzExpandedKeys=[];nzSelectedKeys=[];nzCheckedKeys=[];nzSearchValue="";nzSearchFunc;nzTreeTemplateChild;cdkVirtualScrollViewport;nzFlattenNodes=[];beforeInit=!0;dir="ltr";nzExpandedKeysChange=new h;nzSelectedKeysChange=new h;nzCheckedKeysChange=new h;nzSearchValueChange=new h;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;HIDDEN_STYLE={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0};HIDDEN_NODE_STYLE={position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"};onChange=()=>null;onTouched=()=>null;writeValue(r){this.handleNzData(r)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}renderTreeProperties(r){let o=!1,s=!1,{nzData:b,nzExpandedKeys:p,nzSelectedKeys:We,nzCheckedKeys:Je,nzCheckStrictly:ze,nzExpandAll:pe,nzMultiple:Xe,nzSearchValue:Z}=r;pe&&(o=!0,s=this.nzExpandAll),Xe&&(this.nzTreeService.isMultiple=this.nzMultiple),ze&&(this.nzTreeService.isCheckStrictly=this.nzCheckStrictly),b&&this.handleNzData(this.nzData),Je&&this.handleCheckedKeys(this.nzCheckedKeys),ze&&this.handleCheckedKeys(null),(p||pe)&&(o=!0,this.handleExpandedKeys(s||this.nzExpandedKeys)),We&&this.handleSelectedKeys(this.nzSelectedKeys,this.nzMultiple),Z&&(Z.firstChange&&!this.nzSearchValue||(o=!1,this.handleSearchValue(Z.currentValue,this.nzSearchFunc),this.nzSearchValueChange.emit(this.nzTreeService.formatEvent("search",null,null))));let en=this.getExpandedNodeList().map(tn=>tn.key),nn=o?s||this.nzExpandedKeys:en;this.handleFlattenNodes(this.nzTreeService.rootNodes,nn)}trackByFlattenNode(r,o){return o.key}handleNzData(r){if(Array.isArray(r)){let o=this.coerceTreeNodes(r);this.nzTreeService.initTree(o)}}handleFlattenNodes(r,o=[]){this.nzTreeService.flattenTreeData(r,o)}handleCheckedKeys(r){this.nzTreeService.conductCheck(r,this.nzCheckStrictly)}handleExpandedKeys(r=[]){this.nzTreeService.conductExpandedKeys(r)}handleSelectedKeys(r,o){this.nzTreeService.conductSelectedKeys(r,o)}handleSearchValue(r,o){let s=Ke(this.nzTreeService.rootNodes,!0).map(p=>p.data),b=p=>o?o(p.origin):!!r&&p.title.toLowerCase().includes(r.toLowerCase());s.forEach(p=>{p.isMatched=b(p),p.canHide=!p.isMatched,p.isMatched?this.nzTreeService.expandNodeAllParentBySearch(p):(p.setExpanded(!1),this.nzTreeService.setExpandedNodeList(p)),this.nzTreeService.setMatchedNodeList(p)})}eventTriggerChanged(r){let o=r.node;switch(r.eventName){case"expand":this.renderTree(),this.nzExpandChange.emit(r);break;case"click":this.nzClick.emit(r);break;case"dblclick":this.nzDblClick.emit(r);break;case"contextmenu":this.nzContextMenu.emit(r);break;case"check":{this.nzTreeService.setCheckedNodeList(o),this.nzCheckStrictly||this.nzTreeService.conduct(o);let s=this.nzTreeService.formatEvent("check",o,r.event);this.nzCheckboxChange.emit(s);let b=this.nzTreeService.getCheckedNodeKeys();this.nzCheckedKeysChange.emit(b);break}case"dragstart":o.isExpanded&&(o.setExpanded(!o.isExpanded),this.renderTree()),this.nzOnDragStart.emit(r);break;case"dragenter":{let s=this.nzTreeService.getSelectedNode();s&&s.key!==o.key&&!o.isExpanded&&!o.isLeaf&&(o.setExpanded(!0),this.renderTree()),this.nzOnDragEnter.emit(r);break}case"dragover":this.nzOnDragOver.emit(r);break;case"dragleave":this.nzOnDragLeave.emit(r);break;case"dragend":this.nzOnDragEnd.emit(r);break;case"drop":this.renderTree(),this.nzOnDrop.emit(r);break}}renderTree(){this.handleFlattenNodes(this.nzTreeService.rootNodes,this.getExpandedNodeList().map(r=>r.key)),this.cdr.markForCheck()}constructor(){super(u(B))}ngOnInit(){this.nzTreeService.flattenNodes$.pipe($(this.destroyRef)).subscribe(r=>{this.nzFlattenNodes=this.nzVirtualHeight&&this.nzHideUnMatched&&this.nzSearchValue?.length>0?r.filter(o=>!o.canHide):r,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe($(this.destroyRef)).subscribe(r=>{this.dir=r,this.cdr.detectChanges()})}ngOnChanges(r){this.renderTreeProperties(r)}ngAfterViewInit(){this.beforeInit=!1}},(()=>{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;l=[R()],n=[R()],w=[R()],H(null,null,l,{kind:"field",name:"nzShowIcon",static:!1,private:!1,access:{has:o=>"nzShowIcon"in o,get:o=>o.nzShowIcon,set:(o,s)=>{o.nzShowIcon=s}},metadata:r},e,t),H(null,null,n,{kind:"field",name:"nzHideUnMatched",static:!1,private:!1,access:{has:o=>"nzHideUnMatched"in o,get:o=>o.nzHideUnMatched,set:(o,s)=>{o.nzHideUnMatched=s}},metadata:r},d,S),H(null,null,w,{kind:"field",name:"nzBlockNode",static:!1,private:!1,access:{has:o=>"nzBlockNode"in o,get:o=>o.nzBlockNode,set:(o,s)=>{o.nzBlockNode=s}},metadata:r},ce,he),r&&Object.defineProperty(D,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})})(),q(D,"\u0275fac",function(o){return new(o||D)}),q(D,"\u0275cmp",E({type:D,selectors:[["nz-tree"]],contentQueries:function(o,s,b){if(o&1&&be(b,Tn,7),o&2){let p;ne(p=te())&&(s.nzTreeTemplateChild=p.first)}},viewQuery:function(o,s){if(o&1&&we(Q,5,Q),o&2){let b;ne(b=te())&&(s.cdkVirtualScrollViewport=b.first)}},hostVars:20,hostBindings:function(o,s){o&2&&f("ant-select-tree",s.nzSelectMode)("ant-select-tree-show-line",s.nzSelectMode&&s.nzShowLine)("ant-select-tree-icon-hide",s.nzSelectMode&&!s.nzShowIcon)("ant-select-tree-block-node",s.nzSelectMode&&s.nzBlockNode)("ant-tree",!s.nzSelectMode)("ant-tree-rtl",s.dir==="rtl")("ant-tree-show-line",!s.nzSelectMode&&s.nzShowLine)("ant-tree-icon-hide",!s.nzSelectMode&&!s.nzShowIcon)("ant-tree-block-node",!s.nzSelectMode&&s.nzBlockNode)("draggable-tree",s.nzDraggable)},inputs:{nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzBlockNode:[2,"nzBlockNode","nzBlockNode",a],nzExpandAll:[2,"nzExpandAll","nzExpandAll",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzCheckStrictly:[2,"nzCheckStrictly","nzCheckStrictly",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzDraggable:[2,"nzDraggable","nzDraggable",a],nzMultiple:[2,"nzMultiple","nzMultiple",a],nzExpandedIcon:"nzExpandedIcon",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualHeight:"nzVirtualHeight",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzData:"nzData",nzExpandedKeys:"nzExpandedKeys",nzSelectedKeys:"nzSelectedKeys",nzCheckedKeys:"nzCheckedKeys",nzSearchValue:"nzSearchValue",nzSearchFunc:"nzSearchFunc"},outputs:{nzExpandedKeysChange:"nzExpandedKeysChange",nzSelectedKeysChange:"nzSelectedKeysChange",nzCheckedKeysChange:"nzCheckedKeysChange",nzSearchValueChange:"nzSearchValueChange",nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTree"],features:[Ee([Ge,{provide:B,useFactory:On},{provide:Pe,useExisting:ge(()=>D),multi:!0}]),ke,L],decls:10,vars:7,consts:[["nodeTemplate",""],[1,"ant-tree-treenode"],[1,"ant-tree-indent"],[1,"ant-tree-indent-unit"],[1,"ant-tree-list",2,"position","relative"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","itemSize","minBufferPx","maxBufferPx","height"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","nzNoAnimation"],[3,"itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoAnimation"],["builtin","",3,"nzExpandChange","nzClick","nzDblClick","nzContextMenu","nzCheckboxChange","nzOnDragStart","nzOnDragEnter","nzOnDragOver","nzOnDragLeave","nzOnDragEnd","nzOnDrop","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","isStart","isEnd","isChecked","isHalfChecked","isDisableCheckbox","isSelectable","canHide","nzTreeNode","nzSelectMode","nzShowLine","nzExpandedIcon","nzDraggable","nzCheckable","nzShowExpand","nzAsyncData","nzSearchValue","nzHideUnMatched","nzBeforeDrop","nzShowIcon","nzTreeTemplate"]],template:function(o,s){o&1&&(x(0,"div"),k(1,"input"),N(),x(2,"div",1)(3,"div",2),k(4,"div",3),N()(),x(5,"div",4),_(6,xn,2,11,"cdk-virtual-scroll-viewport",5)(7,wn,3,7,"div",6),N(),v(8,En,1,28,"ng-template",null,0,ye)),o&2&&(g(),K(s.HIDDEN_STYLE),g(),K(s.HIDDEN_NODE_STYLE),g(3),f("ant-select-tree-list",s.nzSelectMode),g(),T(s.nzVirtualHeight?6:7))},dependencies:[Q,Fe,Ae,ae,j,Ye],encapsulation:2,data:{animation:[Ve]},changeDetection:0})),D})(),ct=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Te({type:i});static \u0275inj=fe({imports:[In,Ye,Ze,qe]})}return i})();export{In as a,ct as b};
