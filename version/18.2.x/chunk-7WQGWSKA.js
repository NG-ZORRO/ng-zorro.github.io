import{d as Te,e as Ne}from"./chunk-OFCIJL47.js";import{$a as De,Ea as _e,Ga as Ie,Ha as X,I as P,Ib as A,Va as ke,_a as be,cb as Pe,db as Ee,kb as xe,n as Se,wa as Z,xa as E}from"./chunk-BYER7FCH.js";import{$ as m,$b as O,Ba as ae,Cb as me,D as W,Ea as z,Fa as y,Fb as R,Gb as pe,Hb as V,Ib as M,Jb as D,Ka as N,L as te,Ma as $,Na as ce,Pa as le,Qb as F,Sb as j,Tb as B,Ub as G,Vb as h,Vc as q,Wb as g,Xb as f,_ as ie,_c as ye,bc as de,cc as v,dc as ge,ec as d,f as _,fc as fe,ga as ne,gc as ue,ha as oe,hb as he,id as Ce,l as I,la as b,lc as U,ma as L,mb as p,mc as Q,nb as l,nc as K,pc as ve,ra as H,sa as se,sc as we,ta as re,xc as ze,y as k,yc as Y}from"./chunk-U274QCT3.js";import{a as u}from"./chunk-RKLIRILV.js";var He=["*"],$e=["imgRef"],Ve=["imagePreviewWrapper"];function je(i,n){if(i&1){let s=O();h(0,"div",13),v("click",function(t){z(s);let o=d();return y(o.onSwitchLeft(t))}),f(1,"span",14),g(),h(2,"div",15),v("click",function(t){z(s);let o=d();return y(o.onSwitchRight(t))}),f(3,"span",16),g()}if(i&2){let s=d();D("ant-image-preview-switch-left-disabled",s.index<=0),p(2),D("ant-image-preview-switch-right-disabled",s.index>=s.images.length-1)}}function Be(i,n){if(i&1&&(h(0,"li",5),ve(1),g()),i&2){let s=d();p(),we("",s.index+1," / ",s.images.length,"")}}function Ge(i,n){if(i&1){let s=O();h(0,"li",17),v("click",function(){let t=z(s).$implicit;return y(t.onClick())}),f(1,"span",18),g()}if(i&2){let s,e=n.$implicit,t=d();D("ant-image-preview-operations-operation-disabled",t.zoomOutDisabled&&e.type==="zoomOut"),p(),V("nzType",e.icon)("nzRotate",(s=e.rotate)!==null&&s!==void 0?s:0)}}function Ue(i,n){if(i&1&&f(0,"img",20,1),i&2){let s=d().$implicit,e=d();M("width",s.width)("height",s.height)("transform",e.previewImageTransform),pe("src",e.sanitizerResourceUrl(s.src),he)("srcset",s.srcset)("alt",s.alt)}}function Qe(i,n){if(i&1&&R(0,Ue,2,9,"img",19),i&2){let s=n.$index,e=d();F(s===e.index?0:-1)}}var Ke=(()=>{let n=class n{constructor(){this.nzScaleStep=null,this.images=[]}addImage(e){this.images.push(e)}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=H({type:n,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[Y],ngContentSelectors:He,decls:1,vars:0,template:function(t,o){t&1&&(fe(),ue(0))},encapsulation:2,changeDetection:0});let i=n;return i})();var Ae="image";function Ye(i){let n={};return i.width<=i.clientWidth&&i.height<=i.clientHeight&&(n={x:0,y:0}),(i.width>i.clientWidth||i.height>i.clientHeight)&&(n={x:Oe(i.left,i.width,i.clientWidth),y:Oe(i.top,i.height,i.clientHeight)}),n}function qe(i){let n=i.getBoundingClientRect(),s=document.documentElement;return{left:n.left+(window.pageXOffset||s.scrollLeft)-(s.clientLeft||document.body.clientLeft||0),top:n.top+(window.pageYOffset||s.scrollTop)-(s.clientTop||document.body.clientTop||0)}}function Xe(){let i=document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return{width:i,height:n}}function Oe(i,n,s){let e=i+n,t=(n-s)/2,o=null;return n>s?(i>0&&(o=t),i<0&&e<s&&(o=-t)):(i<0||e>s)&&(o=i<0?t:-t),o}var x=class{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}},Ze={x:0,y:0},J=.5,Je=1,et=0,We=(()=>{let n=class n{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){let e=this.nzConfigService.getConfigForComponent(Ae)||{};return this.config.nzMaskClosable??e.nzMaskClosable??!0}constructor(e,t,o,r,c,a){this.ngZone=e,this.cdr=t,this.nzConfigService=o,this.config=r,this.destroy$=c,this.sanitizer=a,this._defaultNzZoom=Je,this._defaultNzScaleStep=J,this._defaultNzRotate=et,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationStateChanged=new $,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"},{icon:"swap",onClick:()=>{this.onHorizontalFlip()},type:"flipHorizontally"},{icon:"swap",onClick:()=>{this.onVerticalFlip()},type:"flipVertically",rotate:90}],this.zoomOutDisabled=!1,this.position=u({},Ze),this.closeClick=new $,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=this.config.nzFlipHorizontally??!1,this.flipVertically=this.config.nzFlipVertically??!1,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{k(this.imagePreviewWrapper.nativeElement,"mousedown").pipe(m(this.destroy$)).subscribe(()=>{this.isDragging=!0}),k(this.imagePreviewWrapper.nativeElement,"wheel").pipe(m(this.destroy$)).subscribe(e=>{this.ngZone.run(()=>this.wheelZoomEventHandler(e))})})}setImages(e,t){t&&(this.scaleStepMap=t),this.images=e,this.markForCheck()}switchTo(e){this.index=e,this.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.visible=!1,this.closeClick.emit()}onZoomIn(){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled()}onZoomOut(){if(this.zoom>1){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.zoom<=1&&this.reCenterImage()}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(e){e.preventDefault(),e.stopPropagation(),this.prev()}onSwitchRight(e){e.preventDefault(),e.stopPropagation(),this.next()}onHorizontalFlip(){this.flipHorizontally=!this.flipHorizontally,this.updatePreviewImageTransform()}onVerticalFlip(){this.flipVertically=!this.flipVertically,this.updatePreviewImageTransform()}wheelZoomEventHandler(e){e.preventDefault(),e.stopPropagation(),this.handlerImageTransformationWhileZoomingWithMouse(e,e.deltaY),this.handleImageScaleWhileZoomingWithMouse(e.deltaY),this.updatePreviewImageWrapperTransform(),this.updatePreviewImageTransform(),this.markForCheck()}onAnimationStart(e){this.animationStateChanged.emit(e)}onAnimationDone(e){this.animationStateChanged.emit(e)}onDragEnd(e){this.isDragging=!1;let t=this.imageRef.nativeElement.offsetWidth*this.zoom,o=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:r,top:c}=qe(this.imageRef.nativeElement),{width:a,height:w}=Xe(),T=this.rotate%180!==0,S=Ye({width:T?o:t,height:T?t:o,left:r,top:c,clientWidth:a,clientHeight:w});P(S.x)||P(S.y)?this.position=u(u({},this.position),S):!P(S.x)&&!P(S.y)&&(this.position={x:e.source.getFreeDragPosition().x,y:e.source.getFreeDragPosition().y})}sanitizerResourceUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom*(this.flipHorizontally?-1:1)}, ${this.zoom*(this.flipVertically?-1:1)}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}handlerImageTransformationWhileZoomingWithMouse(e,t){let o,r=this.imageRef.nativeElement,a=getComputedStyle(r).transform.match(/matrix.*\((.+)\)/);a?o=+a[1].split(", ")[0]:o=this.zoom;let w=(e.clientX-r.getBoundingClientRect().x)/o,T=(e.clientY-r.getBoundingClientRect().y)/o,C=t<0?this.scaleStep/2:-this.scaleStep/2;this.position.x+=-w*C*2+r.offsetWidth*C,this.position.y+=-T*C*2+r.offsetHeight*C}handleImageScaleWhileZoomingWithMouse(e){this.isZoomedInWithMouseWheel(e)?this.onZoomIn():this.onZoomOut(),this.zoom<=1&&this.reCenterImage()}isZoomedInWithMouseWheel(e){return e<0}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=!1,this.flipVertically=!1,this.reCenterImage()}reCenterImage(){this.position=u({},Ze)}};n.\u0275fac=function(t){return new(t||n)(l(ce),l(q),l(Z),l(x),l(A),l(Se))},n.\u0275cmp=H({type:n,selectors:[["nz-image-preview"]],viewQuery:function(t,o){if(t&1&&(U($e,5),U(Ve,7)),t&2){let r;Q(r=K())&&(o.imageRef=r.first),Q(r=K())&&(o.imagePreviewWrapper=r.first)}},hostAttrs:[1,"ant-image-preview-root"],hostVars:6,hostBindings:function(t,o){t&1&&ge("@fadeMotion.start",function(c){return o.onAnimationStart(c)})("@fadeMotion.done",function(c){return o.onAnimationDone(c)}),t&2&&(de("@.disabled",o.config.nzNoAnimation)("@fadeMotion",o.visible?"enter":"leave"),M("z-index",o.config.nzZIndex),D("ant-image-preview-moving",o.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[ze([A]),Y],decls:17,vars:5,consts:[["imagePreviewWrapper",""],["imgRef",""],[1,"ant-image-preview-mask"],[1,"ant-image-preview-operations-wrapper"],[1,"ant-image-preview-operations"],[1,"ant-image-preview-operations-progress"],[1,"ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled"],["tabindex","-1",1,"ant-image-preview-wrap",3,"click"],["role","dialog","aria-modal","true",1,"ant-image-preview"],["tabindex","0","aria-hidden","true",1,"ant-image-preview-focus-trap"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragEnded","cdkDragFreeDragPosition"],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType","nzRotate"],["cdkDragHandle","",1,"ant-image-preview-img",3,"width","height","transform"],["cdkDragHandle","",1,"ant-image-preview-img"]],template:function(t,o){if(t&1){let r=O();f(0,"div",2),h(1,"div",3),R(2,je,4,4),h(3,"ul",4),R(4,Be,2,2,"li",5),B(5,Ge,2,4,"li",6,j),g()(),h(7,"div",7),v("click",function(a){return z(r),y(o.maskClosable&&a.target===a.currentTarget&&o.onClose())}),h(8,"div",8),f(9,"div",9),h(10,"div",10)(11,"div",11)(12,"div",12,0),v("cdkDragEnded",function(a){return z(r),y(o.onDragEnd(a))}),B(14,Qe,1,1,null,null,j),g()()(),f(16,"div",9),g()()}t&2&&(p(2),F(o.images.length>1?2:-1),p(2),F(o.images.length>1?4:-1),p(),G(o.operations),p(7),M("transform",o.previewImageWrapperTransform),V("cdkDragFreeDragPosition",o.position),p(2),G(o.images))},dependencies:[Ie,_e,Te,Ne],encapsulation:2,data:{animation:[xe]},changeDetection:0});let i=n;return i})(),ee=class{constructor(n,s,e){this.previewInstance=n,this.config=s,this.overlayRef=e,this.destroy$=new _,e.keydownEvents().pipe(W(t=>this.config.nzKeyboard&&(t.keyCode===27||t.keyCode===37||t.keyCode===39)&&!be(t))).subscribe(t=>{t.preventDefault(),t.keyCode===27&&n.onClose(),t.keyCode===37&&this.prev(),t.keyCode===39&&this.next()}),e.detachments().subscribe(()=>{this.overlayRef.dispose()}),n.closeClick.pipe(te(1),ie(()=>n.animationStateChanged),W(t=>t.phaseName==="done"),m(this.destroy$)).subscribe(()=>{this.close()})}switchTo(n){this.previewInstance.switchTo(n)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.destroy$.next(),this.overlayRef.dispose()}},Le=(()=>{let n=class n{constructor(e,t,o,r){this.overlay=e,this.injector=t,this.nzConfigService=o,this.directionality=r}preview(e,t,o){return this.display(e,t,o)}display(e,t,o){let r=u(u({},new x),t??{}),c=this.createOverlay(r),a=this.attachPreviewComponent(c,r);a.setImages(e,o);let w=new ee(a,r,c);return a.previewRef=w,w}attachPreviewComponent(e,t){let o=N.create({parent:this.injector,providers:[{provide:Pe,useValue:e},{provide:x,useValue:t}]}),r=new ke(We,null,o);return e.attach(r).instance}createOverlay(e){let t=this.nzConfigService.getConfigForComponent(Ae)||{},o=new De({scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:e.nzCloseOnNavigation??t.nzCloseOnNavigation??!0,direction:e.nzDirection||t.nzDirection||this.directionality.value});return this.overlay.create(o)}};n.\u0275fac=function(t){return new(t||n)(b(Ee),b(N),b(Z),b(X))},n.\u0275prov=ne({token:n,factory:n.\u0275fac});let i=n;return i})(),tt="image",Tt=(()=>{let n=class n{get previewable(){return!this.nzDisablePreview&&this.status!=="error"}constructor(e,t,o,r,c){this.nzConfigService=e,this.elementRef=t,this.nzImageService=o,this.cdr=r,this.directionality=c,this._nzModuleName=tt,this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new _,this.destroy$=new _,this.document=L(Ce),this.parentGroup=L(Ke,{optional:!0})}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe(m(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){let e=this.parentGroup.images.filter(a=>a.previewable),t=e.map(a=>({src:a.nzSrc,srcset:a.nzSrcset})),o=e.findIndex(a=>this===a),r=new Map;e.forEach(a=>{r.set(a.nzSrc??a.nzSrcset,a.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??J)}),this.nzImageService.preview(t,{nzDirection:this.dir},r).switchTo(o)}else{let e=[{src:this.nzSrc,srcset:this.nzSrcset}];this.nzImageService.preview(e,{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??J})}}getElement(){return this.elementRef}ngOnChanges(e){let{nzSrc:t}=e;t&&(this.getElement().nativeElement.src=t.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new _,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),k(this.backLoadImage,"load").pipe(m(this.backLoadDestroy$),m(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),k(this.backLoadImage,"error").pipe(m(this.backLoadDestroy$),m(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}};n.\u0275fac=function(t){return new(t||n)(l(Z),l(le),l(Le),l(q),l(X))},n.\u0275dir=re({type:n,selectors:[["img","nz-image",""]],hostBindings:function(t,o){t&1&&v("click",function(){return o.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:[2,"nzDisablePreview","nzDisablePreview",ye],nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[me,ae]});let i=n;return I([E()],i.prototype,"nzDisablePreview",void 0),I([E()],i.prototype,"nzFallback",void 0),I([E()],i.prototype,"nzPlaceholder",void 0),I([E()],i.prototype,"nzScaleStep",void 0),i})(),Nt=(()=>{let n=class n{};n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=se({type:n}),n.\u0275inj=oe({providers:[Le],imports:[We]});let i=n;return i})();export{Ke as a,Le as b,Tt as c,Nt as d};
