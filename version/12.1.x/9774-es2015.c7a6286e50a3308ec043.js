"use strict";(self.webpackChunkng_zorro_antd=self.webpackChunkng_zorro_antd||[]).push([[9774],{49774:function(t,e,n){n.d(e,{M:function(){return F},W:function(){return A}});var s=n(70946),i=n(38583),r=n(79874),o=n(48095),c=n(64762),a=n(79765),p=n(46782),h=n(27520),l=n(14176),g=n(37716);function d(t,e){if(1&t&&(g.ynx(0),g._UZ(1,"i",8),g.BQk()),2&t){const t=g.oxw(3);g.xp6(1),g.Q6J("nzType",t.icon)}}function u(t,e){if(1&t&&(g.ynx(0),g._uU(1),g.BQk()),2&t){const t=e.$implicit,n=g.oxw(4);g.xp6(1),g.hij(" ",t(n.nzPercent)," ")}}const z=function(t){return{$implicit:t}};function f(t,e){if(1&t&&g.YNc(0,u,2,1,"ng-container",9),2&t){const t=g.oxw(3);g.Q6J("nzStringTemplateOutlet",t.formatter)("nzStringTemplateOutletContext",g.VKq(2,z,t.nzPercent))}}function S(t,e){if(1&t&&(g.TgZ(0,"span",5),g.YNc(1,d,2,1,"ng-container",6),g.YNc(2,f,1,4,"ng-template",null,7,g.W1O),g.qZA()),2&t){const t=g.MAs(3),e=g.oxw(2);g.xp6(1),g.Q6J("ngIf",("exception"===e.status||"success"===e.status)&&!e.nzFormat)("ngIfElse",t)}}function k(t,e){if(1&t&&g.YNc(0,S,4,2,"span",4),2&t){const t=g.oxw();g.Q6J("ngIf",t.nzShowInfo)}}function y(t,e){if(1&t&&g._UZ(0,"div",17),2&t){const t=g.oxw(4);g.Udp("width",t.nzSuccessPercent,"%")("border-radius","round"===t.nzStrokeLinecap?"100px":"0")("height",t.strokeWidth,"px")}}function x(t,e){if(1&t&&(g.TgZ(0,"div",13),g.TgZ(1,"div",14),g._UZ(2,"div",15),g.YNc(3,y,1,6,"div",16),g.qZA(),g.qZA()),2&t){const t=g.oxw(3);g.xp6(2),g.Udp("width",t.nzPercent,"%")("border-radius","round"===t.nzStrokeLinecap?"100px":"0")("background",t.isGradient?null:t.nzStrokeColor)("background-image",t.isGradient?t.lineGradient:null)("height",t.strokeWidth,"px"),g.xp6(1),g.Q6J("ngIf",t.nzSuccessPercent||0===t.nzSuccessPercent)}}function m(t,e){}function P(t,e){if(1&t&&(g.ynx(0),g.YNc(1,x,4,11,"div",11),g.YNc(2,m,0,0,"ng-template",12),g.BQk()),2&t){const t=g.oxw(2),e=g.MAs(1);g.xp6(1),g.Q6J("ngIf",!t.isSteps),g.xp6(1),g.Q6J("ngTemplateOutlet",e)}}function v(t,e){1&t&&g._UZ(0,"div",20),2&t&&g.Q6J("ngStyle",e.$implicit)}function $(t,e){}function C(t,e){if(1&t&&(g.TgZ(0,"div",18),g.YNc(1,v,1,1,"div",19),g.YNc(2,$,0,0,"ng-template",12),g.qZA()),2&t){const t=g.oxw(2),e=g.MAs(1);g.xp6(1),g.Q6J("ngForOf",t.steps),g.xp6(1),g.Q6J("ngTemplateOutlet",e)}}function T(t,e){if(1&t&&(g.TgZ(0,"div"),g.YNc(1,P,3,2,"ng-container",2),g.YNc(2,C,3,2,"div",10),g.qZA()),2&t){const t=g.oxw();g.xp6(1),g.Q6J("ngIf",!t.isSteps),g.xp6(1),g.Q6J("ngIf",t.isSteps)}}function w(t,e){if(1&t&&(g.O4$(),g._UZ(0,"stop")),2&t){const t=e.$implicit;g.uIk("offset",t.offset)("stop-color",t.color)}}function I(t,e){if(1&t&&(g.O4$(),g.TgZ(0,"defs"),g.TgZ(1,"linearGradient",24),g.YNc(2,w,1,2,"stop",25),g.qZA(),g.qZA()),2&t){const t=g.oxw(2);g.xp6(1),g.Q6J("id","gradient-"+t.gradientId),g.xp6(1),g.Q6J("ngForOf",t.circleGradient)}}function G(t,e){if(1&t&&(g.O4$(),g._UZ(0,"path",26)),2&t){const t=e.$implicit,n=g.oxw(2);g.Q6J("ngStyle",t.strokePathStyle),g.uIk("d",n.pathString)("stroke-linecap",n.nzStrokeLinecap)("stroke",t.stroke)("stroke-width",n.nzPercent?n.strokeWidth:0)}}function O(t,e){1&t&&g.O4$()}function Z(t,e){if(1&t&&(g.TgZ(0,"div",14),g.O4$(),g.TgZ(1,"svg",21),g.YNc(2,I,3,2,"defs",2),g._UZ(3,"path",22),g.YNc(4,G,1,5,"path",23),g.qZA(),g.YNc(5,O,0,0,"ng-template",12),g.qZA()),2&t){const t=g.oxw(),e=g.MAs(1);g.Udp("width",t.nzWidth,"px")("height",t.nzWidth,"px")("font-size",.15*t.nzWidth+6,"px"),g.ekj("ant-progress-circle-gradient",t.isGradient),g.xp6(2),g.Q6J("ngIf",t.isGradient),g.xp6(1),g.Q6J("ngStyle",t.trailPathStyle),g.uIk("stroke-width",t.strokeWidth)("d",t.pathString),g.xp6(1),g.Q6J("ngForOf",t.progressCirclePath)("ngForTrackBy",t.trackByFn),g.xp6(1),g.Q6J("ngTemplateOutlet",e)}}const Q=t=>{let e=[];return Object.keys(t).forEach(n=>{const s=t[n],i=function(t){return+t.replace("%","")}(n);isNaN(i)||e.push({key:i,value:s})}),e=e.sort((t,e)=>t.key-e.key),e};let J=0;const b="progress",W=new Map([["success","check"],["exception","close"]]),Y=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),N=t=>`${t}%`;let F=(()=>{class t{constructor(t,e,n){this.cdr=t,this.nzConfigService=e,this.directionality=n,this._nzModuleName=b,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzStrokeWidth=void 0,this.nzGapDegree=void 0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=J++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.trackByFn=t=>`${t}`,this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new a.xQ}get formatter(){return this.nzFormat||N}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnChanges(t){const{nzSteps:e,nzGapPosition:n,nzStrokeLinecap:s,nzStrokeColor:i,nzGapDegree:r,nzType:o,nzStatus:c,nzPercent:a,nzSuccessPercent:p,nzStrokeWidth:h}=t;c&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(a||p)&&(parseInt(this.nzPercent.toString(),10)>=100?((0,l.DX)(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(c||a||p||i)&&this.updateIcon(),i&&this.setStrokeColor(),(n||s||r||o||a||i||i)&&this.getCirclePaths(),(a||e||h)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){var t;this.nzConfigService.getConfigChangeEventForComponent(b).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),null===(t=this.directionality.change)||void 0===t||t.pipe((0,p.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){const t=W.get(this.status);this.icon=t?t+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){const t=Math.floor(this.nzSteps*(this.nzPercent/100)),e="small"===this.nzSize?2:14,n=[];for(let s=0;s<this.nzSteps;s++){let i;s<=t-1&&(i=this.nzStrokeColor),n.push({backgroundColor:`${i}`,width:`${e}px`,height:`${this.strokeWidth}px`})}this.steps=n}getCirclePaths(){if(!this.isCircleStyle)return;const t=(0,l.DX)(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],e=50-this.strokeWidth/2,n=2*Math.PI*e,s=this.nzGapDegree||("circle"===this.nzType?0:75);let i=0,r=-e,o=0,c=-2*e;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":i=-e,r=0,o=2*e,c=0;break;case"right":i=e,r=0,o=-2*e,c=0;break;case"bottom":r=e,c=2*e}this.pathString=`M 50,50 m ${i},${r}\n       a ${e},${e} 0 1 1 ${o},${-c}\n       a ${e},${e} 0 1 1 ${-o},${c}`,this.trailPathStyle={strokeDasharray:`${n-s}px ${n}px`,strokeDashoffset:`-${s/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=t.map((e,i)=>{const r=2===t.length&&0===i;return{stroke:this.isGradient&&!r?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:r?Y.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(e||0)/100*(n-s)}px ${n}px`,strokeDashoffset:`-${s/2}px`}}}).reverse()}setStrokeColor(){const t=this.nzStrokeColor,e=this.isGradient=!!t&&"string"!=typeof t;e&&!this.isCircleStyle?this.lineGradient=(t=>{const{from:e="#1890ff",to:n="#1890ff",direction:s="to right"}=t,i=(0,c._T)(t,["from","to","direction"]);return 0!==Object.keys(i).length?`linear-gradient(${s}, ${Q(i).map(({key:t,value:e})=>`${e} ${t}%`).join(", ")})`:`linear-gradient(${s}, ${e}, ${n})`})(t):e&&this.isCircleStyle?this.circleGradient=(t=>Q(this.nzStrokeColor).map(({key:t,value:e})=>({offset:`${t}%`,color:e})))():(this.lineGradient=null,this.circleGradient=[])}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(g.sBO),g.Y36(h.jY),g.Y36(s.Is,8))},t.\u0275cmp=g.Xpm({type:t,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzPercent:"nzPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:"nzSteps",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzStatus:"nzStatus"},exportAs:["nzProgress"],features:[g.TTD],decls:5,vars:15,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-progress-steps-outer",4,"ngIf"],["class","ant-progress-outer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[1,"ant-progress-success-bg"],[1,"ant-progress-steps-outer"],["class","ant-progress-steps-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ant-progress-steps-item",3,"ngStyle"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(t,e){1&t&&(g.YNc(0,k,1,1,"ng-template",null,0,g.W1O),g.TgZ(2,"div",1),g.YNc(3,T,3,2,"div",2),g.YNc(4,Z,6,15,"div",3),g.qZA()),2&t&&(g.xp6(2),g.ekj("ant-progress-line","line"===e.nzType)("ant-progress-small","small"===e.nzSize)("ant-progress-show-info",e.nzShowInfo)("ant-progress-circle",e.isCircleStyle)("ant-progress-steps",e.isSteps)("ant-progress-rtl","rtl"===e.dir),g.Q6J("ngClass","ant-progress ant-progress-status-"+e.status),g.xp6(1),g.Q6J("ngIf","line"===e.nzType),g.xp6(1),g.Q6J("ngIf",e.isCircleStyle))},directives:[i.mk,i.O5,o.Ls,r.f,i.tP,i.sg,i.PC],encapsulation:2,changeDetection:0}),(0,c.gn)([(0,h.oS)()],t.prototype,"nzShowInfo",void 0),(0,c.gn)([(0,h.oS)()],t.prototype,"nzStrokeColor",void 0),(0,c.gn)([(0,h.oS)()],t.prototype,"nzSize",void 0),(0,c.gn)([(0,l.Rn)()],t.prototype,"nzSuccessPercent",void 0),(0,c.gn)([(0,l.Rn)()],t.prototype,"nzPercent",void 0),(0,c.gn)([(0,h.oS)(),(0,l.Rn)()],t.prototype,"nzStrokeWidth",void 0),(0,c.gn)([(0,h.oS)(),(0,l.Rn)()],t.prototype,"nzGapDegree",void 0),(0,c.gn)([(0,h.oS)()],t.prototype,"nzGapPosition",void 0),(0,c.gn)([(0,h.oS)()],t.prototype,"nzStrokeLinecap",void 0),(0,c.gn)([(0,l.Rn)()],t.prototype,"nzSteps",void 0),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[s.vT,i.ez,o.PV,r.T]]}),t})()}}]);