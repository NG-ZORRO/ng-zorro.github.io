import{b as Be,c as O,d as He,e as Pe}from"./chunk-2XKKXFYY.js";import{a as Fe,b as Ae}from"./chunk-KLVKRMCU.js";import{Gb as R,Ha as ie,Ib as Ie,Ja as oe,Jb as Le,db as Me,hb as j,ib as ye,jc as Ve,na as E,p as ve,ua as Ee,ub as Oe,va as U}from"./chunk-O3IWK6WU.js";import{$c as Ne,Aa as S,Ac as J,Bc as X,Fc as ee,Ib as v,Ja as h,Jb as fe,Ka as pe,Kd as te,Mb as Ce,Oa as ge,Ob as m,Rc as De,Tc as ne,Ub as q,Uc as $,Vb as z,Wb as Y,Xb as u,Xc as xe,Yb as P,aa as b,ad as be,bc as Se,cc as D,dc as _e,f as B,fc as G,ga as le,gc as W,ha as he,hc as x,hd as V,ia as ze,ic as N,jc as _,kc as F,l as H,lc as A,ld as a,m as M,mb as ue,md as we,na as I,nc as K,qc as L,rb as g,sc as l,wa as y,wb as me,xb as k,yc as Te,za as C,zc as ke}from"./chunk-NACBYLXS.js";function Xe(i,c){if(i&1&&_(0,"span"),i&2){let e=c.$index,t=l();u("ant-tree-indent-unit",!t.nzSelectMode)("ant-select-tree-indent-unit",t.nzSelectMode)("ant-select-tree-indent-unit-start",t.nzSelectMode&&t.nzIsStart[e])("ant-tree-indent-unit-start",!t.nzSelectMode&&t.nzIsStart[e])("ant-select-tree-indent-unit-end",t.nzSelectMode&&t.nzIsEnd[e])("ant-tree-indent-unit-end",!t.nzSelectMode&&t.nzIsEnd[e])}}var Ke=["builtin",""],re=(i,c)=>({$implicit:i,origin:c});function en(i,c){if(i&1&&(F(0),_(1,"nz-icon",2),A()),i&2){let e=l(3);g(),u("ant-select-tree-switcher-icon",e.nzSelectMode)("ant-tree-switcher-icon",!e.nzSelectMode)}}function nn(i,c){if(i&1&&m(0,en,2,4,"ng-container",1),i&2){let e=l(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",$(2,re,e.context,e.context.origin))}}function tn(i,c){i&1&&_(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function on(i,c){if(i&1&&m(0,nn,1,5,"ng-container")(1,tn,1,1,"nz-icon",0),i&2){let e=l();D(e.isLoading?1:0)}}function rn(i,c){if(i&1&&_(0,"nz-icon",3),i&2){let e=l(4);z("nzType",e.isSwitcherOpen?"minus-square":"plus-square")}}function an(i,c){i&1&&_(0,"nz-icon",4)}function sn(i,c){if(i&1&&(F(0),m(1,rn,1,1,"nz-icon",3)(2,an,1,0,"nz-icon",4),A()),i&2){let e=l(3);g(),D(e.isShowLineIcon?1:2)}}function dn(i,c){if(i&1&&m(0,sn,3,1,"ng-container",1),i&2){let e=l(2);z("nzStringTemplateOutlet",e.nzExpandedIcon)("nzStringTemplateOutletContext",$(2,re,e.context,e.context.origin))}}function cn(i,c){i&1&&_(0,"nz-icon",0),i&2&&z("nzSpin",!0)}function ln(i,c){if(i&1&&m(0,dn,1,5,"ng-container")(1,cn,1,1,"nz-icon",0),i&2){let e=l();D(e.isLoading?1:0)}}function hn(i,c){}function zn(i,c){if(i&1&&(x(0,"span")(1,"span"),_(2,"nz-icon",4),N()()),i&2){let e=l(2);u("ant-tree-icon__open",e.isSwitcherOpen)("ant-tree-icon__close",e.isSwitcherClose)("ant-tree-icon_loading",e.isLoading)("ant-select-tree-iconEle",e.selectMode)("ant-tree-iconEle",!e.selectMode),g(),u("ant-select-tree-iconEle",e.selectMode)("ant-select-tree-icon__customize",e.selectMode)("ant-tree-iconEle",!e.selectMode)("ant-tree-icon__customize",!e.selectMode),g(),z("nzType",e.icon)}}function pn(i,c){if(i&1&&(m(0,zn,3,19,"span",2),_(1,"span",3),xe(2,"nzHighlight")),i&2){let e=l();D(e.icon&&e.showIcon?0:-1),g(),z("innerHTML",Ne(2,2,e.title,e.matchedValue,"i","font-highlight"),ue)}}function gn(i,c){if(i&1&&_(0,"nz-tree-drop-indicator",1),i&2){let e=l();z("dropPosition",e.dragPosition)("level",e.context.level)}}function un(i,c){if(i&1){let e=K();x(0,"nz-tree-node-switcher",4),L("click",function(n){C(e);let d=l();return S(d.clickExpand(n))}),N()}if(i&2){let e=l();z("nzShowExpand",e.nzShowExpand)("nzShowLine",e.nzShowLine)("nzExpandedIcon",e.nzExpandedIcon)("nzSelectMode",e.nzSelectMode)("context",e.nzTreeNode)("isLeaf",e.isLeaf)("isExpanded",e.isExpanded)("isLoading",e.isLoading)}}function mn(i,c){if(i&1){let e=K();x(0,"nz-tree-node-checkbox",5),L("click",function(n){C(e);let d=l();return S(d.clickCheckbox(n))}),N()}if(i&2){let e=l();z("nzSelectMode",e.nzSelectMode)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisabled",e.isDisabled)("isDisableCheckbox",e.isDisableCheckbox)}}var fn=["nzTreeTemplate"],$e=i=>({$implicit:i});function Cn(i,c){}function Sn(i,c){if(i&1&&(F(0),m(1,Cn,0,0,"ng-template",9),A()),i&2){let e=c.$implicit;l(2);let t=ee(9);g(),z("ngTemplateOutlet",t)("ngTemplateOutletContext",ne(2,$e,e))}}function _n(i,c){if(i&1&&(x(0,"cdk-virtual-scroll-viewport",7),m(1,Sn,2,4,"ng-container",8),N()),i&2){let e=l();Y("height",e.nzVirtualHeight),u("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("itemSize",e.nzVirtualItemSize)("minBufferPx",e.nzVirtualMinBufferPx)("maxBufferPx",e.nzVirtualMaxBufferPx),g(),z("cdkVirtualForOf",e.nzFlattenNodes)("cdkVirtualForTrackBy",e.trackByFlattenNode)}}function Tn(i,c){}function kn(i,c){if(i&1&&m(0,Tn,0,0,"ng-template",9),i&2){let e=c.$implicit;l(2);let t=ee(9);z("ngTemplateOutlet",t)("ngTemplateOutletContext",ne(2,$e,e))}}function Dn(i,c){if(i&1&&(x(0,"div",10),G(1,kn,1,4,null,9,Se().trackByFlattenNode,!0),N()),i&2){let e=l();u("ant-select-tree-list-holder-inner",e.nzSelectMode)("ant-tree-list-holder-inner",!e.nzSelectMode),z("@.disabled",e.beforeInit||!!(e.noAnimation!=null&&e.noAnimation.nzNoAnimation))("nzNoAnimation",e.noAnimation==null?null:e.noAnimation.nzNoAnimation)("@treeCollapseMotion",e.nzFlattenNodes.length),g(),W(e.nzFlattenNodes)}}function xn(i,c){if(i&1){let e=K();x(0,"nz-tree-node",11),L("nzExpandChange",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzClick",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzDblClick",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzContextMenu",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzCheckboxChange",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragStart",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragEnter",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragOver",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragLeave",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDragEnd",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))})("nzOnDrop",function(n){C(e);let d=l();return S(d.eventTriggerChanged(n))}),N()}if(i&2){let e=c.$implicit,t=l();z("icon",e.icon)("title",e.title)("isLoading",e.isLoading)("isSelected",e.isSelected)("isDisabled",e.isDisabled)("isMatched",e.isMatched)("isExpanded",e.isExpanded)("isLeaf",e.isLeaf)("isStart",e.isStart)("isEnd",e.isEnd)("isChecked",e.isChecked)("isHalfChecked",e.isHalfChecked)("isDisableCheckbox",e.isDisableCheckbox)("isSelectable",e.isSelectable)("canHide",e.canHide)("nzTreeNode",e)("nzSelectMode",t.nzSelectMode)("nzShowLine",t.nzShowLine)("nzExpandedIcon",t.nzExpandedIcon)("nzDraggable",t.nzDraggable)("nzCheckable",t.nzCheckable)("nzShowExpand",t.nzShowExpand)("nzAsyncData",t.nzAsyncData)("nzSearchValue",t.nzSearchValue)("nzHideUnMatched",t.nzHideUnMatched)("nzBeforeDrop",t.nzBeforeDrop)("nzShowIcon",t.nzShowIcon)("nzTreeTemplate",t.nzTreeTemplate||t.nzTreeTemplateChild)}}var Nn=(()=>{class i{cdr;dropPosition;level=1;direction="ltr";style={};constructor(e){this.cdr=e}ngOnChanges(e){this.renderIndicator(this.dropPosition,this.direction)}renderIndicator(e,t="ltr"){let d=t==="ltr"?"left":"right",f=t==="ltr"?"right":"left",w={[d]:"4px",[f]:"0px"};switch(e){case-1:w.top="-3px";break;case 1:w.bottom="-3px";break;case 0:w.bottom="-3px",w[d]="28px";break;default:w.display="none";break}this.style=w,this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)(k(V))};static \u0275cmp=v({type:i,selectors:[["nz-tree-drop-indicator"]],hostVars:4,hostBindings:function(t,n){t&2&&(P(n.style),u("ant-tree-drop-indicator",!0))},inputs:{dropPosition:"dropPosition",level:[2,"level","level",we],direction:"direction"},exportAs:["NzTreeDropIndicator"],features:[y],decls:0,vars:0,template:function(t,n){},encapsulation:2,changeDetection:0})}return i})(),bn=(()=>{class i{nzTreeLevel=0;nzIsStart=[];nzIsEnd=[];nzSelectMode=!1;listOfUnit=[];ngOnChanges(e){let{nzTreeLevel:t}=e;t&&(this.listOfUnit=[...new Array(t.currentValue||0)])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nz-tree-indent"]],hostVars:5,hostBindings:function(t,n){t&2&&(q("aria-hidden",!0),u("ant-tree-indent",!n.nzSelectMode)("ant-select-tree-indent",n.nzSelectMode))},inputs:{nzTreeLevel:"nzTreeLevel",nzIsStart:"nzIsStart",nzIsEnd:"nzIsEnd",nzSelectMode:"nzSelectMode"},exportAs:["nzTreeIndent"],features:[y],decls:2,vars:0,consts:[[3,"ant-tree-indent-unit","ant-select-tree-indent-unit","ant-select-tree-indent-unit-start","ant-tree-indent-unit-start","ant-select-tree-indent-unit-end","ant-tree-indent-unit-end"]],template:function(t,n){t&1&&G(0,Xe,1,12,"span",0,_e),t&2&&W(n.listOfUnit)},encapsulation:2,changeDetection:0})}return i})(),wn=(()=>{class i{nzSelectMode=!1;isChecked;isHalfChecked;isDisabled;isDisableCheckbox;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nz-tree-node-checkbox","builtin",""]],hostVars:16,hostBindings:function(t,n){t&2&&u("ant-select-tree-checkbox",n.nzSelectMode)("ant-select-tree-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-checkbox-disabled",n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))("ant-tree-checkbox",!n.nzSelectMode)("ant-tree-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-checkbox-disabled",!n.nzSelectMode&&(n.isDisabled||n.isDisableCheckbox))},inputs:{nzSelectMode:"nzSelectMode",isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisabled:[2,"isDisabled","isDisabled",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a]},attrs:Ke,decls:1,vars:4,template:function(t,n){t&1&&_(0,"span"),t&2&&u("ant-tree-checkbox-inner",!n.nzSelectMode)("ant-select-tree-checkbox-inner",n.nzSelectMode)},encapsulation:2,changeDetection:0})}return i})(),Ue=(()=>{class i{nzShowExpand;nzShowLine;nzExpandedIcon;nzSelectMode=!1;context;isLeaf;isLoading;isExpanded;get isShowLineIcon(){return!this.isLeaf&&!!this.nzShowLine}get isShowSwitchIcon(){return!this.isLeaf&&!this.nzShowLine}get isSwitcherOpen(){return!!this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["nz-tree-node-switcher"]],hostVars:16,hostBindings:function(t,n){t&2&&u("ant-select-tree-switcher",n.nzSelectMode)("ant-select-tree-switcher-noop",n.nzSelectMode&&n.isLeaf)("ant-select-tree-switcher_open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-switcher_close",n.nzSelectMode&&n.isSwitcherClose)("ant-tree-switcher",!n.nzSelectMode)("ant-tree-switcher-noop",!n.nzSelectMode&&n.isLeaf)("ant-tree-switcher_open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-switcher_close",!n.nzSelectMode&&n.isSwitcherClose)},inputs:{nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzExpandedIcon:"nzExpandedIcon",nzSelectMode:"nzSelectMode",context:"context",isLeaf:[2,"isLeaf","isLeaf",a],isLoading:[2,"isLoading","isLoading",a],isExpanded:[2,"isExpanded","isExpanded",a]},decls:2,vars:2,consts:[["nzType","loading",1,"ant-tree-switcher-loading-icon",3,"nzSpin"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nzType","caret-down"],[1,"ant-tree-switcher-line-icon",3,"nzType"],["nzType","file",1,"ant-tree-switcher-line-icon"]],template:function(t,n){t&1&&m(0,on,2,1)(1,ln,2,1),t&2&&(D(n.isShowSwitchIcon?0:-1),g(),D(n.nzShowLine?1:-1))},dependencies:[oe,ie,Le,Ie],encapsulation:2,changeDetection:0})}return i})(),je=(()=>{class i{cdr;searchValue;treeTemplate=null;draggable;showIcon;selectMode=!1;context;icon;title;isLoading;isSelected;isDisabled;isMatched;isExpanded;isLeaf;showIndicator=!0;dragPosition;get canDraggable(){return this.draggable&&!this.isDisabled?!0:null}get matchedValue(){return this.isMatched?this.searchValue:""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}constructor(e){this.cdr=e}ngOnChanges(e){let{showIndicator:t,dragPosition:n}=e;(t||n)&&this.cdr.markForCheck()}static \u0275fac=function(t){return new(t||i)(k(V))};static \u0275cmp=v({type:i,selectors:[["nz-tree-node-title"]],hostVars:21,hostBindings:function(t,n){t&2&&(q("title",n.title)("draggable",n.canDraggable)("aria-grabbed",n.canDraggable),u("draggable",n.canDraggable)("ant-select-tree-node-content-wrapper",n.selectMode)("ant-select-tree-node-content-wrapper-open",n.selectMode&&n.isSwitcherOpen)("ant-select-tree-node-content-wrapper-close",n.selectMode&&n.isSwitcherClose)("ant-select-tree-node-selected",n.selectMode&&n.isSelected)("ant-tree-node-content-wrapper",!n.selectMode)("ant-tree-node-content-wrapper-open",!n.selectMode&&n.isSwitcherOpen)("ant-tree-node-content-wrapper-close",!n.selectMode&&n.isSwitcherClose)("ant-tree-node-selected",!n.selectMode&&n.isSelected))},inputs:{searchValue:"searchValue",treeTemplate:"treeTemplate",draggable:[2,"draggable","draggable",a],showIcon:[2,"showIcon","showIcon",a],selectMode:"selectMode",context:"context",icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],showIndicator:"showIndicator",dragPosition:"dragPosition"},features:[y],decls:3,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dropPosition","level"],[3,"ant-tree-icon__open","ant-tree-icon__close","ant-tree-icon_loading","ant-select-tree-iconEle","ant-tree-iconEle"],[1,"ant-tree-title",3,"innerHTML"],[3,"nzType"]],template:function(t,n){t&1&&m(0,hn,0,0,"ng-template",0)(1,pn,3,7)(2,gn,1,2,"nz-tree-drop-indicator",1),t&2&&(z("ngTemplateOutlet",n.treeTemplate)("ngTemplateOutletContext",$(4,re,n.context,n.context.origin)),g(),D(n.treeTemplate?-1:1),g(),D(n.showIndicator?2:-1))},dependencies:[te,oe,ie,Ae,Fe,Nn],encapsulation:2,changeDetection:0})}return i})(),Re=(()=>{class i{nzTreeService;ngZone;renderer;elementRef;cdr;icon="";title="";isLoading=!1;isSelected=!1;isDisabled=!1;isMatched=!1;isExpanded;isLeaf;isChecked;isHalfChecked;isDisableCheckbox;isSelectable;canHide;isStart=[];isEnd=[];nzTreeNode;nzShowLine;nzShowExpand;nzCheckable;nzAsyncData;nzHideUnMatched=!1;nzNoAnimation=!1;nzSelectMode=!1;nzShowIcon=!1;nzExpandedIcon;nzTreeTemplate=null;nzBeforeDrop;nzSearchValue="";nzDraggable=!1;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;destroy$=new B;dragPos=2;dragPosClass={0:"drag-over",1:"drag-over-gap-bottom","-1":"drag-over-gap-top"};draggingKey=null;showIndicator=!1;get displayStyle(){return this.nzSearchValue&&this.nzHideUnMatched&&!this.isMatched&&!this.isExpanded&&this.canHide?"none":""}get isSwitcherOpen(){return this.isExpanded&&!this.isLeaf}get isSwitcherClose(){return!this.isExpanded&&!this.isLeaf}clickExpand(e){e.preventDefault(),!this.isLoading&&!this.isLeaf&&(this.nzAsyncData&&this.nzTreeNode.children.length===0&&!this.isExpanded&&(this.nzTreeNode.isLoading=!0),this.nzTreeNode.setExpanded(!this.isExpanded)),this.nzTreeService.setExpandedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("expand",this.nzTreeNode,e);this.nzExpandChange.emit(t)}clickSelect(e){e.preventDefault(),this.isSelectable&&!this.isDisabled&&(this.nzTreeNode.isSelected=!this.nzTreeNode.isSelected),this.nzTreeService.setSelectedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("click",this.nzTreeNode,e);this.nzClick.emit(t)}dblClick(e){e.preventDefault();let t=this.nzTreeService.formatEvent("dblclick",this.nzTreeNode,e);this.nzDblClick.emit(t)}contextMenu(e){e.preventDefault();let t=this.nzTreeService.formatEvent("contextmenu",this.nzTreeNode,e);this.nzContextMenu.emit(t)}clickCheckbox(e){if(e.preventDefault(),this.isDisabled||this.isDisableCheckbox)return;this.nzTreeNode.isChecked=!this.nzTreeNode.isChecked,this.nzTreeNode.isHalfChecked=!1,this.nzTreeService.setCheckedNodeList(this.nzTreeNode);let t=this.nzTreeService.formatEvent("check",this.nzTreeNode,e);this.nzCheckboxChange.emit(t)}clearDragClass(){["drag-over-gap-top","drag-over-gap-bottom","drag-over","drop-target"].forEach(t=>{this.renderer.removeClass(this.elementRef.nativeElement,t)})}handleDragStart(e){try{e.dataTransfer.setData("text/plain",this.nzTreeNode.key)}catch{}this.nzTreeService.setSelectedNode(this.nzTreeNode),this.draggingKey=this.nzTreeNode.key;let t=this.nzTreeService.formatEvent("dragstart",this.nzTreeNode,e);this.nzOnDragStart.emit(t)}handleDragEnter(e){e.preventDefault(),this.showIndicator=this.nzTreeNode.key!==this.nzTreeService.getSelectedNode()?.key,this.renderIndicator(2),this.ngZone.run(()=>{let t=this.nzTreeService.formatEvent("dragenter",this.nzTreeNode,e);this.nzOnDragEnter.emit(t)})}handleDragOver(e){e.preventDefault();let t=this.nzTreeService.calcDropPosition(e);this.dragPos!==t&&(this.clearDragClass(),this.renderIndicator(t),this.dragPos===0&&this.isLeaf||(this.renderer.addClass(this.elementRef.nativeElement,this.dragPosClass[this.dragPos]),this.renderer.addClass(this.elementRef.nativeElement,"drop-target")));let n=this.nzTreeService.formatEvent("dragover",this.nzTreeNode,e);this.nzOnDragOver.emit(n)}handleDragLeave(e){e.preventDefault(),this.renderIndicator(2),this.clearDragClass();let t=this.nzTreeService.formatEvent("dragleave",this.nzTreeNode,e);this.nzOnDragLeave.emit(t)}handleDragDrop(e){e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.showIndicator=!1,this.clearDragClass();let t=this.nzTreeService.getSelectedNode();if(!t||t&&t.key===this.nzTreeNode.key||this.dragPos===0&&this.isLeaf)return;let n=this.nzTreeService.formatEvent("drop",this.nzTreeNode,e),d=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzBeforeDrop?this.nzBeforeDrop({dragNode:this.nzTreeService.getSelectedNode(),node:this.nzTreeNode,pos:this.dragPos}).subscribe(f=>{f&&this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n),this.nzOnDragEnd.emit(d)}):this.nzTreeNode&&(this.nzTreeService.dropAndApply(this.nzTreeNode,this.dragPos),this.nzOnDrop.emit(n))})}handleDragEnd(e){e.preventDefault(),this.ngZone.run(()=>{if(this.nzBeforeDrop)this.draggingKey=null,this.markForCheck();else{this.draggingKey=null;let t=this.nzTreeService.formatEvent("dragend",this.nzTreeNode,e);this.nzOnDragEnd.emit(t)}})}handDragEvent(){if(this.nzDraggable){let e=this.elementRef.nativeElement;this.destroy$=new B,E(e,"dragstart").pipe(b(this.destroy$)).subscribe(t=>this.handleDragStart(t)),E(e,"dragenter").pipe(b(this.destroy$)).subscribe(t=>this.handleDragEnter(t)),E(e,"dragover").pipe(b(this.destroy$)).subscribe(t=>this.handleDragOver(t)),E(e,"dragleave").pipe(b(this.destroy$)).subscribe(t=>this.handleDragLeave(t)),E(e,"drop").pipe(b(this.destroy$)).subscribe(t=>this.handleDragDrop(t)),E(e,"dragend").pipe(b(this.destroy$)).subscribe(t=>this.handleDragEnd(t))}else this.destroy$.next(!0),this.destroy$.complete()}markForCheck(){this.cdr.markForCheck()}noAnimation=I(R,{host:!0,optional:!0});constructor(e,t,n,d,f){this.nzTreeService=e,this.ngZone=t,this.renderer=n,this.elementRef=d,this.cdr=f}ngOnInit(){this.nzTreeNode.component=this,E(this.elementRef.nativeElement,"mousedown").pipe(b(this.destroy$)).subscribe(e=>{this.nzSelectMode&&e.preventDefault()})}ngOnChanges(e){let{nzDraggable:t}=e;t&&this.handDragEvent()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}renderIndicator(e){this.ngZone.run(()=>{this.showIndicator=e!==2,!(this.nzTreeNode.key===this.nzTreeService.getSelectedNode()?.key||e===0&&this.isLeaf)&&(this.dragPos=e,this.cdr.markForCheck())})}static \u0275fac=function(t){return new(t||i)(k(O),k(pe),k(me),k(ge),k(V))};static \u0275cmp=v({type:i,selectors:[["nz-tree-node","builtin",""]],hostVars:36,hostBindings:function(t,n){t&2&&(Y("display",n.displayStyle),u("ant-select-tree-treenode",n.nzSelectMode)("ant-select-tree-treenode-disabled",n.nzSelectMode&&n.isDisabled)("ant-select-tree-treenode-switcher-open",n.nzSelectMode&&n.isSwitcherOpen)("ant-select-tree-treenode-switcher-close",n.nzSelectMode&&n.isSwitcherClose)("ant-select-tree-treenode-checkbox-checked",n.nzSelectMode&&n.isChecked)("ant-select-tree-treenode-checkbox-indeterminate",n.nzSelectMode&&n.isHalfChecked)("ant-select-tree-treenode-selected",n.nzSelectMode&&n.isSelected)("ant-select-tree-treenode-loading",n.nzSelectMode&&n.isLoading)("ant-tree-treenode",!n.nzSelectMode)("ant-tree-treenode-disabled",!n.nzSelectMode&&n.isDisabled)("ant-tree-treenode-switcher-open",!n.nzSelectMode&&n.isSwitcherOpen)("ant-tree-treenode-switcher-close",!n.nzSelectMode&&n.isSwitcherClose)("ant-tree-treenode-checkbox-checked",!n.nzSelectMode&&n.isChecked)("ant-tree-treenode-checkbox-indeterminate",!n.nzSelectMode&&n.isHalfChecked)("ant-tree-treenode-selected",!n.nzSelectMode&&n.isSelected)("ant-tree-treenode-loading",!n.nzSelectMode&&n.isLoading)("dragging",n.draggingKey===n.nzTreeNode.key))},inputs:{icon:"icon",title:"title",isLoading:[2,"isLoading","isLoading",a],isSelected:[2,"isSelected","isSelected",a],isDisabled:[2,"isDisabled","isDisabled",a],isMatched:[2,"isMatched","isMatched",a],isExpanded:[2,"isExpanded","isExpanded",a],isLeaf:[2,"isLeaf","isLeaf",a],isChecked:[2,"isChecked","isChecked",a],isHalfChecked:[2,"isHalfChecked","isHalfChecked",a],isDisableCheckbox:[2,"isDisableCheckbox","isDisableCheckbox",a],isSelectable:[2,"isSelectable","isSelectable",a],canHide:[2,"canHide","canHide",a],isStart:"isStart",isEnd:"isEnd",nzTreeNode:"nzTreeNode",nzShowLine:[2,"nzShowLine","nzShowLine",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzExpandedIcon:"nzExpandedIcon",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzSearchValue:"nzSearchValue",nzDraggable:[2,"nzDraggable","nzDraggable",a]},outputs:{nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTreeBuiltinNode"],features:[y],attrs:Ke,decls:4,vars:22,consts:[[3,"nzTreeLevel","nzSelectMode","nzIsStart","nzIsEnd"],[3,"nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"],[3,"dblclick","click","contextmenu","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","searchValue","treeTemplate","draggable","showIcon","selectMode","context","showIndicator","dragPosition"],[3,"click","nzShowExpand","nzShowLine","nzExpandedIcon","nzSelectMode","context","isLeaf","isExpanded","isLoading"],["builtin","",3,"click","nzSelectMode","isChecked","isHalfChecked","isDisabled","isDisableCheckbox"]],template:function(t,n){t&1&&(_(0,"nz-tree-indent",0),m(1,un,1,8,"nz-tree-node-switcher",1)(2,mn,1,5,"nz-tree-node-checkbox",2),x(3,"nz-tree-node-title",3),L("dblclick",function(f){return n.dblClick(f)})("click",function(f){return n.clickSelect(f)})("contextmenu",function(f){return n.contextMenu(f)}),N()),t&2&&(z("nzTreeLevel",n.nzTreeNode.level)("nzSelectMode",n.nzSelectMode)("nzIsStart",n.isStart)("nzIsEnd",n.isEnd),g(),D(n.nzShowExpand?1:-1),g(),D(n.nzCheckable?2:-1),g(),z("icon",n.icon)("title",n.title)("isLoading",n.isLoading)("isSelected",n.isSelected)("isDisabled",n.isDisabled)("isMatched",n.isMatched)("isExpanded",n.isExpanded)("isLeaf",n.isLeaf)("searchValue",n.nzSearchValue)("treeTemplate",n.nzTreeTemplate)("draggable",n.nzDraggable)("showIcon",n.nzShowIcon)("selectMode",n.nzSelectMode)("context",n.nzTreeNode)("showIndicator",n.showIndicator)("dragPosition",n.dragPos))},dependencies:[bn,Ue,wn,je],encapsulation:2,changeDetection:0})}return i})(),Qe=(()=>{class i extends O{constructor(){super()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=he({token:i,factory:i.\u0275fac})}return i})();function vn(){let i=I(He,{skipSelf:!0,optional:!0}),c=I(Qe);return i??c}var En="tree",Mn=(()=>{let i=Pe,c,e=[],t=[],n,d=[],f=[],w,ae=[],se=[];return class Q extends i{static{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(i[Symbol.metadata]??null):void 0;c=[U()],n=[U()],w=[U()],H(null,null,c,{kind:"field",name:"nzShowIcon",static:!1,private:!1,access:{has:o=>"nzShowIcon"in o,get:o=>o.nzShowIcon,set:(o,s)=>{o.nzShowIcon=s}},metadata:r},e,t),H(null,null,n,{kind:"field",name:"nzHideUnMatched",static:!1,private:!1,access:{has:o=>"nzHideUnMatched"in o,get:o=>o.nzHideUnMatched,set:(o,s)=>{o.nzHideUnMatched=s}},metadata:r},d,f),H(null,null,w,{kind:"field",name:"nzBlockNode",static:!1,private:!1,access:{has:o=>"nzBlockNode"in o,get:o=>o.nzBlockNode,set:(o,s)=>{o.nzBlockNode=s}},metadata:r},ae,se),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}nzConfigService;cdr;directionality;_nzModuleName=En;nzShowIcon=M(this,e,!1);nzHideUnMatched=(M(this,t),M(this,d,!1));nzBlockNode=(M(this,f),M(this,ae,!1));nzExpandAll=(M(this,se),!1);nzSelectMode=!1;nzCheckStrictly=!1;nzShowExpand=!0;nzShowLine=!1;nzCheckable=!1;nzAsyncData=!1;nzDraggable=!1;nzMultiple=!1;nzExpandedIcon;nzVirtualItemSize=28;nzVirtualMaxBufferPx=500;nzVirtualMinBufferPx=28;nzVirtualHeight=null;nzTreeTemplate;nzBeforeDrop;nzData=[];nzExpandedKeys=[];nzSelectedKeys=[];nzCheckedKeys=[];nzSearchValue="";nzSearchFunc;nzTreeTemplateChild;cdkVirtualScrollViewport;nzFlattenNodes=[];beforeInit=!0;dir="ltr";nzExpandedKeysChange=new h;nzSelectedKeysChange=new h;nzCheckedKeysChange=new h;nzSearchValueChange=new h;nzClick=new h;nzDblClick=new h;nzContextMenu=new h;nzCheckboxChange=new h;nzExpandChange=new h;nzOnDragStart=new h;nzOnDragEnter=new h;nzOnDragOver=new h;nzOnDragLeave=new h;nzOnDrop=new h;nzOnDragEnd=new h;HIDDEN_STYLE={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0};HIDDEN_NODE_STYLE={position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"};destroy$=new B;onChange=()=>null;onTouched=()=>null;writeValue(r){this.handleNzData(r)}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}renderTreeProperties(r){let o=!1,s=!1,{nzData:T,nzExpandedKeys:p,nzSelectedKeys:Ze,nzCheckedKeys:qe,nzCheckStrictly:de,nzExpandAll:ce,nzMultiple:Ye,nzSearchValue:Z}=r;ce&&(o=!0,s=this.nzExpandAll),Ye&&(this.nzTreeService.isMultiple=this.nzMultiple),de&&(this.nzTreeService.isCheckStrictly=this.nzCheckStrictly),T&&this.handleNzData(this.nzData),qe&&this.handleCheckedKeys(this.nzCheckedKeys),de&&this.handleCheckedKeys(null),(p||ce)&&(o=!0,this.handleExpandedKeys(s||this.nzExpandedKeys)),Ze&&this.handleSelectedKeys(this.nzSelectedKeys,this.nzMultiple),Z&&(Z.firstChange&&!this.nzSearchValue||(o=!1,this.handleSearchValue(Z.currentValue,this.nzSearchFunc),this.nzSearchValueChange.emit(this.nzTreeService.formatEvent("search",null,null))));let Ge=this.getExpandedNodeList().map(Je=>Je.key),We=o?s||this.nzExpandedKeys:Ge;this.handleFlattenNodes(this.nzTreeService.rootNodes,We)}trackByFlattenNode(r,o){return o.key}handleNzData(r){if(Array.isArray(r)){let o=this.coerceTreeNodes(r);this.nzTreeService.initTree(o)}}handleFlattenNodes(r,o=[]){this.nzTreeService.flattenTreeData(r,o)}handleCheckedKeys(r){this.nzTreeService.conductCheck(r,this.nzCheckStrictly)}handleExpandedKeys(r=[]){this.nzTreeService.conductExpandedKeys(r)}handleSelectedKeys(r,o){this.nzTreeService.conductSelectedKeys(r,o)}handleSearchValue(r,o){let s=Be(this.nzTreeService.rootNodes,!0).map(p=>p.data),T=p=>o?o(p.origin):!!r&&p.title.toLowerCase().includes(r.toLowerCase());s.forEach(p=>{p.isMatched=T(p),p.canHide=!p.isMatched,p.isMatched?this.nzTreeService.expandNodeAllParentBySearch(p):(p.setExpanded(!1),this.nzTreeService.setExpandedNodeList(p)),this.nzTreeService.setMatchedNodeList(p)})}eventTriggerChanged(r){let o=r.node;switch(r.eventName){case"expand":this.renderTree(),this.nzExpandChange.emit(r);break;case"click":this.nzClick.emit(r);break;case"dblclick":this.nzDblClick.emit(r);break;case"contextmenu":this.nzContextMenu.emit(r);break;case"check":{this.nzTreeService.setCheckedNodeList(o),this.nzCheckStrictly||this.nzTreeService.conduct(o);let s=this.nzTreeService.formatEvent("check",o,r.event);this.nzCheckboxChange.emit(s);let T=this.nzTreeService.getCheckedNodeKeys();this.nzCheckedKeysChange.emit(T);break}case"dragstart":o.isExpanded&&(o.setExpanded(!o.isExpanded),this.renderTree()),this.nzOnDragStart.emit(r);break;case"dragenter":{let s=this.nzTreeService.getSelectedNode();s&&s.key!==o.key&&!o.isExpanded&&!o.isLeaf&&(o.setExpanded(!0),this.renderTree()),this.nzOnDragEnter.emit(r);break}case"dragover":this.nzOnDragOver.emit(r);break;case"dragleave":this.nzOnDragLeave.emit(r);break;case"dragend":this.nzOnDragEnd.emit(r);break;case"drop":this.renderTree(),this.nzOnDrop.emit(r);break}}renderTree(){this.handleFlattenNodes(this.nzTreeService.rootNodes,this.getExpandedNodeList().map(r=>r.key)),this.cdr.markForCheck()}noAnimation=I(R,{host:!0,optional:!0});constructor(r,o,s,T){super(r),this.nzConfigService=o,this.cdr=s,this.directionality=T}ngOnInit(){this.nzTreeService.flattenNodes$.pipe(b(this.destroy$)).subscribe(r=>{this.nzFlattenNodes=this.nzVirtualHeight&&this.nzHideUnMatched&&this.nzSearchValue?.length>0?r.filter(o=>!o.canHide):r,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(b(this.destroy$)).subscribe(r=>{this.dir=r,this.cdr.detectChanges()})}ngOnChanges(r){this.renderTreeProperties(r)}ngAfterViewInit(){this.beforeInit=!1}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(o){return new(o||Q)(k(O),k(Ee),k(V),k(ve))};static \u0275cmp=v({type:Q,selectors:[["nz-tree"]],contentQueries:function(o,s,T){if(o&1&&Te(T,fn,7),o&2){let p;J(p=X())&&(s.nzTreeTemplateChild=p.first)}},viewQuery:function(o,s){if(o&1&&ke(j,5,j),o&2){let T;J(T=X())&&(s.cdkVirtualScrollViewport=T.first)}},hostVars:20,hostBindings:function(o,s){o&2&&u("ant-select-tree",s.nzSelectMode)("ant-select-tree-show-line",s.nzSelectMode&&s.nzShowLine)("ant-select-tree-icon-hide",s.nzSelectMode&&!s.nzShowIcon)("ant-select-tree-block-node",s.nzSelectMode&&s.nzBlockNode)("ant-tree",!s.nzSelectMode)("ant-tree-rtl",s.dir==="rtl")("ant-tree-show-line",!s.nzSelectMode&&s.nzShowLine)("ant-tree-icon-hide",!s.nzSelectMode&&!s.nzShowIcon)("ant-tree-block-node",!s.nzSelectMode&&s.nzBlockNode)("draggable-tree",s.nzDraggable)},inputs:{nzShowIcon:[2,"nzShowIcon","nzShowIcon",a],nzHideUnMatched:[2,"nzHideUnMatched","nzHideUnMatched",a],nzBlockNode:[2,"nzBlockNode","nzBlockNode",a],nzExpandAll:[2,"nzExpandAll","nzExpandAll",a],nzSelectMode:[2,"nzSelectMode","nzSelectMode",a],nzCheckStrictly:[2,"nzCheckStrictly","nzCheckStrictly",a],nzShowExpand:[2,"nzShowExpand","nzShowExpand",a],nzShowLine:[2,"nzShowLine","nzShowLine",a],nzCheckable:[2,"nzCheckable","nzCheckable",a],nzAsyncData:[2,"nzAsyncData","nzAsyncData",a],nzDraggable:[2,"nzDraggable","nzDraggable",a],nzMultiple:[2,"nzMultiple","nzMultiple",a],nzExpandedIcon:"nzExpandedIcon",nzVirtualItemSize:"nzVirtualItemSize",nzVirtualMaxBufferPx:"nzVirtualMaxBufferPx",nzVirtualMinBufferPx:"nzVirtualMinBufferPx",nzVirtualHeight:"nzVirtualHeight",nzTreeTemplate:"nzTreeTemplate",nzBeforeDrop:"nzBeforeDrop",nzData:"nzData",nzExpandedKeys:"nzExpandedKeys",nzSelectedKeys:"nzSelectedKeys",nzCheckedKeys:"nzCheckedKeys",nzSearchValue:"nzSearchValue",nzSearchFunc:"nzSearchFunc"},outputs:{nzExpandedKeysChange:"nzExpandedKeysChange",nzSelectedKeysChange:"nzSelectedKeysChange",nzCheckedKeysChange:"nzCheckedKeysChange",nzSearchValueChange:"nzSearchValueChange",nzClick:"nzClick",nzDblClick:"nzDblClick",nzContextMenu:"nzContextMenu",nzCheckboxChange:"nzCheckboxChange",nzExpandChange:"nzExpandChange",nzOnDragStart:"nzOnDragStart",nzOnDragEnter:"nzOnDragEnter",nzOnDragOver:"nzOnDragOver",nzOnDragLeave:"nzOnDragLeave",nzOnDrop:"nzOnDrop",nzOnDragEnd:"nzOnDragEnd"},exportAs:["nzTree"],features:[De([Qe,{provide:O,useFactory:vn},{provide:Ve,useExisting:le(()=>Q),multi:!0}]),Ce,y],decls:10,vars:7,consts:[["nodeTemplate",""],[1,"ant-tree-treenode"],[1,"ant-tree-indent"],[1,"ant-tree-indent-unit"],[1,"ant-tree-list",2,"position","relative"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","itemSize","minBufferPx","maxBufferPx","height"],[3,"ant-select-tree-list-holder-inner","ant-tree-list-holder-inner","nzNoAnimation"],[3,"itemSize","minBufferPx","maxBufferPx"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"nzNoAnimation"],["builtin","",3,"nzExpandChange","nzClick","nzDblClick","nzContextMenu","nzCheckboxChange","nzOnDragStart","nzOnDragEnter","nzOnDragOver","nzOnDragLeave","nzOnDragEnd","nzOnDrop","icon","title","isLoading","isSelected","isDisabled","isMatched","isExpanded","isLeaf","isStart","isEnd","isChecked","isHalfChecked","isDisableCheckbox","isSelectable","canHide","nzTreeNode","nzSelectMode","nzShowLine","nzExpandedIcon","nzDraggable","nzCheckable","nzShowExpand","nzAsyncData","nzSearchValue","nzHideUnMatched","nzBeforeDrop","nzShowIcon","nzTreeTemplate"]],template:function(o,s){o&1&&(x(0,"div"),_(1,"input"),N(),x(2,"div",1)(3,"div",2),_(4,"div",3),N()(),x(5,"div",4),m(6,_n,2,11,"cdk-virtual-scroll-viewport",5)(7,Dn,3,7,"div",6),N(),m(8,xn,1,28,"ng-template",null,0,be)),o&2&&(g(),P(s.HIDDEN_STYLE),g(),P(s.HIDDEN_NODE_STYLE),g(3),u("ant-select-tree-list",s.nzSelectMode),g(),D(s.nzVirtualHeight?6:7))},dependencies:[j,Me,ye,te,R,Re],encapsulation:2,data:{animation:[Oe]},changeDetection:0})}})(),dt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=fe({type:i});static \u0275inj=ze({imports:[Mn,Re,Ue,je]})}return i})();export{Mn as a,dt as b};
