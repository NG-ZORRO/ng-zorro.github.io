import{a as q}from"./chunk-MGTQHU36.js";import"./chunk-KLHNJ3M2.js";import"./chunk-CODBTA5Z.js";import{c as v,d as R}from"./chunk-SQAJSG4L.js";import{a as Ne,b as we}from"./chunk-4G4UVO2G.js";import{e as T,f as X}from"./chunk-J6UHWTEV.js";import"./chunk-AEURZ62J.js";import{b as ne,c as ie,d as oe,e as ae,f as se,g as re,k as me,l as le}from"./chunk-XWXSR3N6.js";import"./chunk-U5FYLSZJ.js";import{b as k,c as z}from"./chunk-TV3EHOFZ.js";import{Aa as ee,Qb as te,db as N,fb as w,jb as B,oa as J}from"./chunk-6XBE4KXC.js";import{Ab as L,Ba as b,Dc as M,Ec as D,Fc as A,Tc as Ae,Wb as c,Xb as e,Xc as S,Yb as n,Zb as l,bd as _e,ec as Fe,fd as _,ib as p,ic as h,kb as ge,kc as ye,oc as Y,pa as $,pc as j,qa as G,qc as K,ra as ce,sa as pe,sc as Me,tc as De,ub as f,zc as t}from"./chunk-WMX4TNQB.js";import{a as I,b as Se,c as be,h as y}from"./chunk-OW75ZOQB.js";function ze(s){return Array.isArray(s)?s:[s]}var F=class{config;idCounter=0;_messages=b([]);get messages(){return this._messages.asReadonly()}createMessage(o,a){let i={id:`msg_${this.idCounter}`,message:o,status:a};return this.idCounter++,i}parsedMessages=S(()=>{let o=[];return this._messages().forEach(i=>{let m=this.config.parser?this.config.parser(i.message):i.message,r=ze(m);r.forEach((u,x)=>{let d=i.id;r.length>1&&(d=`${d}_${x}`),o.push({id:d,message:u,status:i.status})})}),o});constructor(o){if(this.config=o,o.defaultMessages){let a=o.defaultMessages.map((i,m)=>I({id:`default_${m}`,status:"local"},i));this._messages.set(a)}}getFilteredMessages(o){return o.filter(a=>a.status!=="loading"&&a.status!=="error").map(a=>a.message)}getRequestMessages(){return this.getFilteredMessages(this._messages())}getTransformMessage=o=>{let{chunk:a,chunks:i,originMessage:m}=o;if(typeof this.config.transformMessage=="function")return this.config.transformMessage(o);if(a)return a;if(Array.isArray(i)){let r=i?.length>0?i?.[i?.length-1]:void 0;return m||r}return i};setMessages(o){typeof o=="function"?this._messages.update(o):this._messages.set(o)}onRequest(o){if(!this.config.agent)throw new Error("The agent parameter is required when using the onRequest method in an agent generated by XChat.");let a=null,i,m={};if(o&&typeof o=="object"&&"message"in o){let x=o,{message:d}=x,g=be(x,["message"]);i=d,m=g}else i=o;this.setMessages(d=>{let g=[...d,this.createMessage(i,"local")];if(this.config.requestPlaceholder){let E;typeof this.config.requestPlaceholder=="function"?E=this.config.requestPlaceholder(i,{messages:this.getFilteredMessages(g)}):E=this.config.requestPlaceholder;let C=this.createMessage(E,"loading");a=C.id,g=[...g,C]}return g});let r=null,u=(d,g,E)=>{let C=this._messages().find(V=>V.id===r);if(C)this.setMessages(V=>V.map(P=>{if(P.id===r){let Ce=this.getTransformMessage({originMessage:P.message,chunk:g,chunks:E,status:d});return Se(I({},P),{message:Ce,status:d})}return P}));else{let V=this.getTransformMessage({chunk:g,status:d,chunks:E});C=this.createMessage(V,d),this.setMessages(P=>[...P.filter(ke=>ke.id!==a),C]),r=C.id}return C};this.config.agent.request(I({message:i,messages:this.getRequestMessages()},m),{onUpdate:d=>{u("updating",d,[])},onSuccess:d=>{u("success",void 0,d)},onError:d=>y(this,null,function*(){if(this.config.requestFallback){let g;typeof this.config.requestFallback=="function"?g=yield this.config.requestFallback(i,{error:d,messages:this.getRequestMessages()}):g=this.config.requestFallback,this.setMessages(E=>[...E.filter(C=>C.id!==a&&C.id!==r),this.createMessage(g,"error")])}else this.setMessages(g=>g.filter(E=>E.id!==a&&E.id!==r))}),onStream:d=>{this.config.resolveAbortController?.(d)}},this.config.transformStream)}};var ve=()=>new Promise(s=>setTimeout(s,1e3)),W=class s{prompt=_("");mockSuccess=b(!1);roles={ai:{placement:"start",typing:{step:5,interval:20},avatar:{icon:"user",style:{background:"#fde3cf"}}},local:{placement:"end",avatar:{icon:"user",style:{background:"#87d068"}}}};agent=new q({request:(m,r)=>y(this,[m,r],function*({message:o},{onSuccess:a,onError:i}){yield ve(),this.mockSuccess.update(u=>!u),this.mockSuccess()&&a([`Mock success return. You said: ${o}`]),i(new Error("Mock request failed"))})});chat=new F({agent:this.agent,requestPlaceholder:"Waiting...",requestFallback:"Mock failed return. Please try again later."});items=S(()=>this.chat.messages().map(({id:o,message:a,status:i})=>({key:o,loading:i==="loading",role:i==="local"?"local":"ai",content:a})));request(){let o=this.prompt();this.chat.onRequest(o),this.prompt.set("")}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=f({type:s,selectors:[["nx-demo-x-chat-basic"]],inputs:{prompt:[1,"prompt"]},outputs:{prompt:"promptChange"},decls:3,vars:4,consts:[["nzVertical","","nzGap","middle"],[3,"nxItems","nxRoles"],[3,"ngModelChange","nxSubmit","ngModel","nxLoading"]],template:function(a,i){a&1&&(e(0,"nz-flex",0),l(1,"nx-bubble-list",1),e(2,"nx-sender",2),A("ngModelChange",function(r){return D(i.prompt,r)||(i.prompt=r),r}),h("nxSubmit",function(){return i.request()}),n()()),a&2&&(p(),c("nxItems",i.items())("nxRoles",i.roles),p(),M("ngModel",i.prompt),c("nxLoading",i.agent.isRequesting()))},dependencies:[B,N,w,z,k,R,v,X,T],encapsulation:2})};var Re="https://api.x.ant.design/api/llm_siliconflow_deepSeek-r1-distill-1wen-7b",Te="DeepSeek-R1-Distill-Qwen-7B",Xe="Bearer sk-xxxxxxxxxxxxxxxxxxxx",O=class s{prompt=_("");mockSuccess=b(!1);roles={assistant:{placement:"start",avatar:{icon:"user",style:{background:"#fde3cf"}}},user:{placement:"end",avatar:{icon:"user",style:{background:"#87d068"}}}};abortController=null;agent=new q({baseURL:Re,model:Te,dangerouslyApiKey:Xe});chat=new F({agent:this.agent,requestFallback:(o,{error:a})=>a.name==="AbortError"?{content:"Request is aborted",role:"assistant"}:{content:"Request failed, please try again!",role:"assistant"},requestPlaceholder:()=>({content:"Please wait...",role:"assistant"}),transformMessage:o=>{let{originMessage:a,chunk:i}=o||{},m="",r="";try{if(i?.data&&!i?.data.includes("DONE")){let x=JSON.parse(i?.data);r=x?.choices?.[0]?.delta?.reasoning_content||"",m=x?.choices?.[0]?.delta?.content||""}}catch(x){console.error(x)}let u="";return!a?.content&&r?u=`<think>${r}`:a?.content?.includes("<think>")&&!a?.content.includes("</think>")&&m?u=`${a?.content}</think>${m}`:u=`${a?.content||""}${r}${m}`,{content:u,role:"assistant"}},resolveAbortController:o=>{this.abortController=o}});items=S(()=>this.chat.messages().map(({id:o,message:a,status:i})=>({key:o,loading:i==="loading",role:a.role,content:a.content})));request(){let o=this.prompt();this.chat.onRequest({stream:!0,message:{role:"user",content:o}}),this.prompt.set("")}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=f({type:s,selectors:[["nx-demo-x-chat-model"]],inputs:{prompt:[1,"prompt"]},outputs:{prompt:"promptChange"},decls:3,vars:4,consts:[["nzVertical","","nzGap","middle"],[3,"nxItems","nxRoles"],[3,"ngModelChange","nxCancel","nxSubmit","ngModel","nxLoading"]],template:function(a,i){a&1&&(e(0,"nz-flex",0),l(1,"nx-bubble-list",1),e(2,"nx-sender",2),A("ngModelChange",function(r){return D(i.prompt,r)||(i.prompt=r),r}),h("nxCancel",function(){return i.abortController==null?null:i.abortController.abort()})("nxSubmit",function(){return i.request()}),n()()),a&2&&(p(),c("nxItems",i.items())("nxRoles",i.roles),p(),M("ngModel",i.prompt),c("nxLoading",i.agent.isRequesting()))},dependencies:[B,N,w,z,k,R,v,X,T],encapsulation:2})};var Q=class s{prompt=_("");mockSuccess=b(!1);roles={ai:{placement:"start",avatar:{icon:"user",style:{background:"#fde3cf"}}},local:{placement:"end",avatar:{icon:"user",style:{background:"#87d068"}}}};agent=new q({request:(m,r)=>y(null,[m,r],function*({message:o},{onSuccess:a,onUpdate:i}){let u=`Streaming output instead of Bubble typing effect. You typed: ${o}`,x="",d=setInterval(()=>{console.log("interval"),x=u.slice(0,x.length+2),i(x),x===u&&(clearInterval(d),a([u]))},100)})});chat=new F({agent:this.agent});items=S(()=>this.chat.messages().map(({id:o,message:a,status:i})=>({key:o,loading:i==="loading",role:i==="local"?"local":"ai",content:a})));request(){let o=this.prompt();this.chat.onRequest(o),this.prompt.set("")}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=f({type:s,selectors:[["nx-demo-x-chat-stream"]],inputs:{prompt:[1,"prompt"]},outputs:{prompt:"promptChange"},decls:3,vars:4,consts:[["nzVertical","","nzGap","middle"],[3,"nxItems","nxRoles"],[3,"ngModelChange","nxSubmit","ngModel","nxLoading"]],template:function(a,i){a&1&&(e(0,"nz-flex",0),l(1,"nx-bubble-list",1),e(2,"nx-sender",2),A("ngModelChange",function(r){return D(i.prompt,r)||(i.prompt=r),r}),h("nxSubmit",function(){return i.request()}),n()()),a&2&&(p(),c("nxItems",i.items())("nxRoles",i.roles),p(),M("ngModel",i.prompt),c("nxLoading",i.agent.isRequesting()))},dependencies:[B,N,w,z,k,R,v,X,T],encapsulation:2})};var qe=["messageRender"];function Pe(s,o){if(s&1&&l(0,"nx-prompts",4),s&2){let a=o.content,i=ye();c("nxItems",i.parsePrompts(a))}}var Be="@@SEP@@",Ie=()=>new Promise(s=>setTimeout(s,1e3)),H=class s{messageRender=_e("messageRender",{read:ge});prompt=_("");mockSuccess=b(!1);roles=S(()=>({user:{placement:"end",avatar:{icon:"user",style:{background:"#87d068"}}},text:{placement:"start",avatar:{icon:"user",style:{background:"#fde3cf"}}},suggestion:{placement:"start",avatar:{icon:"user",style:{background:"#fde3cf",visibility:"hidden"}},variant:"borderless",messageRender:this.messageRender()}}));agent=new q({request:(i,m)=>y(null,[i,m],function*({message:o},{onSuccess:a}){yield Ie();let{content:r}=o||{};a([{type:"ai",list:[{type:"text",content:"Do you want?"},{type:"suggestion",content:[`Look at: ${r}`,`Search: ${r}`,`Try: ${r}`].join(Be)}]}])})});chat=new F({agent:this.agent,defaultMessages:[{id:"init",message:{type:"ai",content:"Hello, what can I do for you?"},status:"success"}],requestPlaceholder:{type:"ai",content:"Waiting..."},parser:o=>((o.content?[o]:o.list)||[]).map(i=>({role:i.type,content:i.content}))});items=S(()=>this.chat.parsedMessages().map(({id:o,message:a,status:i})=>I({key:o,loading:i==="loading"},a)));request(){let o=this.prompt();this.chat.onRequest({type:"user",content:o}),this.prompt.set("")}parsePrompts(o){return o.split(Be).map(a=>({label:a,icon:"smile",key:a}))}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=f({type:s,selectors:[["nx-demo-x-chat-suggestions"]],viewQuery:function(a,i){a&1&&Me(i.messageRender,qe,5,ge),a&2&&De()},inputs:{prompt:[1,"prompt"]},outputs:{prompt:"promptChange"},decls:5,vars:4,consts:[["messageRender",""],["nzVertical","","nzGap","middle"],[3,"nxItems","nxRoles"],[3,"ngModelChange","nxSubmit","ngModel","nxLoading"],["nxVertical","",3,"nxItems"]],template:function(a,i){if(a&1){let m=Fe();e(0,"nz-flex",1),l(1,"nx-bubble-list",2),e(2,"nx-sender",3),A("ngModelChange",function(u){return ce(m),D(i.prompt,u)||(i.prompt=u),pe(u)}),h("nxSubmit",function(){return ce(m),pe(i.request())}),n()(),L(3,Pe,1,1,"ng-template",null,0,Ae)}a&2&&(p(),c("nxItems",i.items())("nxRoles",i.roles()),p(),M("ngModel",i.prompt),c("nxLoading",i.agent.isRequesting()))},dependencies:[B,N,w,z,k,R,v,we,Ne,X,T],styles:[".ant-prompts-icon{color:#faad14}"]})};function Ze(s,o){s&1&&l(0,"nx-demo-x-chat-basic",32)}function Ue(s,o){s&1&&l(0,"nx-demo-x-chat-stream",33)}function $e(s,o){s&1&&l(0,"nx-demo-x-chat-suggestions",34)}function Ge(s,o){s&1&&l(0,"nx-demo-x-chat-model",35)}var de=class s{expanded=!1;codeBoxes;goLink(o){window&&(window.location.hash=o)}expandAllCode(){this.expanded=!this.expanded,this.codeBoxes.forEach(o=>o.expandCode(this.expanded))}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=f({type:s,selectors:[["nz-demo-x-chat"]],viewQuery:function(a,i){if(a&1&&Y(ne,5),a&2){let m;j(m=K())&&(i.codeBoxes=m)}},decls:268,vars:2,consts:[[1,"toc-affix",3,"nzOffsetTop"],["nzShowInkInFixed","",3,"nzClick","nzAffix"],["nzHref","#\u4F55\u65F6\u4F7F\u7528","nzTitle","\u4F55\u65F6\u4F7F\u7528",1,"toc-indent-1"],["nzHref","#\u4EE3\u7801\u6F14\u793A","nzTitle","\u4EE3\u7801\u6F14\u793A",1,"toc-indent-1"],["nzHref","#components-x-chat-demo-basic","nzTitle","\u57FA\u672C\u7528\u6CD5",1,"toc-indent-2"],["nzHref","#components-x-chat-demo-stream","nzTitle","\u6D41\u5F0F\u8F93\u51FA",1,"toc-indent-2"],["nzHref","#components-x-chat-demo-suggestions","nzTitle","\u591A\u9009\u5EFA\u8BAE",1,"toc-indent-2"],["nzHref","#components-x-chat-demo-model","nzTitle","\u6A21\u578B\u63A5\u5165",1,"toc-indent-2"],["nzHref","#api","nzTitle","API",1,"toc-indent-1"],[1,"markdown"],[1,"subtitle"],["name","x-chat","description","\u914D\u5408 XAgent \u8FDB\u884C\u5BF9\u8BDD\u6570\u636E\u7BA1\u7406\u3002","language","zh"],["id","\u4F55\u65F6\u4F7F\u7528"],["onclick","window.location.hash = '\u4F55\u65F6\u4F7F\u7528'",1,"anchor"],["id","\u4EE3\u7801\u6F14\u793A"],["nzType","appstore","nz-tooltip","","nzTooltipTitle","\u5C55\u5F00\u5168\u90E8\u4EE3\u7801",1,"code-box-expand-trigger",3,"click"],["onclick","window.location.hash = '\u4EE3\u7801\u6F14\u793A'",1,"anchor"],["cols","1"],["showcase","","component","x-chat","key","basic","doc","<p>\u57FA\u672C\u7528\u6CD5\u3002</p>","title","\u57FA\u672C\u7528\u6CD5",4,"templateRef"],["showcase","","component","x-chat","key","stream","doc","<p>\u4F7F\u7528\u6D41\u5F0F\u8F93\u51FA\u66F4\u65B0\u5185\u5BB9\u3002</p>","title","\u6D41\u5F0F\u8F93\u51FA",4,"templateRef"],["showcase","","component","x-chat","key","suggestions","doc","<p>\u901A\u8FC7\u5B9A\u5236\u80FD\u529B\uFF0C\u8FD4\u56DE\u591A\u4E2A\u63A8\u8350\u5185\u5BB9\u3002</p>","title","\u591A\u9009\u5EFA\u8BAE",4,"templateRef"],["showcase","","component","x-chat","key","model","doc","<p>\u63A5\u5165\u4E91\u670D\u52A1\u5E73\u53F0\uFF0C\u53EF\u53D1\u9001\u6D88\u606F\u3001\u5904\u7406\u6570\u636E\u3001\u7EC8\u6B62\u6D88\u606F\u3002</p>","title","\u6A21\u578B\u63A5\u5165",4,"templateRef"],[1,"markdown","api-container"],["id","api"],["onclick","window.location.hash = 'api'",1,"anchor"],["id","xchatconfig"],["onclick","window.location.hash = 'xchatconfig'",1,"anchor"],["id","xchatconfigreturntype"],["onclick","window.location.hash = 'xchatconfigreturntype'",1,"anchor"],["id","requestparams"],["onclick","window.location.hash = 'requestparams'",1,"anchor"],["href","/components/x-request/zh#xrequestparams"],["showcase","","component","x-chat","key","basic","doc","<p>\u57FA\u672C\u7528\u6CD5\u3002</p>","title","\u57FA\u672C\u7528\u6CD5"],["showcase","","component","x-chat","key","stream","doc","<p>\u4F7F\u7528\u6D41\u5F0F\u8F93\u51FA\u66F4\u65B0\u5185\u5BB9\u3002</p>","title","\u6D41\u5F0F\u8F93\u51FA"],["showcase","","component","x-chat","key","suggestions","doc","<p>\u901A\u8FC7\u5B9A\u5236\u80FD\u529B\uFF0C\u8FD4\u56DE\u591A\u4E2A\u63A8\u8350\u5185\u5BB9\u3002</p>","title","\u591A\u9009\u5EFA\u8BAE"],["showcase","","component","x-chat","key","model","doc","<p>\u63A5\u5165\u4E91\u670D\u52A1\u5E73\u53F0\uFF0C\u53EF\u53D1\u9001\u6D88\u606F\u3001\u5904\u7406\u6570\u636E\u3001\u7EC8\u6B62\u6D88\u606F\u3002</p>","title","\u6A21\u578B\u63A5\u5165"]],template:function(a,i){a&1&&(e(0,"article")(1,"nz-affix",0)(2,"nz-anchor",1),h("nzClick",function(r){return i.goLink(r)}),l(3,"nz-link",2)(4,"nz-link",3)(5,"nz-link",4)(6,"nz-link",5)(7,"nz-link",6)(8,"nz-link",7)(9,"nz-link",8),n()(),e(10,"section",9)(11,"h1"),t(12," XChat "),e(13,"span",10),t(14,"\u6570\u636E\u7BA1\u7406"),n()(),l(15,"component-meta",11),e(16,"section",9)(17,"h2",12)(18,"span"),t(19,"\u4F55\u65F6\u4F7F\u7528"),n(),e(20,"a",13),t(21,"#"),n()(),e(22,"p"),t(23,"\u901A\u8FC7 Agent \u8FDB\u884C\u4F1A\u8BDD\u6570\u636E\u7BA1\u7406\uFF0C\u5E76\u4EA7\u51FA\u4F9B\u9875\u9762\u6E32\u67D3\u4F7F\u7528\u7684\u6570\u636E\u3002"),n()(),e(24,"h2",14)(25,"span"),t(26,"\u4EE3\u7801\u6F14\u793A"),n(),e(27,"nz-icon",15),h("click",function(){return i.expandAllCode()}),n(),e(28,"a",16),t(29,"#"),n()()(),e(30,"demo-wrapper",17),L(31,Ze,1,0,"nx-demo-x-chat-basic",18)(32,Ue,1,0,"nx-demo-x-chat-stream",19)(33,$e,1,0,"nx-demo-x-chat-suggestions",20)(34,Ge,1,0,"nx-demo-x-chat-model",21),n(),e(35,"section",22),G(),e(36,"h2",23)(37,"span"),t(38,"API"),n(),e(39,"a",24),t(40,"#"),n()(),e(41,"h3",25)(42,"span"),t(43,"XChatConfig"),n(),e(44,"a",26),t(45,"#"),n()(),e(46,"table")(47,"thead")(48,"tr")(49,"th"),t(50,"\u5C5E\u6027"),n(),e(51,"th"),t(52,"\u8BF4\u660E"),n(),e(53,"th"),t(54,"\u7C7B\u578B"),n(),e(55,"th"),t(56,"\u9ED8\u8BA4\u503C"),n()()(),e(57,"tbody")(58,"tr")(59,"td")(60,"code"),t(61,"agent"),n()(),e(62,"td"),t(63,"\u901A\u8FC7 "),e(64,"code"),t(65,"useXAgent"),n(),t(66," \u751F\u6210\u7684 "),e(67,"code"),t(68,"agent"),n(),t(69,"\uFF0C\u5F53\u4F7F\u7528 "),e(70,"code"),t(71,"onRequest"),n(),t(72," \u65B9\u6CD5\u65F6, "),e(73,"code"),t(74,"agent"),n(),t(75," \u53C2\u6570\u662F\u5FC5\u9700\u7684\u3002"),n(),e(76,"td")(77,"code"),t(78,"XAgent"),n()(),e(79,"td"),t(80,"-"),n()(),e(81,"tr")(82,"td")(83,"code"),t(84,"defaultMessages"),n()(),e(85,"td"),t(86,"\u9ED8\u8BA4\u5C55\u793A\u4FE1\u606F"),n(),e(87,"td")(88,"code"),t(89,"{ status, message }[]"),n()(),e(90,"td"),t(91,"-"),n()(),e(92,"tr")(93,"td")(94,"code"),t(95,"parser"),n()(),e(96,"td"),t(97,"\u5C06 AgentMessage \u8F6C\u6362\u6210\u6D88\u8D39\u4F7F\u7528\u7684 ParsedMessage\uFF0C\u4E0D\u8BBE\u7F6E\u65F6\u5219\u76F4\u63A5\u6D88\u8D39 AgentMessage\u3002\u652F\u6301\u5C06\u4E00\u6761 AgentMessage \u8F6C\u6362\u6210\u591A\u6761 ParsedMessage"),n(),e(98,"td")(99,"code"),t(100,"(message: AgentMessage) => BubbleMessage | BubbleMessage[]"),n()(),e(101,"td"),t(102,"-"),n()(),e(103,"tr")(104,"td")(105,"code"),t(106,"requestFallback"),n()(),e(107,"td"),t(108,"\u8BF7\u6C42\u5931\u8D25\u7684\u515C\u5E95\u4FE1\u606F\uFF0C\u4E0D\u63D0\u4F9B\u5219\u4E0D\u4F1A\u5C55\u793A"),n(),e(109,"td")(110,"code"),t(111,"AgentMessage | () => AgentMessage"),n()(),e(112,"td"),t(113,"-"),n()(),e(114,"tr")(115,"td")(116,"code"),t(117,"requestPlaceholder"),n()(),e(118,"td"),t(119,"\u8BF7\u6C42\u4E2D\u7684\u5360\u4F4D\u4FE1\u606F\uFF0C\u4E0D\u63D0\u4F9B\u5219\u4E0D\u4F1A\u5C55\u793A"),n(),e(120,"td")(121,"code"),t(122,"AgentMessage | () => AgentMessage"),n()(),e(123,"td"),t(124,"-"),n()(),e(125,"tr")(126,"td")(127,"code"),t(128,"transformMessage"),n()(),e(129,"td"),t(130,"\u53EF\u5728\u66F4\u65B0\u6570\u636E\u65F6\u5BF9"),e(131,"code"),t(132,"messages"),n(),t(133,"\u505A\u8F6C\u6362\uFF0C\u540C\u65F6\u4F1A\u66F4\u65B0\u5230"),e(134,"code"),t(135,"messages"),n()(),e(136,"td")(137,"code"),t(138,"(info: {originMessage?: AgentMessage,chunk: Output,chunks: Output[],status: MessageStatus}) => AgentMessage"),n()(),e(139,"td"),t(140,"-"),n()(),e(141,"tr")(142,"td")(143,"code"),t(144,"transformStream"),n()(),e(145,"td"),t(146,"\u53EF\u9009\u7684\u8F6C\u6362\u51FD\u6570\uFF0C\u7528\u4E8E\u5904\u7406\u6D41\u6570\u636E"),n(),e(147,"td")(148,"code"),t(149,"XStreamOptions<Output>['transformStream']"),n()(),e(150,"td"),t(151,"-"),n()(),e(152,"tr")(153,"td")(154,"code"),t(155,"resolveAbortController"),n()(),e(156,"td")(157,"code"),t(158,"AbortController"),n(),t(159," \u63A7\u5236\u5668\uFF0C\u7528\u4E8E\u63A7\u5236\u6D41\u72B6\u6001"),n(),e(160,"td")(161,"code"),t(162,"(abortController: AbortController) => void"),n()(),e(163,"td"),t(164,"-"),n()()()(),e(165,"h3",27)(166,"span"),t(167,"XChatConfigReturnType"),n(),e(168,"a",28),t(169,"#"),n()(),e(170,"table")(171,"thead")(172,"tr")(173,"th"),t(174,"\u5C5E\u6027"),n(),e(175,"th"),t(176,"\u8BF4\u660E"),n(),e(177,"th"),t(178,"\u7C7B\u578B"),n(),e(179,"th"),t(180,"\u9ED8\u8BA4\u503C"),n()()(),e(181,"tbody")(182,"tr")(183,"td")(184,"code"),t(185,"messages"),n()(),e(186,"td"),t(187,"\u5F53\u524D\u7BA1\u7406\u7684\u5185\u5BB9"),n(),e(188,"td")(189,"code"),t(190,"{id: string | number; message: AgentMessage; status: MessageStatus;}[]"),n()(),e(191,"td"),t(192,"-"),n()(),e(193,"tr")(194,"td")(195,"code"),t(196,"parsedMessages"),n()(),e(197,"td"),t(198,"\u7ECF\u8FC7 "),e(199,"code"),t(200,"parser"),n(),t(201," \u8F6C\u8BD1\u8FC7\u7684\u5185\u5BB9"),n(),e(202,"td")(203,"code"),t(204,"{id: string | number; message: ParsedMessage; status: MessageStatus;}[]"),n()(),e(205,"td"),t(206,"-"),n()(),e(207,"tr")(208,"td")(209,"code"),t(210,"onRequest"),n()(),e(211,"td"),t(212,"\u6DFB\u52A0\u4E00\u6761 Message\uFF0C\u5E76\u4E14\u89E6\u53D1\u8BF7\u6C42\uFF0C\u82E5\u65E0"),e(213,"code"),t(214,"key"),n(),t(215,"\u4E3A"),e(216,"code"),t(217,"message"),n(),t(218,"\u7684\u6570\u636E\u5219\u4F1A\u5C06\u6574\u4E2A\u6570\u636E\u505A\u4E3A\u6D88\u606F\u5904\u7406"),n(),e(219,"td")(220,"code"),t(221,"(requestParams: AgentMessage | RequestParams) => void"),n()(),e(222,"td"),t(223,"-"),n()(),e(224,"tr")(225,"td")(226,"code"),t(227,"setMessages"),n()(),e(228,"td"),t(229,"\u76F4\u63A5\u4FEE\u6539 messages\uFF0C\u4E0D\u4F1A\u89E6\u53D1\u8BF7\u6C42"),n(),e(230,"td")(231,"code"),t(232,"(messages: {id: string | number; message: AgentMessage; status: MessageStatus;}[]) => void"),n()(),e(233,"td"),t(234,"-"),n()()()(),e(235,"h3",29)(236,"span"),t(237,"RequestParams"),n(),e(238,"a",30),t(239,"#"),n()(),e(240,"p"),t(241,"\u7EE7\u627F "),e(242,"a",31),t(243,"XRequestParams"),n(),t(244,"\u3002"),n(),e(245,"table")(246,"thead")(247,"tr")(248,"th"),t(249,"\u5C5E\u6027"),n(),e(250,"th"),t(251,"\u8BF4\u660E"),n(),e(252,"th"),t(253,"\u7C7B\u578B"),n(),e(254,"th"),t(255,"\u9ED8\u8BA4\u503C"),n()()(),e(256,"tbody")(257,"tr")(258,"td")(259,"code"),t(260,"message"),n()(),e(261,"td"),t(262,"\u5F53\u524D\u6D88\u606F\u7684\u5185\u5BB9"),n(),e(263,"td")(264,"code"),t(265,"AgentMessage"),n()(),e(266,"td"),t(267,"-"),n()()()(),$(),n()()),a&2&&(p(),c("nzOffsetTop",16),p(),c("nzAffix",!1))},dependencies:[le,me,oe,ie,ae,se,re,J,te,ee,W,O,Q,H],encapsulation:2})};function Ye(s,o){s&1&&l(0,"nx-demo-x-chat-basic",32)}function je(s,o){s&1&&l(0,"nx-demo-x-chat-stream",33)}function Ke(s,o){s&1&&l(0,"nx-demo-x-chat-suggestions",34)}function Je(s,o){s&1&&l(0,"nx-demo-x-chat-model",35)}var ue=class s{expanded=!1;codeBoxes;goLink(o){window&&(window.location.hash=o)}expandAllCode(){this.expanded=!this.expanded,this.codeBoxes.forEach(o=>o.expandCode(this.expanded))}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=f({type:s,selectors:[["nz-demo-x-chat"]],viewQuery:function(a,i){if(a&1&&Y(ne,5),a&2){let m;j(m=K())&&(i.codeBoxes=m)}},decls:263,vars:2,consts:[[1,"toc-affix",3,"nzOffsetTop"],["nzShowInkInFixed","",3,"nzClick","nzAffix"],["nzHref","#when_to_use","nzTitle","When To Use",1,"toc-indent-1"],["nzHref","#examples","nzTitle","Examples",1,"toc-indent-1"],["nzHref","#components-x-chat-demo-basic","nzTitle","Basic",1,"toc-indent-2"],["nzHref","#components-x-chat-demo-stream","nzTitle","Streaming",1,"toc-indent-2"],["nzHref","#components-x-chat-demo-suggestions","nzTitle","Multiple Suggestions",1,"toc-indent-2"],["nzHref","#components-x-chat-demo-model","nzTitle","Model Access",1,"toc-indent-2"],["nzHref","#api","nzTitle","API",1,"toc-indent-1"],[1,"markdown"],[1,"subtitle"],["name","x-chat","description","Work with agent hook for data management.","language","en"],["id","when_to_use"],["onclick","window.location.hash = 'when_to_use'",1,"anchor"],["id","examples"],["nzType","appstore","nz-tooltip","","nzTooltipTitle","Expand All Code",1,"code-box-expand-trigger",3,"click"],["onclick","window.location.hash = 'Examples'",1,"anchor"],["cols","1"],["showcase","","component","x-chat","key","basic","doc","<p>Basic usage.</p>","title","Basic",4,"templateRef"],["showcase","","component","x-chat","key","stream","doc","<p>Update content with stream output.</p>","title","Streaming",4,"templateRef"],["showcase","","component","x-chat","key","suggestions","doc","<p>Return multiple recommended contents by customizing the ability.</p>","title","Multiple Suggestions",4,"templateRef"],["showcase","","component","x-chat","key","model","doc","<p>Access to cloud service platform, can send messages, process data, abort stream.</p>","title","Model Access",4,"templateRef"],[1,"markdown","api-container"],["id","api"],["onclick","window.location.hash = 'api'",1,"anchor"],["id","xchatconfig"],["onclick","window.location.hash = 'xchatconfig'",1,"anchor"],["id","xchatconfigreturntype"],["onclick","window.location.hash = 'xchatconfigreturntype'",1,"anchor"],["id","requestparams"],["onclick","window.location.hash = 'requestparams'",1,"anchor"],["href","/components/x-request/en#xrequestparams"],["showcase","","component","x-chat","key","basic","doc","<p>Basic usage.</p>","title","Basic"],["showcase","","component","x-chat","key","stream","doc","<p>Update content with stream output.</p>","title","Streaming"],["showcase","","component","x-chat","key","suggestions","doc","<p>Return multiple recommended contents by customizing the ability.</p>","title","Multiple Suggestions"],["showcase","","component","x-chat","key","model","doc","<p>Access to cloud service platform, can send messages, process data, abort stream.</p>","title","Model Access"]],template:function(a,i){a&1&&(e(0,"article")(1,"nz-affix",0)(2,"nz-anchor",1),h("nzClick",function(r){return i.goLink(r)}),l(3,"nz-link",2)(4,"nz-link",3)(5,"nz-link",4)(6,"nz-link",5)(7,"nz-link",6)(8,"nz-link",7)(9,"nz-link",8),n()(),e(10,"section",9)(11,"h1"),t(12," XChat "),l(13,"span",10),n(),l(14,"component-meta",11),e(15,"section",9)(16,"h2",12)(17,"span"),t(18,"When To Use"),n(),e(19,"a",13),t(20,"#"),n()(),e(21,"p"),t(22,"Use Agent to manage conversation data and produce data for page rendering."),n()(),e(23,"h2",14)(24,"span"),t(25,"Examples"),n(),e(26,"nz-icon",15),h("click",function(){return i.expandAllCode()}),n(),e(27,"a",16),t(28,"#"),n()()(),e(29,"demo-wrapper",17),L(30,Ye,1,0,"nx-demo-x-chat-basic",18)(31,je,1,0,"nx-demo-x-chat-stream",19)(32,Ke,1,0,"nx-demo-x-chat-suggestions",20)(33,Je,1,0,"nx-demo-x-chat-model",21),n(),e(34,"section",22),G(),e(35,"h2",23)(36,"span"),t(37,"API"),n(),e(38,"a",24),t(39,"#"),n()(),e(40,"h3",25)(41,"span"),t(42,"XChatConfig"),n(),e(43,"a",26),t(44,"#"),n()(),e(45,"table")(46,"thead")(47,"tr")(48,"th"),t(49,"Property"),n(),e(50,"th"),t(51,"Description"),n(),e(52,"th"),t(53,"Type"),n(),e(54,"th"),t(55,"Default"),n()()(),e(56,"tbody")(57,"tr")(58,"td")(59,"code"),t(60,"agent"),n()(),e(61,"td")(62,"code"),t(63,"agent"),n(),t(64," parameter is required when using the "),e(65,"code"),t(66,"onRequest"),n(),t(67," method in an agent generated by "),e(68,"code"),t(69,"XAgent"),n(),t(70,"."),n(),e(71,"td")(72,"code"),t(73,"XAgent"),n()(),e(74,"td"),t(75,"-"),n()(),e(76,"tr")(77,"td")(78,"code"),t(79,"defaultMessages"),n()(),e(80,"td"),t(81,"default messages"),n(),e(82,"td")(83,"code"),t(84,"{ status, message }[]"),n()(),e(85,"td"),t(86,"-"),n()(),e(87,"tr")(88,"td")(89,"code"),t(90,"parser"),n()(),e(91,"td"),t(92,"Convert AgentMessage to ParsedMessage for consumption. If not set, AgentMessage will be consumed directly. Supports converting one AgentMessage to multiple ParsedMessages"),n(),e(93,"td")(94,"code"),t(95,"(message: AgentMessage) => BubbleMessage | BubbleMessage[]"),n()(),e(96,"td"),t(97,"-"),n()(),e(98,"tr")(99,"td")(100,"code"),t(101,"requestFallback"),n()(),e(102,"td"),t(103,"Fallback when request fails, not provided will not be displayed"),n(),e(104,"td")(105,"code"),t(106,"AgentMessage | () => AgentMessage"),n()(),e(107,"td"),t(108,"-"),n()(),e(109,"tr")(110,"td")(111,"code"),t(112,"requestPlaceholder"),n()(),e(113,"td"),t(114,"Show the placeholder information when requesting, not provided will not be displayed"),n(),e(115,"td")(116,"code"),t(117,"AgentMessage | () => AgentMessage"),n()(),e(118,"td"),t(119,"-"),n()(),e(120,"tr")(121,"td")(122,"code"),t(123,"transformMessage"),n()(),e(124,"td"),t(125,"The "),e(126,"code"),t(127,"messages"),n(),t(128," can be converted when updating data, and will also be updated to "),e(129,"code"),t(130,"messages"),n()(),e(131,"td")(132,"code"),t(133,"(info: {originMessage?: AgentMessage,chunk: Output,chunks: Output[],status: MessageStatus}) => AgentMessage"),n()(),e(134,"td"),t(135,"-"),n()(),e(136,"tr")(137,"td")(138,"code"),t(139,"transformStream"),n()(),e(140,"td"),t(141,"Optional transform function for processing stream data"),n(),e(142,"td")(143,"code"),t(144,"XStreamOptions<Output>['transformStream']"),n()(),e(145,"td"),t(146,"-"),n()(),e(147,"tr")(148,"td")(149,"code"),t(150,"resolveAbortController"),n()(),e(151,"td")(152,"code"),t(153,"AbortController"),n(),t(154,",used to control the stream state"),n(),e(155,"td")(156,"code"),t(157,"(abortController: AbortController) => void"),n()(),e(158,"td"),t(159,"-"),n()()()(),e(160,"h3",27)(161,"span"),t(162,"XChatConfigReturnType"),n(),e(163,"a",28),t(164,"#"),n()(),e(165,"table")(166,"thead")(167,"tr")(168,"th"),t(169,"Property"),n(),e(170,"th"),t(171,"Description"),n(),e(172,"th"),t(173,"Type"),n(),e(174,"th"),t(175,"Default"),n()()(),e(176,"tbody")(177,"tr")(178,"td")(179,"code"),t(180,"messages"),n()(),e(181,"td"),t(182,"Current managed messages content"),n(),e(183,"td")(184,"code"),t(185,"{id: string | number; message: AgentMessage; status: MessageStatus;}[]"),n()(),e(186,"td"),t(187,"-"),n()(),e(188,"tr")(189,"td")(190,"code"),t(191,"parsedMessages"),n()(),e(192,"td"),t(193,"Parsed messages by "),e(194,"code"),t(195,"parser"),n(),t(196," api"),n(),e(197,"td")(198,"code"),t(199,"{id: string | number; message: ParsedMessage; status: MessageStatus;}[]"),n()(),e(200,"td"),t(201,"-"),n()(),e(202,"tr")(203,"td")(204,"code"),t(205,"onRequest"),n()(),e(206,"td"),t(207,"Create a message and trigger a request, If there is no data with "),e(208,"code"),t(209,"key"),n(),t(210," as"),e(211,"code"),t(212," message"),n(),t(213,", the entire data will be processed as a message"),n(),e(214,"td")(215,"code"),t(216,"(requestParams: AgentMessage | RequestParams) => void"),n()(),e(217,"td"),t(218,"-"),n()(),e(219,"tr")(220,"td")(221,"code"),t(222,"setMessages"),n()(),e(223,"td"),t(224,"Modify messages directly without triggering requests"),n(),e(225,"td")(226,"code"),t(227,"(messages: {id: string | number; message: AgentMessage; status: MessageStatus;}[]) => void"),n()(),e(228,"td"),t(229,"-"),n()()()(),e(230,"h3",29)(231,"span"),t(232,"RequestParams"),n(),e(233,"a",30),t(234,"#"),n()(),e(235,"p"),t(236,"Extends "),e(237,"a",31),t(238,"XRequestParams"),n(),t(239,"."),n(),e(240,"table")(241,"thead")(242,"tr")(243,"th"),t(244,"Property"),n(),e(245,"th"),t(246,"Description"),n(),e(247,"th"),t(248,"Type"),n(),e(249,"th"),t(250,"Default"),n()()(),e(251,"tbody")(252,"tr")(253,"td")(254,"code"),t(255,"message"),n()(),e(256,"td"),t(257,"Current message content"),n(),e(258,"td")(259,"code"),t(260,"AgentMessage"),n()(),e(261,"td"),t(262,"-"),n()()()(),$(),n()()),a&2&&(p(),c("nzOffsetTop",16),p(),c("nzAffix",!1))},dependencies:[le,me,oe,ie,ae,se,re,J,te,ee,W,O,Q,H],encapsulation:2})};var et=[{path:"en",component:ue},{path:"zh",component:de}],fn=et;export{fn as default};
