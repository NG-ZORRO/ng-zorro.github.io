{"highlightCode":"<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> DOCUMENT <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> Inject<span class=\"token punctuation\">,</span> Renderer2<span class=\"token punctuation\">,</span> ViewChild <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzCodeEditorComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/code-editor'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzTooltipDirective <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/tooltip'</span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'nz-demo-code-editor-complex'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token template-string\">template: <span class=\"token html\">`\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">nz-paragraph</span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span>px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      Loading\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nz-switch</span> <span class=\"token attr-name\">[(ngModel)]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>loading<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nz-switch</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nz-code-editor</span>\n      <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>editor<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">[class.full-screen]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>fullScreen<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">[ngModel]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>code<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">[nzLoading]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>loading<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">[nzToolkit]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>toolkit<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">[nzEditorOption]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ language: <span class=\"token punctuation\">'</span>javascript<span class=\"token punctuation\">'</span> }<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nz-code-editor</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span> <span class=\"token attr-name\">#toolkit</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span>\n        <span class=\"token attr-name\">nz-icon</span>\n        <span class=\"token attr-name\">[class.active]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>fullScreen<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">nz-tooltip</span>\n        <span class=\"token attr-name\">nzTooltipTitle</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Toggle Fullscreen<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">[nzType]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>fullScreen ? <span class=\"token punctuation\">'</span>fullscreen-exit<span class=\"token punctuation\">'</span> : <span class=\"token punctuation\">'</span>fullscreen<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>toggleFullScreen()<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span>\n  `</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token styles-string\">styles: [\n    <span class=\"token css\"><span class=\"token selector\">`\n      <span class=\"token class\">.editor</span> </span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span>px<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token selector\"><span class=\"token class\">.full-screen</span> </span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> fixed<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span> <span class=\"token number\">999</span><span class=\"token punctuation\">;</span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span>vh<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    `</span>\n  ]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NzDemoCodeEditorComplexComponent</span> <span class=\"token punctuation\">{</span>\n  @<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span>NzCodeEditorComponent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">static</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> editorComponent<span class=\"token punctuation\">:</span> NzCodeEditorComponent<span class=\"token punctuation\">;</span>\n  @<span class=\"token function\">ViewChild</span><span class=\"token punctuation\">(</span>NzTooltipDirective<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">static</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> tooltip<span class=\"token punctuation\">:</span> NzTooltipDirective<span class=\"token punctuation\">;</span>\n\n  loading <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n  fullScreen <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n  code <span class=\"token operator\">=</span> `<span class=\"token keyword\">function</span> <span class=\"token function\">flatten</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>arr <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The parameter must be an array.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">partial</span><span class=\"token punctuation\">(</span>arr_<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> arr_<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>previous<span class=\"token punctuation\">,</span> current<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        previous<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token function\">partial</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> previous<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        previous<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> previous<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">partial</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">flatten</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>`<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> document<span class=\"token punctuation\">:</span> Document<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\" spellcheck=\"true\">// tslint:disable-next-line no-any</span>\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span>@<span class=\"token function\">Inject</span><span class=\"token punctuation\">(</span>DOCUMENT<span class=\"token punctuation\">)</span> document<span class=\"token punctuation\">:</span> <span class=\"token keyword\">any</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> renderer<span class=\"token punctuation\">:</span> Renderer2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>document <span class=\"token operator\">=</span> document<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">toggleFullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fullScreen <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fullScreen<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderer<span class=\"token punctuation\">.</span><span class=\"token function\">setStyle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span> <span class=\"token string\">'overflow-y'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fullScreen <span class=\"token operator\">?</span> <span class=\"token string\">'hidden'</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>editorComponent<span class=\"token punctuation\">.</span><span class=\"token function\">layout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tooltip<span class=\"token punctuation\">.</span><span class=\"token function\">hide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n","rawCode":"import { DOCUMENT } from '@angular/common';\nimport { Component, Inject, Renderer2, ViewChild } from '@angular/core';\nimport { NzCodeEditorComponent } from 'ng-zorro-antd/code-editor';\nimport { NzTooltipDirective } from 'ng-zorro-antd/tooltip';\n\n@Component({\n  selector: 'nz-demo-code-editor-complex',\n  template: `\n    <p nz-paragraph style=\"margin-bottom: 8px;\">\n      Loading\n      <nz-switch [(ngModel)]=\"loading\"></nz-switch>\n    </p>\n    <nz-code-editor\n      class=\"editor\"\n      [class.full-screen]=\"fullScreen\"\n      [ngModel]=\"code\"\n      [nzLoading]=\"loading\"\n      [nzToolkit]=\"toolkit\"\n      [nzEditorOption]=\"{ language: 'javascript' }\"\n    ></nz-code-editor>\n    <ng-template #toolkit>\n      <i\n        nz-icon\n        [class.active]=\"fullScreen\"\n        nz-tooltip\n        nzTooltipTitle=\"Toggle Fullscreen\"\n        [nzType]=\"fullScreen ? 'fullscreen-exit' : 'fullscreen'\"\n        (click)=\"toggleFullScreen()\"\n      ></i>\n    </ng-template>\n  `,\n  styles: [\n    `\n      .editor {\n        height: 200px;\n      }\n\n      .full-screen {\n        position: fixed;\n        z-index: 999;\n        height: 100vh;\n        left: 0;\n        top: 0;\n        bottom: 0;\n        right: 0;\n      }\n    `\n  ]\n})\nexport class NzDemoCodeEditorComplexComponent {\n  @ViewChild(NzCodeEditorComponent, { static: false }) editorComponent: NzCodeEditorComponent;\n  @ViewChild(NzTooltipDirective, { static: false }) tooltip: NzTooltipDirective;\n\n  loading = true;\n  fullScreen = false;\n  code = `function flatten(arr) {\n  if (!(arr instanceof Array)) {\n    throw new Error('The parameter must be an array.');\n  }\n\n  function partial(arr_) {\n    return arr_.reduce((previous, current) => {\n      if (current instanceof Array) {\n        previous.push(...partial(current));\n        return previous;\n      } else {\n        previous.push(current);\n        return previous;\n      }\n    }, []);\n  }\n\n  return partial(arr);\n}\n\nconsole.log(flatten(['1', 2, [[3]]]))`;\n  private document: Document;\n\n  // tslint:disable-next-line no-any\n  constructor(@Inject(DOCUMENT) document: any, private renderer: Renderer2) {\n    this.document = document;\n  }\n\n  toggleFullScreen(): void {\n    this.fullScreen = !this.fullScreen;\n    this.renderer.setStyle(this.document.body, 'overflow-y', this.fullScreen ? 'hidden' : null);\n    this.editorComponent.layout();\n    this.tooltip.hide();\n  }\n}\n"}
